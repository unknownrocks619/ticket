!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.dearpdf=factory():root.dearpdf=factory()}(window,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=13)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEARPDF}));var DEARPDF=window.DEARPDF=window.DEARPDF={version:"1.2.61",autoDetectLocation:!0,MOUSE_CLICK_ACTIONS:{NONE:"none",NAV:"nav"},ARROW_KEYS_ACTIONS:{NONE:"none",NAV:"nav"},MOUSE_DBL_CLICK_ACTIONS:{NONE:"none",ZOOM:"zoom"},MOUSE_SCROLL_ACTIONS:{NONE:"none",ZOOM:"zoom",NAV:"nav"},PAGE_SCALE:{PAGE_FIT:"fit",PAGE_WIDTH:"width",AUTO:"auto",ACTUAL:"actual",MANUAL:"manual"},READ_DIRECTION:{LTR:"ltr",RTL:"rtl"},TURN_DIRECTION:{LEFT:"left",RIGHT:"right",NONE:"none"},INFO_TYPE:{INFO:"info",ERROR:"error"},FLIPBOOK_PAGE_MODE:{SINGLE:"single",DOUBLE:"double",AUTO:"auto"},FLIPBOOK_SINGLE_PAGE_MODE:{ZOOM:"zoom",BOOKLET:"booklet",AUTO:"auto"},FLIPBOOK_PAGE_SIZE:{AUTO:"auto",SINGLE:"single",DOUBLE_INTERNAL:"dbl_int",DOUBLE:"dbl",DOUBLE_COVER_BACK:"dbl_cover_back"},LINK_TARGET:{NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},CONTROLS_POSITION:{HIDDEN:"hidden",TOP:"top",BOTTOM:"bottom"},TURN_CORNER:{TL:"tl",TR:"tr",BL:"bl",BR:"br",L:"l",R:"r",NONE:"none"},REQUEST_STATUS:{OFF:"none",ON:"pending",COUNT:"counting"},TEXTURE_TARGET:{THUMB:0,VIEWER:1,ZOOM:2},FLIPBOOK_CENTER_SHIFT:{RIGHT:1,LEFT:-1,NONE:0}};DEARPDF._defaults={is3D:!0,has3DShadow:!0,color3DCover:"#777",color3DSheets:"#fff",has3DCover:!0,flexibility:.9,enableSound:!0,search:!1,height:"auto",autoOpenOutline:!1,autoOpenThumbnail:!1,showDownloadControl:!0,duration:800,pageRotation:0,flipbookRotation:0,readDirection:DEARPDF.READ_DIRECTION.LTR,pageMode:DEARPDF.FLIPBOOK_PAGE_MODE.AUTO,singlePageMode:DEARPDF.FLIPBOOK_SINGLE_PAGE_MODE.AUTO,flipbookFitPages:!1,backgroundColor:"transparent",flipbookHardPages:"none",openPage:1,annotationClass:"",maxTextureSize:3200,minTextureSize:256,rangeChunkSize:524288,disableAutoFetch:!0,disableStream:!0,disableFontFace:!1,icons:{altnext:"dp-icon-arrow-right1",altprev:"dp-icon-arrow-left1",next:"dp-icon-arrow-right1",prev:"dp-icon-arrow-left1",end:"dp-icon-last-page",start:"dp-icon-first-page",share:"dp-icon-share","outline-open":"dp-icon-arrow-right","outline-close":"dp-icon-arrow-down",help:"dp-icon-help",more:"dp-icon-more",download:"dp-icon-download",zoomin:"dp-icon-add-circle",zoomout:"dp-icon-minus-circle",fullscreen:"dp-icon-fullscreen","fullscreen-off":"dp-icon-fit-screen",fitscreen:"dp-icon-fit-screen",thumbnail:"dp-icon-grid-view",outline:"dp-icon-list",close:"dp-icon-close",doublepage:"dp-icon-double-page",singlepage:"dp-icon-file",print:"dp-icon-print",search:"dp-icon-search",sound:"dp-icon-volume","sound-off":"dp-icon-volume",facebook:"dp-icon-facebook",google:"dp-icon-google",twitter:"dp-icon-twitter",mail:"dp-icon-mail"},text:{toggleSound:"Turn on/off Sound",toggleThumbnails:"Toggle Thumbnails",toggleOutline:"Toggle Outline/Bookmark",previousPage:"Previous Page",nextPage:"Next Page",toggleFullscreen:"Toggle Fullscreen",zoomIn:"Zoom In",zoomOut:"Zoom Out",pageFit:"Fit Page",widthFit:"Fit Width",toggleHelp:"Toggle Help",search:"Search in PDF",singlePageMode:"Single Page Mode",doublePageMode:"Double Page Mode",downloadPDFFile:"Download PDF File",gotoFirstPage:"Goto First Page",gotoLastPage:"Goto Last Page",print:"Print",play:"Start AutoPlay",pause:"Pause AutoPlay",share:"Share",close:"Close",mailSubject:"I wanted you to see this FlipBook",mailBody:"Check out this site {{url}}",loading:"Loading"},share:{facebook:"https://www.facebook.com/sharer/sharer.php?u={{url}}",twitter:"https://twitter.com/share?url={{url}}",mail:void 0},allControls:"altPrev,pageNumber,altNext,outline,thumbnail,zoomIn,zoomOut,zoom,fullScreen,share,download,search,pageMode,startPage,endPage,sound,search,more",moreControls:"download,pageMode,pageFit,startPage,endPage,sound",hideControls:"",controlsPosition:DEARPDF.CONTROLS_POSITION.BOTTOM,paddingTop:20,paddingLeft:15,paddingRight:15,paddingBottom:20,enableAnalytics:!1,zoomRatio:2,pageScale:DEARPDF.PAGE_SCALE.PAGE_FIT,controlsFloating:!0,sideMenuOverlay:!0,enableAnnotation:!0,enableAutoLinks:!1,arrowKeysAction:DEARPDF.ARROW_KEYS_ACTIONS.NAV,clickAction:DEARPDF.MOUSE_CLICK_ACTIONS.NAV,dblClickAction:DEARPDF.MOUSE_DBL_CLICK_ACTIONS.NONE,mouseScrollAction:DEARPDF.MOUSE_SCROLL_ACTIONS.NONE,linkTarget:DEARPDF.LINK_TARGET.BLANK,soundFile:"sound/turn2.mp3",imagesLocation:"images",imageResourcesPath:"images/pdfjs/",cMapUrl:"js/libs/cmaps/",logo:"",logoUrl:"",sharePrefix:"pdf-",pageSize:DEARPDF.FLIPBOOK_PAGE_SIZE.AUTO,backgroundImage:"",pixelRatio:window.devicePixelRatio||1,spotLightIntensity:.22,ambientLightColor:"#fff",ambientLightIntensity:.8,shadowOpacity:.1,slug:void 0,headerElementSelector:void 0,onReady:function(app){},onPageChanged:function(app){},onCreate:function(app){},onCreateUI:function(app){},onFlip:function(app){},beforeFlip:function(app){},autoPDFLinktoViewer:!1,autoLightBoxFullscreen:!1,thumbLayout:"book-title-hover",cleanupAfterRender:!0},DEARPDF.defaults={},jQuery.extend(!0,DEARPDF.defaults,DEARPDF._defaults),DEARPDF.viewers={}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__.d(__webpack_exports__,"a",(function(){return Page2D}));var utils=window.DEARPDF.utils,Page2D=function(_Page){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Page2D,_Page);var _super=_createSuper(Page2D);function Page2D(options){var _this;return _classCallCheck(this,Page2D),(_this=_super.call(this)).canvasMode=null,options&&options.parentElement&&(_this.parentElement=options.parentElement),_this.init(),_this}return _createClass(Page2D,[{key:"init",value:function(){var element=this.element=jQuery("<div>",{class:"dp-page"});element[0].appendChild(this.contentLayer[0]),this.texture=new Image,this.parentElement&&this.parentElement[0].append(element[0])}},{key:"resetContent",value:function(){void 0!==this.annotationElement&&this.annotationElement.html(""),void 0!==this.textElement&&this.textElement.html("")}},{key:"setLoading",value:function(){this.element.toggleClass("dp-loading",!0!==this.textureLoaded)}},{key:"loadTexture",value:function(param){var page=this,texture=param.texture,callback=param.callback;function completed(){page.textureSrc=texture,page.element.css({backgroundImage:utils.bgImage(texture)}),page.updateTextureLoadStatus(!0),"function"==typeof callback&&callback(param)}null===page.canvasMode&&texture&&"CANVAS"===texture.nodeName&&(page.canvasMode=!0),!0===page.canvasMode?(page.element.find(">canvas").remove(),texture!==page.textureLoadFallback&&(page.textureSrc=texture,page.element.append(jQuery(texture))),page.updateTextureLoadStatus(!0),"function"==typeof callback&&callback(param)):texture===page.textureLoadFallback?completed():(page.texture.onload=completed,page.texture.src=texture)}},{key:"updateCSS",value:function(css){this.element.css(css)}},{key:"resetCSS",value:function(){this.element.css({transform:"",boxShadow:"",display:"block"})}}]),Page2D}(function(){function Page(){_classCallCheck(this,Page),this.textureLoadFallback="blank",this.textureStamp="-1",this.textureLoaded=!1,this.texture="blank",this.textureSrc="blank",this.pageNumber=void 0,this.contentLayer=jQuery("<div>",{class:"dp-page-content"})}return _createClass(Page,[{key:"reset",value:function(){this.resetTexture(),this.resetContent()}},{key:"resetTexture",value:function(){this.textureLoaded=!1,this.textureStamp="-1",this.loadTexture({texture:this.textureLoadFallback}),this.contentLayer.removeClass("dp-content-loaded")}},{key:"clearTexture",value:function(){this.loadTexture({texture:this.textureLoadFallback})}},{key:"resetContent",value:function(){}},{key:"loadTexture",value:function(param){}},{key:"getTexture",value:function(){var clone=arguments.length>0&&void 0!==arguments[0]&&arguments[0],texture=this.textureSrc;return!0===clone&&texture&&texture.cloneNode&&(texture=texture.cloneNode()).getContext&&texture.getContext("2d").drawImage(this.textureSrc,0,0),texture}},{key:"setLoading",value:function(){}},{key:"updateTextureLoadStatus",value:function(textureLoaded){this.textureLoaded=!0===textureLoaded,utils.log((!0===this.textureLoaded?"Loaded ":"Loading ")+this.textureStamp+" for "+this.pageNumber),this.contentLayer.toggleClass("dp-content-loaded",!0===textureLoaded),this.setLoading()}},{key:"changeTexture",value:function(pageNumber,textureSize){var reqStamp=pageNumber+"|"+textureSize;return this.textureStamp!==reqStamp&&(utils.log("Page "+pageNumber+" : texture changed from - "+this.textureStamp+" to "+reqStamp),this.textureLoaded=!1,this.textureStamp=reqStamp,this.updateTextureLoadStatus(!1),!0)}}]),Page}())},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return BaseViewer}));var DP=window.DEARPDF,utils=DP.utils,BaseViewer=function(){function BaseViewer(options,appContext){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseViewer),this.pages=[],this.app=appContext,this.parentElement=this.app.viewerContainer;var viewerClass="dp-viewer "+(options.viewerClass||"");this.element=jQuery("<div>",{class:viewerClass}),this.parentElement.append(this.element),this.wrapper=jQuery("<div>",{class:"dp-viewer-wrapper"}),this.element.append(this.wrapper),this.oldBasePageNumber=0,this.pages=[],this.minZoom=1,this.maxZoom=4,this.swipeThreshold=20,this.stageDOM=null,this.events={},this.arrowKeysAction=options.arrowKeysAction,this.clickAction=options.clickAction,this.scrollAction=options.scrollAction,this.dblClickAction=options.dblClickAction,this.pageBuffer=[],this.pageBufferSize=10}var Constructor,protoProps,staticProps;return Constructor=BaseViewer,(protoProps=[{key:"init",value:function(){}},{key:"updateBuffer",value:function(page){}},{key:"pageResetCallback",value:function(page){}},{key:"initCustomControls",value:function(){}},{key:"_getInnerWidth",value:function(){return this.app.dimensions.containerWidth-this.app.dimensions.padding.width-this.app.dimensions.offset.width}},{key:"_getInnerHeight",value:function(){return this.app.dimensions.maxHeight-this.app.dimensions.padding.height}},{key:"_getOuterHeight",value:function(height){return height}},{key:"dispose",value:function(){this.stageDOM&&(this.stageDOM.removeEventListener("mousemove",this.events.mousemove,!1),this.stageDOM.removeEventListener("mousedown",this.events.mousedown,!1),this.stageDOM.removeEventListener("mouseup",this.events.mouseup,!1),this.stageDOM.removeEventListener("touchmove",this.events.mousemove,!1),this.stageDOM.removeEventListener("touchstart",this.events.mousedown,!1),this.stageDOM.removeEventListener("touchend",this.events.mouseup,!1),this.stageDOM.removeEventListener("dblclick",this.events.dblclick,!1),this.stageDOM.removeEventListener("scroll",this.events.scroll,!1),this.stageDOM.removeEventListener("mousewheel",this.events.mousewheel,!1),this.stageDOM.removeEventListener("DOMMouseScroll",this.events.mousewheel,!1)),this.events=null,this.stageDOM=null,this.element.remove()}},{key:"checkDocumentPageSizes",value:function(){}},{key:"getViewerPageNumber",value:function(pageNumber){return pageNumber}},{key:"getDocumentPageNumber",value:function(pageNumber){return pageNumber}},{key:"getRenderContext",value:function(pdfPage,param){var app=this.app,provider=app.provider,pageNumber=param.pageNumber,textureTarget=utils.ifdef(param.textureTarget,DEARPDF.TEXTURE_TARGET.VIEWER),pageViewport=(app.dimensions.pageFit,provider.viewPorts[pageNumber]),dimen=app.viewer.getTextureSize(param),ratio=dimen.height/dimen.width;dimen.height=utils.limitAt(dimen.height,1,app.dimensions.maxTextureHeight),dimen.width=dimen.height/ratio;var textureCacheIndex=null;if(textureCacheIndex=textureTarget===DEARPDF.TEXTURE_TARGET.THUMB?app.thumbSize:Math.floor(dimen.height),void 0===provider.getCache(pageNumber,textureCacheIndex)){var scale=dimen.height/pageViewport.height,canvas=document.createElement("canvas"),viewport=this.filterViewPort(pdfPage.getViewport({scale:scale,rotation:app.options.pageRotation}),pageNumber);textureTarget===DEARPDF.TEXTURE_TARGET.THUMB&&(scale=viewport.width/viewport.height>180/app.thumbSize?180*scale/viewport.width:scale*app.thumbSize/viewport.height,viewport=this.filterViewPort(pdfPage.getViewport({scale:scale,rotation:app.options.pageRotation}),pageNumber)),canvas.height=Math.floor(viewport.height),canvas.width=Math.floor(viewport.width);var error=Math.abs(canvas.width-dimen.width)/dimen.width*100;return error>.001&&error<2&&(canvas.width=Math.floor(dimen.width),canvas.height=Math.floor(dimen.height)),app.viewer.filterViewPortCanvas(viewport,canvas,pageNumber),{canvas:canvas,canvasContext:canvas.getContext("2d"),viewport:viewport}}}},{key:"filterViewPort",value:function(viewport,pageNumber){return viewport}},{key:"getViewPort",value:function(pageNumber){var fallback=arguments.length>1&&void 0!==arguments[1]&&arguments[1],viewPort=this.app.provider.viewPorts[pageNumber];return fallback?null!=viewPort?viewPort:this.app.provider.coverPage.viewPort:viewPort}},{key:"pagesReady",value:function(){}},{key:"onReady",value:function(){}},{key:"filterViewPortCanvas",value:function(viewport){}},{key:"finalizeAnnotations",value:function(){}},{key:"finalizeTextContent",value:function(){}},{key:"initEvents",value:function(){var stageDOM=this.stageDOM=utils.ifdef(this.stageDOM,this.parentElement[0]);stageDOM&&(stageDOM.addEventListener("mousemove",this.events.mousemove=this.mouseMove.bind(this),!1),stageDOM.addEventListener("mousedown",this.events.mousedown=this.mouseDown.bind(this),!1),stageDOM.addEventListener("mouseup",this.events.mouseup=this.mouseUp.bind(this),!1),stageDOM.addEventListener("touchmove",this.events.mousemove=this.mouseMove.bind(this),!1),stageDOM.addEventListener("touchstart",this.events.mousedown=this.mouseDown.bind(this),!1),stageDOM.addEventListener("touchend",this.events.mouseup=this.mouseUp.bind(this),!1),stageDOM.addEventListener("dblclick",this.events.dblclick=this.dblclick.bind(this),!1),stageDOM.addEventListener("scroll",this.events.scroll=this.onScroll.bind(this),!1),stageDOM.addEventListener("mousewheel",this.events.mousewheel=this.mouseWheel.bind(this),!1),stageDOM.addEventListener("DOMMouseScroll",this.events.mousewheel=this.mouseWheel.bind(this),!1)),this.startTouches=null,this.lastScale=null,this.startPoint=null}},{key:"refresh",value:function(){}},{key:"reset",value:function(){}},{key:"eventToPoint",value:function(event){var point={x:event.clientX,y:event.clientY};return point.x=point.x-this.app.viewerContainer[0].getBoundingClientRect().left,point.y=point.y-this.app.viewerContainer[0].getBoundingClientRect().top,{raw:point}}},{key:"mouseMove",value:function(event){event=utils.fixMouseEvent(event),this.pinchMove(event),!0===this.pinchZoomDirty&&event.preventDefault(),this.startPoint&&1!=this.pinchZoomDirty&&(this.pan(this.eventToPoint(event)),event.preventDefault())}},{key:"mouseDown",value:function(event){event=utils.fixMouseEvent(event),this.pinchDown(event),this.startPoint=this.eventToPoint(event)}},{key:"mouseUp",value:function(event){event=utils.fixMouseEvent(event),!0===this.pinchZoomDirty&&event.preventDefault();var point=this.eventToPoint(event),element=event.target||event.originalTarget,isClick=this.startPoint&&point.x===this.startPoint.x&&point.y===this.startPoint.y&&"A"!==element.nodeName;!0===event.ctrlKey&&isClick&&this.zoomOnPoint(point),this.pinchUp(event),this.startPoint=null}},{key:"pinchDown",value:function(event){}},{key:"pinchUp",value:function(event){}},{key:"pinchMove",value:function(event){}},{key:"updateTemporaryScale",value:function(){var reset=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===reset)this.parentElement[0].style.transform="none";else if(this.app.viewer.zoomCenter){var scale=this.app.viewer.pinchZoomUpdateScale;this.parentElement[0].style.transformOrigin=this.app.viewer.zoomCenter.x+"px "+this.app.viewer.zoomCenter.y+"px",this.parentElement[0].style.transform="scale3d("+scale+","+scale+",1)"}}},{key:"pan",value:function(point){var reset=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.panRequestStatus=DEARPDF.REQUEST_STATUS.ON,utils.pan(this,point,reset)}},{key:"updatePan",value:function(){this.element.css({transform:"translate3d("+this.left+"px,"+this.top+"px,0)"})}},{key:"dblclick",value:function(event){}},{key:"onScroll",value:function(event){}},{key:"mouseWheel",value:function(event){var app=this.app,delta=utils.getMouseDelta(event),isValidZoom=!0===event.ctrlKey;app.options.mouseScrollAction===DEARPDF.MOUSE_SCROLL_ACTIONS.NAV&&!1===isValidZoom?delta>0?app.next():delta<0&&app.prev():app.options.mouseScrollAction!==DEARPDF.MOUSE_SCROLL_ACTIONS.ZOOM&&!0!==isValidZoom||(delta>0||delta<0)&&(event.preventDefault(),app.viewer.zoomCenter=this.eventToPoint(event).raw,app.zoom(delta),app.ui.update())}},{key:"zoomOnPoint",value:function(point){this.app.viewer.zoomCenter=point.raw,this.app.zoom(1)}},{key:"getVisiblePages",value:function(){return{main:[],buffer:[]}}},{key:"getBasePage",value:function(){return this.app.currentPageNumber}},{key:"isFirstPage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),1===pageNumber}},{key:"isLastPage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),pageNumber===this.app.pageCount}},{key:"isEdgePage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),1===pageNumber||pageNumber===this.app.pageCount}},{key:"checkRequestQueue",value:function(){var REQUEST_STATUS=DEARPDF.REQUEST_STATUS;this.panRequestStatus===REQUEST_STATUS.ON&&(this.updatePan(),this.panRequestStatus=REQUEST_STATUS.OFF),this.app.viewer.pinchZoomRequestStatus===REQUEST_STATUS.ON&&(this.app.viewer.updateTemporaryScale(),this.app.viewer.pinchZoomRequestStatus=REQUEST_STATUS.OFF)}},{key:"isAnimating",value:function(){return!1}},{key:"updatePendingStatusClass",value:function(status){void 0===status&&(status=this.isAnimating()),this.app.container.toggleClass("dp-pending",status)}},{key:"initPages",value:function(){}},{key:"resize",value:function(){}},{key:"zoom",value:function(){}},{key:"gotoPageCallBack",value:function(){this.requestRefresh()}},{key:"requestRefresh",value:function(){var status=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.app.refreshRequestStatus=!0===status?DP.REQUEST_STATUS.ON:DP.REQUEST_STATUS.OFF}},{key:"getPageByNumber",value:function(pageNumber){for(var pages=this.pages,page=void 0,count=0;count<pages.length;count++)if(pageNumber===pages[count].pageNumber){page=pages[count];break}return page}},{key:"changeAnnotation",value:function(){return!1}},{key:"getAnnotationElement",value:function(pageNumber){var clean=arguments.length>1&&void 0!==arguments[1]&&arguments[1],page=this.getPageByNumber(pageNumber);if(void 0!==page)return void 0===page.annotationElement&&(page.annotationElement=jQuery("<div class='dp-link-content'>"),page.contentLayer.append(page.annotationElement)),!0===clean&&page.annotationElement.html(""),page.annotationElement[0]}},{key:"getTextElement",value:function(pageNumber){var clean=arguments.length>1&&void 0!==arguments[1]&&arguments[1],page=this.getPageByNumber(pageNumber);if(void 0!==page)return void 0===page.textElement&&(page.textElement=jQuery("<div class='dp-text-content'>"),page.contentLayer.append(page.textElement)),!0===clean&&page.textElement.html(""),page.textElement[0]}},{key:"render",value:function(){}},{key:"textureLoadedCallback",value:function(param){}},{key:"handleZoom",value:function(){}},{key:"getTextureSize",value:function(param){console.error("Texture calculation missing!")}},{key:"setPage",value:function(param){utils.log("Set Page detected",param.pageNumber);var page=this.getPageByNumber(param.pageNumber);return!!page&&(param.callback=this.textureLoadedCallback.bind(this),page.loadTexture(param),this.updateBuffer(page),!0)}},{key:"cleanPage",value:function(pageNumber){return!0}},{key:"validatePageChange",value:function(pageNumber){return pageNumber!==this.app.currentPageNumber}},{key:"afterControlUpdate",value:function(){}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),BaseViewer}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BaseFlipBookViewer})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BookSheet}));var _base_viewer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_page_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var DEARPDF=window.DEARPDF,utils=DEARPDF.utils,BaseFlipBookViewer=function(_BaseViewer){_inherits(BaseFlipBookViewer,_BaseViewer);var _super=_createSuper(BaseFlipBookViewer);function BaseFlipBookViewer(options,appContext){var _this;return _classCallCheck(this,BaseFlipBookViewer),options.viewerClass="dp-flipbook "+(options.viewerClass||""),(_this=_super.call(this,options,appContext)).isFlipBook=!0,_this.sheets=[],_this.isRTL=_this.app.isRTL,_this.foldSense=50,_this.isOneSided=!1,_this.stackCount=6,_this.annotedPage=null,_this.pendingAnnotations=[],_this.seamPosition=0,_this.dragSheet=null,_this.drag=null,_this.soundOn=!0===options.enableSound,_this.soundFile=null,_this.minZoom=1,_this.maxZoom=4,_this.app.options.pageSize!==DEARPDF.FLIPBOOK_PAGE_SIZE.AUTO&&_this.app.options.pageSize!==DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL||(_this.app.checkSecondPage=!0),_this.app.pageScaling=DEARPDF.PAGE_SCALE.PAGE_FIT,options.viewerClass="",_this.zoomViewer=new ZoomViewer(options,appContext),_this}return _createClass(BaseFlipBookViewer,[{key:"init",value:function(){_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"init",this).call(this),this.initSound();var app=this.app;this.pageMode=app.options.pageMode===DEARPDF.FLIPBOOK_PAGE_MODE.AUTO?utils.isMobile||app.pageCount<=2?DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE:DEARPDF.FLIPBOOK_PAGE_MODE.DOUBLE:app.options.pageMode,this.singlePageMode=app.options.singlePageMode||(utils.isMobile?DEARPDF.FLIPBOOK_SINGLE_PAGE_MODE.BOOKLET:DEARPDF.FLIPBOOK_SINGLE_PAGE_MODE.ZOOM),this.updatePageMode()}},{key:"determineHeight",value:function(){}},{key:"initCustomControls",value:function(){_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"initCustomControls",this).call(this);var viewer=this,app=this.app,ui=app.ui,controls=ui.controls,text=app.options.text,icons=app.options.icons;controls.sound=utils.createBtn("sound",icons.sound,text.toggleSound).on("click",(function(){viewer.soundOn=!viewer.soundOn,ui.updateSound()})),ui.updateSound=function(){!1===viewer.soundOn?controls.sound.addClass("disabled"):controls.sound.removeClass("disabled")},ui.updateSound()}},{key:"dispose",value:function(){_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"dispose",this).call(this),this.zoomViewer.dispose(),this.soundFile=null}},{key:"initSound",value:function(){this.soundFile=document.createElement("audio"),this.soundFile.setAttribute("src",this.app.options.soundFile+"?ver="+DEARPDF.version),this.soundFile.setAttribute("type","audio/mpeg")}},{key:"playSound",value:function(){try{!0===this.app.userHasInteracted&&!0===this.soundOn&&(this.soundFile.currentTime=0,this.soundFile.play())}catch(error){}}},{key:"checkDocumentPageSizes",value:function(){var provider=this.app.provider;provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.AUTO&&(provider._page2Ratio&&provider._page2Ratio>1.5*provider.coverPage.pageRatio?provider.pageSize=DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL:provider.pageSize=DEARPDF.FLIPBOOK_PAGE_SIZE.SINGLE),provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&(provider.pageCount=1===provider.pdfDocument.numPages?1:2*provider.pdfDocument.numPages-2),provider.pageSize!==DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&provider.pageSize!==DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE||(provider.pageCount=2*provider.pdfDocument.numPages)}},{key:"getViewerPageNumber",value:function(pageNumber){return this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&pageNumber>2&&(pageNumber=2*pageNumber-1),this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&pageNumber>2&&(pageNumber=2*pageNumber-1),pageNumber}},{key:"getDocumentPageNumber",value:function(pageNumber){return this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL&&pageNumber>2?Math.ceil((pageNumber-1)/2)+1:this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK&&pageNumber>1?pageNumber===this.app.pageCount?1:Math.ceil((pageNumber-1)/2)+1:pageNumber}},{key:"getViewPort",value:function(pageNumber){var fallback=arguments.length>1&&void 0!==arguments[1]&&arguments[1],filter=arguments.length>2?arguments[2]:void 0;return this.filterViewPort(_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"getViewPort",this).call(this,pageNumber,fallback),pageNumber,filter)}},{key:"isDoubleInternal",value:function(){return this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_INTERNAL}},{key:"isDoubleCoverBack",value:function(){return this.app.provider.pageSize===DEARPDF.FLIPBOOK_PAGE_SIZE.DOUBLE_COVER_BACK}},{key:"isDoubleInternalPage",value:function(pageNumber){return this.isDoubleInternal()&&pageNumber>1&&pageNumber<this.app.provider.pageCount}},{key:"getDoublePageWidthFix",value:function(pageNumber){return this.isDoubleInternalPage(pageNumber)||this.isDoubleCoverBack()?2:1}},{key:"isDoublePageFix",value:function(pageNumber){var fix=!1;return(this.isDoubleCoverBack()||this.isDoubleInternalPage(pageNumber))&&(this.app.isRTL?pageNumber%2==0&&(fix=!0):pageNumber%2==1&&(fix=!0)),fix}},{key:"finalizeAnnotations",value:function(element,pageNumber){element.classList.toggle("dp-double-internal",this.isDoublePageFix(pageNumber))}},{key:"finalizeTextContent",value:function(element,pageNumber){element.classList.toggle("dp-double-internal",this.isDoublePageFix(pageNumber))}},{key:"isSheetCover",value:function(sheetNumber){var isBooklet=this.isBooklet;return 0===sheetNumber||isBooklet&&1===sheetNumber||sheetNumber===Math.ceil(this.app.pageCount/(isBooklet?1:2))-(isBooklet?0:1)}},{key:"isSheetHard",value:function(sheetNumber){var config=this.app.options.flipbookHardPages;this.isBooklet;if("cover"===config)return this.isSheetCover(sheetNumber);if("all"===config)return!0;var baseTest=(","+config+",").indexOf(","+(2*sheetNumber+1)+",")>-1,nextTest=(","+config+",").indexOf(","+(2*sheetNumber+2)+",")>-1;return baseTest||nextTest}},{key:"sheetsIndexShift",value:function(oldBasePageNumber,basePageNumber,stackCount){oldBasePageNumber>basePageNumber?(this.sheets[stackCount-1].skipFlip=!0,this.sheets.unshift(this.sheets.pop())):oldBasePageNumber<basePageNumber&&(this.sheets[0].skipFlip=!0,this.sheets.push(this.sheets.shift()))}},{key:"checkSwipe",value:function(point,event){if(!0!==this.pinchZoomDirty&&1===this.app.zoomValue&&!0===this.canSwipe){var swipe_dist=point.x-this.lastPos;Math.abs(swipe_dist)>this.swipeThreshold&&(swipe_dist<0?this.app.openRight():this.app.openLeft(),this.canSwipe=!1,event.preventDefault()),this.lastPos=point.x}}},{key:"checkCenter",value:function(){var centerShift,flag=arguments.length>0&&void 0!==arguments[0]&&arguments[0],viewer=this,app=this.app,SHIFT=DEARPDF.FLIPBOOK_CENTER_SHIFT,isEven=app.currentPageNumber%2==0,basePage=viewer.getBasePage(),isRTL=viewer.isRTL,isSingle=viewer.isSingle;centerShift=0===basePage||viewer.isBooklet?viewer.isRTL?SHIFT.RIGHT:SHIFT.LEFT:basePage===app.pageCount?isRTL?SHIFT.LEFT:SHIFT.RIGHT:isSingle?isRTL?isEven?SHIFT.LEFT:SHIFT.RIGHT:isEven?SHIFT.RIGHT:SHIFT.LEFT:SHIFT.NONE,!0!==viewer.centerNeedsUpdate&&(viewer.centerNeedsUpdate=viewer.centerShift!==centerShift),viewer.centerNeedsUpdate&&(viewer.centerShift=centerShift,viewer.updateCenter(flag),viewer.centerNeedsUpdate=!1)}},{key:"updateCenter",value:function(){console.log("UpdateCenter: missing implementation.")}},{key:"reset",value:function(){for(var sheet,count=0;count<this.sheets.length;count++)(sheet=this.sheets[count]).reset(),sheet.pageNumber=-1,sheet.resetTexture();this.annotedPage=null,this.oldBasePageNumber=-1,this.centerShift=null,this.refresh()}},{key:"handleZoom",value:function(){var app=this.app,maxZoom=(app.dimensions,this.maxZoom=app.dimensions.maxTextureHeight/this._containCover.height),zoomValue=app.zoomValue,exitZoom=!1,enterZoom=!1;!0===app.pendingZoom&&null!=app.zoomDelta?zoomValue=app.zoomDelta>0?zoomValue*app.options.zoomRatio:zoomValue/app.options.zoomRatio:null!=this.lastScale&&(zoomValue*=this.lastScale,this.lastScale=null);zoomValue=utils.limitAt(zoomValue,this.minZoom,maxZoom),app.zoomValueChange=zoomValue/app.zoomValue,!(app.zoomChanged=app.zoomValue!==zoomValue)||1!==zoomValue&&1!==app.zoomValue||(exitZoom=1===zoomValue,enterZoom=1===app.zoomValue),app.zoomValue=zoomValue,(enterZoom||exitZoom)&&(app.container.toggleClass("dp-zoom-active",1!==zoomValue),enterZoom&&this.enterZoom(),exitZoom&&this.exitZoom())}},{key:"refresh",value:function(){var app=this.app,stackCount=this.stackCount,isRTL=this.isRTL,isBooklet=this.isBooklet,basePageNumber=this.getBasePage(),pageDivisor=isBooklet?1:2;isRTL&&(basePageNumber=app.pageCount-basePageNumber);var _sheetCount,oldBasePageNumber=this.oldBasePageNumber,totalSheets=Math.ceil(app.pageCount/pageDivisor),midPoint=Math.floor(stackCount/2);basePageNumber!==this.oldBasePageNumber&&(this.pageNumberChanged=!0,this.updatePendingStatusClass(!0),this.zoomViewer.reset()),this.sheetsIndexShift(oldBasePageNumber,basePageNumber,stackCount);var baseSheetNumber=Math.ceil(basePageNumber/pageDivisor);for(_sheetCount=0;_sheetCount<stackCount;_sheetCount++){var _sheet=void 0,sheetNumber=baseSheetNumber-midPoint+_sheetCount;if(isRTL&&(sheetNumber=totalSheets-sheetNumber-1),null!=(_sheet=this.sheets[_sheetCount])){_sheet.targetSide=_sheetCount<midPoint?DEARPDF.TURN_DIRECTION.LEFT:DEARPDF.TURN_DIRECTION.RIGHT;var sideChanged=_sheet.side!==_sheet.targetSide,pageChanged=sheetNumber!==_sheet.pageNumber,needsFlip=sideChanged&&!1===_sheet.skipFlip&&1===app.zoomValue;if(!sideChanged&&pageChanged&&_sheet.isFlipping&&_sheet.tween&&_sheet.tween.stop(),_sheet.isHard=this.isSheetHard(sheetNumber),_sheet.isCover=this.isSheetCover(sheetNumber),this.refreshSheet({sheet:_sheet,sheetNumber:sheetNumber,totalSheets:totalSheets,zIndex:this.stackCount+(_sheetCount<midPoint?_sheetCount-midPoint:midPoint-_sheetCount),visible:isBooklet?isRTL?_sheetCount<midPoint||_sheet.isFlipping||needsFlip:_sheetCount>=midPoint||_sheet.isFlipping||needsFlip:sheetNumber>=0&&sheetNumber<totalSheets||isBooklet&&sheetNumber===totalSheets,index:_sheetCount,needsFlip:needsFlip,midPoint:midPoint}),pageChanged)_sheet.resetTexture(),(this.app.isRTL?_sheet.backPage:_sheet.frontPage).pageNumber=this.isBooklet?sheetNumber:2*sheetNumber+1,(this.app.isRTL?_sheet.frontPage:_sheet.backPage).pageNumber=this.isBooklet?-1:2*sheetNumber+2,app.textureRequestStatus=DEARPDF.REQUEST_STATUS.ON;_sheet.pageNumber=sheetNumber}}this.requestRefresh(!1),app.textureRequestStatus=DEARPDF.REQUEST_STATUS.ON,this.oldBasePageNumber=basePageNumber,this.checkCenter(),this.zoomViewer.refresh(),this.pageNumberChanged=!1}},{key:"validatePageChange",value:function(pageNumber){var app=this.app,valid=!this.isFlipping()||void 0===app.oldPageNumber;return valid=(valid=valid||app.currentPageNumber<pageNumber&&app.oldPageNumber<app.currentPageNumber)||app.currentPageNumber>pageNumber&&app.oldPageNumber>app.currentPageNumber}},{key:"getVisiblePages",value:function(){for(var visible=[],page=this.getBasePage(),count=this.app.zoomValue>1?1:this.isBooklet?Math.min(this.stackCount/2,2):this.stackCount/2,_count=0;_count<count;_count++)visible.push(page-_count),visible.push(page+_count+1);return{main:visible,buffer:[]}}},{key:"getBasePage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),this.isBooklet?pageNumber:2*Math.floor(pageNumber/2)}},{key:"afterFlip",value:function(){!0!==this.isAnimating()&&(this.pagesReady(),this.updatePendingStatusClass())}},{key:"isFlipping",value:function(){var isFlipping=!1;return this.sheets.forEach((function(sheet){!0===sheet.isFlipping&&(isFlipping=!0)})),isFlipping}},{key:"isAnimating",value:function(){return this.isFlipping()}},{key:"mouseWheel",value:function(event){this.app.options.mouseScrollAction===DEARPDF.MOUSE_SCROLL_ACTIONS.ZOOM?this.zoomViewer.mouseWheel(event):_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"mouseWheel",this).call(this,event)}},{key:"checkRequestQueue",value:function(){this.app.zoomValue>1?this.zoomViewer.checkRequestQueue():_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"checkRequestQueue",this).call(this)}},{key:"updatePan",value:function(){}},{key:"beforeFlip",value:function(){this.app.executeCallback("beforeFlip"),this.playSound()}},{key:"getAnnotationElement",value:function(pageNumber){var clean=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.zoomValue>1?this.zoomViewer.getAnnotationElement(pageNumber,clean):_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"getAnnotationElement",this).call(this,pageNumber,clean)}},{key:"getTextElement",value:function(pageNumber){var clean=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.zoomValue>1?this.zoomViewer.getTextElement(pageNumber,clean):_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"getTextElement",this).call(this,pageNumber,clean)}},{key:"enterZoom",value:function(){this.exchangeTexture(this,this.zoomViewer)}},{key:"exitZoom",value:function(){this.exchangeTexture(this.zoomViewer,this)}},{key:"exchangeTexture",value:function(from,to){var basePage=this.getBasePage(),fromPage=from.getPageByNumber(basePage),toPage=to.getPageByNumber(basePage);if(toPage&&"-1"===toPage.textureStamp?(toPage.textureStamp=fromPage.textureStamp,toPage.loadTexture({texture:fromPage.getTexture(!0)}),utils.log("Texture Exchanging at "+basePage)):utils.log("Texture Exchanging Bypassed at "+basePage),!this.isBooklet){var _fromPage=from.getPageByNumber(basePage+1),_toPage=to.getPageByNumber(basePage+1);_toPage&&"-1"===_toPage.textureStamp?(_toPage.textureStamp=_fromPage.textureStamp,_toPage.loadTexture({texture:_fromPage.getTexture(!0)}),utils.log("Texture Exchanging at "+(basePage+1))):utils.log("Texture Exchanging Bypassed at "+(basePage+1))}to.pagesReady()}},{key:"setPageMode",value:function(args){var isSingle=!0===args.isSingle;this.pageMode=isSingle?DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE:DEARPDF.FLIPBOOK_PAGE_MODE.DOUBLE,this.updatePageMode(),this.app.resizeRequestStart(),this.requestRefresh()}},{key:"updatePageMode",value:function(){this.app.pageCount<3&&(this.pageMode=DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE),this.isSingle=this.pageMode===DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE,this.isBooklet=this.isSingle&&this.singlePageMode===DEARPDF.FLIPBOOK_SINGLE_PAGE_MODE.BOOKLET,this.app.jumpStep=this.isSingle?1:2,this.totalSheets=Math.ceil(this.app.pageCount/(this.isBooklet?1:2))}},{key:"setPage",value:function(param){return param.textureTarget===DEARPDF.TEXTURE_TARGET.ZOOM?this.zoomViewer.setPage(param):_get(_getPrototypeOf(BaseFlipBookViewer.prototype),"setPage",this).call(this,param)}},{key:"_getInnerHeight",value:function(){var viewPort=this.app.dimensions.coverPage.viewPort,width=this.availablePageWidth(!1,!0),appHeight=this.app.dimensions.maxHeight-this.app.dimensions.padding.height;this._containCover=utils.contain(100*viewPort.width,100*viewPort.height,width,appHeight),this._containCover.width=Math.floor(this._containCover.width),this._containCover.height=Math.floor(this._containCover.height);var innerHeight=this.app.dimensions.isFixedHeight?appHeight:this._containCover.height;return this.app.coverScaleValue=this._containCover.height/viewPort.height,this.app.dimensions.stage.width=this.app.dimensions.stage.innerWidth+this.app.dimensions.padding.width,this.app.dimensions.stage.height=innerHeight+this.app.dimensions.padding.height,innerHeight}},{key:"availablePageWidth",value:function(){var zoom=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],ignoreSidemenuOverlay=arguments.length>1&&void 0!==arguments[1]&&arguments[1],extraWidth=!0===ignoreSidemenuOverlay?this.app.dimensions.offset.width:0,pageWidth=this.app.dimensions.stage.innerWidth+extraWidth;return pageWidth/=this.pageMode===DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE?1:2,Math.floor(pageWidth*(zoom?this.app.zoomValue:1))}},{key:"availablePageHeight",value:function(){var zoom=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.floor(this.app.dimensions.stage.innerHeight*(zoom?this.app.zoomValue:1))}},{key:"getTextureSize",value:function(param){var viewport=this.getViewPort(param.pageNumber,!0),dimen=utils.contain(100*viewport.width,100*viewport.height,window.devicePixelRatio*this.availablePageWidth(),window.devicePixelRatio*this.availablePageHeight());return{height:dimen.height,width:dimen.width}}},{key:"filterViewPort",value:function(viewport,pageNumber){var filter=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==viewport){if(1!=filter)return viewport;var _viewport=viewport.clone();return _viewport.width=_viewport.width/this.getDoublePageWidthFix(pageNumber),_viewport}}},{key:"filterViewPortCanvas",value:function(viewport,canvas,pageNumber){this.isDoublePageFix(pageNumber)&&(viewport.transform[4]=viewport.transform[4]-Math.floor(Math.min(canvas.width,2*viewport.width-canvas.width)))}},{key:"isClosedPage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),1===pageNumber||pageNumber===this.app.jumpStep*Math.ceil(this.app.pageCount/this.app.jumpStep)&&!this.isBooklet}},{key:"isLeftPage",value:function(pageNumber){return void 0===pageNumber&&(pageNumber=this.app.currentPageNumber),this.isBooklet?this.isRTL:pageNumber%2==(this.isRTL?1:0)}},{key:"cleanPage",value:function(pageNumber){if(this.isDoubleInternalPage(pageNumber)){var otherPage=pageNumber+(pageNumber%2==1?-1:1);return!1===this.app.provider.requestedPages[pageNumber]&&!1===this.app.provider.requestedPages[otherPage]}return _get(_getPrototypeOf(BaseFlipBookViewer.prototype),"cleanPage",this).call(this,pageNumber)}}]),BaseFlipBookViewer}(_base_viewer_js__WEBPACK_IMPORTED_MODULE_0__.a),ZoomViewer=function(_BaseViewer2){_inherits(ZoomViewer,_BaseViewer2);var _super2=_createSuper(ZoomViewer);function ZoomViewer(options,appContext){var _this2;return _classCallCheck(this,ZoomViewer),options.viewerClass="dp-zoomview "+(options.viewerClass||""),(_this2=_super2.call(this,options,appContext)).viewer=_this2.app.viewer,_this2.events={},_this2.init(),_this2.initEvents(),_this2.left=0,_this2.top=0,_this2}return _createClass(ZoomViewer,[{key:"init",value:function(){this.leftPage=new _page_js__WEBPACK_IMPORTED_MODULE_1__.a,this.rightPage=new _page_js__WEBPACK_IMPORTED_MODULE_1__.a,this.pages.push(this.leftPage),this.pages.push(this.rightPage),this.leftPage.element.addClass("dp-page-back"),this.rightPage.element.addClass("dp-page-front"),this.wrapper.append(this.leftPage.element),this.wrapper.append(this.rightPage.element),this.bookShadow=jQuery("<div>",{class:"dp-book-shadow"}),this.wrapper.append(this.bookShadow),this.wrapper.addClass("dp-sheet")}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],_get(_getPrototypeOf(ZoomViewer.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){this.element.remove()}},{key:"resize",value:function(){var dimensions=this.app.dimensions,padding=dimensions.padding,zoomHeight=this.app.viewer.availablePageHeight(),zoomWidth=this.app.viewer.availablePageWidth(),zoomFullWidth=this.fullWidth=2*zoomWidth,stageWidth=dimensions.stage.innerWidth,stageHeight=dimensions.stage.innerHeight,shiftHeight=this.shiftHeight=Math.ceil(utils.limitAt((zoomHeight-stageHeight)/2,0,zoomHeight)),shiftWidth=this.shiftWidth=Math.ceil(utils.limitAt((zoomFullWidth-stageWidth)/2,0,zoomFullWidth));1===this.app.zoomValue&&(this.left=0,this.top=0),this.element.css({top:-shiftHeight,bottom:-shiftHeight,right:-shiftWidth,left:-shiftWidth,paddingTop:padding.top,paddingRight:padding.right,paddingBottom:padding.bottom,paddingLeft:padding.left,transform:"translate3d("+this.left+"px,"+this.top+"px,0)"}),this.wrapper.css({width:zoomFullWidth,height:zoomHeight,marginTop:dimensions.height-zoomHeight-padding.height>0?(dimensions.height-padding.height-zoomHeight)/2:0}),this.wrapper.height(zoomHeight).width(zoomFullWidth-zoomFullWidth%2),!0===this.app.pendingZoom&&this.zoom(),this.app.viewer.annotedPage=null,this.pagesReady()}},{key:"zoom",value:function(){var app=this.app;if(app.zoomChanged){var origin=app.dimensions.origin,dz=app.zoomValueChange;if(1===app.zoomValue)this.left=0,this.top=0;else{this.left*=dz,this.top*=dz,app.viewer.zoomCenter||(app.viewer.zoomCenter={x:origin.x,y:origin.y});var pointOld={raw:app.viewer.zoomCenter},pointNew={raw:{}},dx=(pointOld.raw.x-origin.x)*dz,dy=(pointOld.raw.y-origin.y)*dz;pointNew.raw.x=origin.x+dx,pointNew.raw.y=origin.y+dy,this.startPoint=pointNew,this.pan(pointOld),this.startPoint=null}}app.viewer.zoomCenter=null}},{key:"reset",value:function(){this.leftPage.resetTexture(),this.rightPage.resetTexture()}},{key:"refresh",value:function(){var app=this.app,viewer=app.viewer,basePageNumber=viewer.getBasePage(),isLeftBase=viewer.isBooklet?!app.isRTL:app.isRTL,basePage=isLeftBase?this.rightPage:this.leftPage,nextPage=isLeftBase?this.leftPage:this.rightPage;basePage.pageNumber=basePageNumber,nextPage.pageNumber=basePageNumber+1,basePage.updateCSS({display:0===basePageNumber?"none":"block"}),nextPage.updateCSS({display:nextPage.pageNumber>app.pageCount||viewer.isBooklet?"none":"block"})}},{key:"updateCenter",value:function(){if(null!==this&&null!==this.app.viewer){var centerShift=this.app.viewer.centerShift,isRTL=this.app.viewer.isRTL,end=centerShift*(!isRTL&&this.app.currentPageNumber>1||isRTL&&this.app.currentPageNumber<this.app.pageCount?this.leftSheetWidth:this.rightSheetWidth)/2;this.wrapper[0].style.left=end+"px"}}},{key:"isDoubleInternalPage",value:function(pageNumber){return this.app.viewer.isDoubleInternalPage(pageNumber)}},{key:"pagesReady",value:function(){if(1!==this.app.zoomValue&&this.app.viewer.updatePendingStatusClass(!1),!1===this.app.options.flipbookFitPages){var availableWidth=this.app.viewer.availablePageWidth(),availableHeight=this.app.viewer.availablePageHeight(),basePage=this.app.viewer.getBasePage(),leftViewPort=this.leftViewport=this.app.viewer.getViewPort(basePage+(this.app.viewer.isBooklet?0:this.app.viewer.isRTL?1:0)),rightViewPort=this.rightViewPort=this.app.viewer.getViewPort(basePage+(this.app.viewer.isBooklet||this.app.viewer.isRTL?0:1));if(leftViewPort){var leftDimen=utils.contain(leftViewPort.width,leftViewPort.height,availableWidth,availableHeight);this.leftSheetWidth=Math.floor(leftDimen.width),this.leftSheetHeight=Math.floor(leftDimen.height)}if(this.leftSheetTop=(availableHeight-this.leftSheetHeight)/2,rightViewPort){var rightDimen=utils.contain(rightViewPort.width,rightViewPort.height,availableWidth,availableHeight);this.rightSheetWidth=Math.floor(rightDimen.width),this.rightSheetHeight=Math.floor(rightDimen.height)}this.rightSheetTop=(availableHeight-this.rightSheetHeight)/2,this.leftPage.element.height(Math.floor(this.leftSheetHeight)).width(Math.floor(this.leftSheetWidth)).css({transform:"translateY("+Math.floor(this.leftSheetTop)+"px)"}),this.rightPage.element.height(Math.floor(this.rightSheetHeight)).width(Math.floor(this.rightSheetWidth)).css({transform:"translateY("+Math.floor(this.rightSheetTop)+"px)"})}}},{key:"textureLoadedCallback",value:function(param){this.getPageByNumber(param.pageNumber);this.pagesReady()}}]),ZoomViewer}(_base_viewer_js__WEBPACK_IMPORTED_MODULE_0__.a),BookSheet=function(){function BookSheet(options){_classCallCheck(this,BookSheet),this.parentElement=options.parentElement,this.isFlipping=!1,this.isOneSided=!1,this.viewer=options.viewer,this.frontPage=null,this.backPage=null,this.animateToReset=null}return _createClass(BookSheet,[{key:"init",value:function(){}},{key:"flip",value:function(){}},{key:"frontImage",value:function(param){this.frontPage.loadTexture({texture:param.texture,callback:param.callback})}},{key:"backImage",value:function(param){this.backPage.loadTexture({texture:param.texture,callback:param.callback})}},{key:"resetTexture",value:function(){this.frontPage.resetTexture(),this.backPage.resetTexture()}},{key:"reset",value:function(){this.animateToReset=null,this.isFlipping=!1,this.currentTween=null,this.pendingPoint=null,this.magnetic=!1,this.skipFlip=!0,this.animateToReset=null,this.viewer.dragPage=null,this.viewer.flipPage=null,this.viewer.corner=DEARPDF.TURN_CORNER.NONE}}]),BookSheet}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__.d(__webpack_exports__,"a",(function(){return PDFDocumentProvider}));var DEARPDF=window.DEARPDF,utils=DEARPDF.utils,PDFLinkService=function(){function PDFLinkService(){_classCallCheck(this,PDFLinkService),this.baseUrl=null,this.pdfDocument=null,this.pdfApp=null,this.pdfHistory=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._pagesRefCache=null}return _createClass(PDFLinkService,[{key:"dispose",value:function(){this.baseUrl=null,this.pdfDocument=null,this.pdfApp=null,this.pdfHistory=null,this._pagesRefCache=null}},{key:"setDocument",value:function(pdfDocument,baseUrl){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(pdfApp){this.pdfApp=pdfApp,this.externalLinkTarget=pdfApp.options.linkTarget}},{key:"setHistory",value:function(pdfHistory){this.pdfHistory=pdfHistory}},{key:"navigateTo",value:function(dest){this.goToDestination(dest)}},{key:"addLinkAttributes",value:function(link,url){pdfjsLib.addLinkAttributes(link,{url:url,target:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}},{key:"goToDestination",value:function(dest){var destinationPromise,destString="",self=this,goToDestination=function goToDestination(destRef){var pageNumber=destRef instanceof Object?self._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;pageNumber?((pageNumber=self.pdfApp.viewer.getViewerPageNumber(pageNumber))>self.pdfApp.pageCount&&(pageNumber=self.pdfApp.pageCount),self.pdfApp.gotoPage(pageNumber),self.pdfHistory&&self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber})):(self.pdfApp.container.addClass("dp-fetch-pdf"),self.pdfDocument.getPageIndex(destRef).then((function(pageIndex){self.pdfApp.container.removeClass("dp-fetch-pdf");var pageNum=pageIndex+1,cacheKey=destRef.num+" "+destRef.gen+" R";self._pagesRefCache[cacheKey]=pageNum,goToDestination(destRef)})))};"string"==typeof dest?(destString=dest,destinationPromise=this.pdfDocument.getDestination(dest)):destinationPromise=Promise.resolve(dest),destinationPromise.then((function(destination){dest=destination,destination instanceof Array&&goToDestination(destination[0])}))}},{key:"customNavigateTo",value:function(dest){if(""!==dest&&null!=dest&&"null"!==dest){var pageNumber=null;if(isNaN(Math.floor(dest))){if("string"==typeof dest&&(pageNumber=parseInt(dest.replace("#",""),10),isNaN(pageNumber)))return void window.open(dest,this.pdfApp.options.linkTarget===DEARPDF.LINK_TARGET.SELF?"_self":"_blank")}else pageNumber=dest;null!=pageNumber&&this.pdfApp.gotoPage(pageNumber)}}},{key:"getDestinationHash",value:function(dest){if("string"==typeof dest)return this.getAnchorUrl("#"+escape(dest));if(dest instanceof Array){var destRef=dest[0],pageNumber=destRef instanceof Object?this._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){var pdfOpenParams=this.getAnchorUrl("#page="+pageNumber),destKind=dest[1];if("object"===_typeof(destKind)&&"name"in destKind&&"XYZ"===destKind.name){var scale=dest[4]||this.pdfApp.pageScaleValue,scaleNumber=parseFloat(scale);scaleNumber&&(scale=100*scaleNumber),pdfOpenParams+="&zoom="+scale,(dest[2]||dest[3])&&(pdfOpenParams+=","+(dest[2]||0)+","+(dest[3]||0))}return pdfOpenParams}}return this.getAnchorUrl("")}},{key:"getCustomDestinationHash",value:function(dest){return"#"+escape(dest)}},{key:"getAnchorUrl",value:function(anchor){return(this.baseUrl||"")+anchor}},{key:"executeNamedAction",value:function(action){switch(action){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var event=document.createEvent("CustomEvent");event.initCustomEvent("namedaction",!0,!0,{action:action}),this.pdfApp.container.dispatchEvent(event)}},{key:"cachePageRef",value:function(pageNum,pageRef){var refStr=pageRef.num+" "+pageRef.gen+" R";this._pagesRefCache[refStr]=pageNum}},{key:"pagesCount",get:function(){return this.pdfDocument.numPages}},{key:"page",get:function(){return this.pdfApp.currentPageNumber},set:function(value){this.pdfApp.gotoPage(value)}}]),PDFLinkService}(),PDFDocumentProvider=function(_DocumentProvider){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PDFDocumentProvider,_DocumentProvider);var _super=_createSuper(PDFDocumentProvider);function PDFDocumentProvider(props,context){var _this;_classCallCheck(this,PDFDocumentProvider);var callback,app=(_this=_super.call(this,props,context)).app,provider=_assertThisInitialized(_this);function getWorkerScript(callback){app.options.pdfjsWorkerSrc+="?ver="+DEARPDF.version,app.updateInfo(app.options.text.loading+" PDF Worker ...");var tmp=document.createElement("a");tmp.href=app.options.pdfjsWorkerSrc,tmp.hostname!==window.location.hostname&&!0===DEARPDF.loadCorsPdfjsWorker?(app.updateInfo(app.options.text.loading+" PDF Worker CORS ..."),jQuery.ajax({url:app.options.pdfjsWorkerSrc,cache:!0,success:function(data){app.options.pdfjsWorkerSrc=utils.createObjectURL(data,"text/javascript"),"function"==typeof callback&&callback()}})):"function"==typeof callback&&callback()}return provider.pdfDocument=void 0,provider.viewPorts=[],provider._page1Pass=!1,provider._page2Pass=!1,provider._page2Ratio=void 0,callback=function(){pdfjsLib.GlobalWorkerOptions.workerSrc=app.options.pdfjsWorkerSrc,provider.loadDocument()},"undefined"==typeof pdfjsLib?(app.updateInfo(app.options.text.loading+" PDF Service ..."),utils.getScript(app.options.pdfjsSrc+"?ver="+DEARPDF.version,(function(){"function"==typeof define&&__webpack_require__(6)&&window.requirejs?(app.updateInfo(app.options.text.loading+" PDF Service (require) ..."),window.require.config({paths:{"pdfjs-dist/build/pdf.worker":app.options.pdfjsWorkerSrc.replace(".js","")}}),window.require(["pdfjs-dist/build/pdf"],(function(pdfjsLib){window.pdfjsLib=pdfjsLib,getWorkerScript(callback)}))):getWorkerScript(callback)}),(function(){app.updateInfo("Unable to load PDF service.."),provider.dispose()}))):"function"==typeof callback&&callback(),_this}return _createClass(PDFDocumentProvider,[{key:"dispose",value:function(){this.pdfDocument&&this.pdfDocument.destroy(),this.linkService=utils.disposeObject(this.linkService),this.pdfLoadProgress&&this.pdfLoadProgress.destroy(),this.pdfLoadProgress=null,this.pdfDocument=null}},{key:"loadDocument",value:function(){var app=this.app,options=this.app.options,provider=this,parameters=options.pdfParameters||{};if(parameters.url=utils.httpsCorrection(parameters.url||options.source),parameters.rangeChunkSize=options.rangeChunkSize,parameters.cMapPacked=!0,parameters.disableAutoFetch=options.disableAutoFetch,parameters.disableStream=options.disableStream,parameters.disableRange=!0===options.disableRange,parameters.disableFontFace=options.disableFontFace,parameters.cMapUrl=options.cMapUrl,parameters.imagesLocation=options.imagesLocation,parameters.imageResourcesPath=options.imageResourcesPath,parameters.url||parameters.data||parameters.range){var pdfLoadProcess=provider.pdfLoadProgress=pdfjsLib.getDocument(parameters);pdfLoadProcess.promise.then((function(pdf){provider.pdfDocument=pdf,pdf.getPage(1).then((function(page){provider.coverPage=page;var _coverViewPort=provider.coverPage.viewPort=page.getViewport({scale:1,rotation:app.options.pageRotation}),_coverPageRatio=provider.coverPage.pageRatio=_coverViewPort.width/_coverViewPort.height,_isCoverWide=_coverPageRatio>1;provider.viewPorts[1]=_coverViewPort,app.dimensions.coverPage={ratio:_coverPageRatio,viewPort:_coverViewPort,width:_coverViewPort.width,height:_coverViewPort.height},app.dimensions.maxTextureHeight=options.maxTextureSize/(_isCoverWide?_coverPageRatio:1),app.dimensions.autoHeightRatio=1/_coverPageRatio,provider.pageCount=pdf.numPages,provider._page1Pass=!0,provider.pagesLoaded()})),pdf.numPages>1&&!0===app.checkSecondPage?pdf.getPage(2).then((function(page){var _page2ViewPort=page.getViewport({scale:1,rotation:app.options.pageRotation});provider._page2Ratio=_page2ViewPort.width/_page2ViewPort.height,provider.viewPorts[2]=_page2ViewPort,provider._page2Pass=!0,provider.pagesLoaded()})):(provider._page2Pass=!0,provider.pagesLoaded())})).catch((function(error){if(null!==app&&null!=app.options){var _app$options,cors="",_a=document.createElement("a");_a.href=app.options.source,_a.hostname===window.location.hostname||-1!==_a.href.indexOf("file://")||utils.isChromeExtension()||-1!==_a.href.indexOf("blob:")||(cors="<strong>CROSS ORIGIN!! </strong>");var fileName=(null===(_app$options=app.options)||void 0===_app$options?void 0:_app$options.fileName)||_a.href;app.updateInfo(cors+"<strong>Error: Cannot access file!  </strong>"+unescape(fileName)+"<br><br>"+error.message,"dp-error"),console.log(error),app.container.removeClass("dp-loading").addClass("dp-error"),provider.dispose()}})),pdfLoadProcess.onProgress=function(progressData){if(null!==app){var percentage=100*progressData.loaded/progressData.total;isNaN(percentage)?progressData&&progressData.loaded?app.updateInfo(app.options.text.loading+" PDF "+(Math.ceil(progressData.loaded/1e4)/100).toFixed(2).toString()+"MB ..."):app.updateInfo(app.options.text.loading+" PDF ..."):app.updateInfo(app.options.text.loading+" PDF "+Math.ceil(percentage).toString().split(".")[0]+"% ..."),app.finalizeRequested}}}else app.updateInfo("ERROR : No PDF File provided! ","dp-error")}},{key:"pdfFetchStarted",value:function(){this.pdfFetchStatusCount=0,this.app.container.addClass("dp-fetch-pdf"),this.pdfFetchStatus=DEARPDF.REQUEST_STATUS.COUNT}},{key:"checkRequestQueue",value:function(){}},{key:"pagesLoaded",value:function(){this._page1Pass&&this._page2Pass&&(this.app.viewer.checkDocumentPageSizes(),this.finalize())}},{key:"finalize",value:function(){var app=this.app,provider=this;null!==app&&null!==app.options&&(provider.linkService=new PDFLinkService,provider.linkService.setDocument(provider.pdfDocument,null),provider.linkService.setViewer(app),provider.pdfDocument.getOutline().then((function(pdfOutline){pdfOutline=pdfOutline||[],provider.outline=pdfOutline,provider._documentLoaded()})))}},{key:"processPage",value:function(param){var app=this.app,provider=this,pageNumber=param.pageNumber,startTime=performance.now(),pdfPageNumberToRender=app.viewer.getDocumentPageNumber(pageNumber);provider.pdfDocument.getPage(pdfPageNumberToRender).then((function(pdfPage){utils.log("Requesting PDF Page:"+pdfPageNumberToRender),provider.viewPorts[pageNumber]||(param.isFreshPage=!0,provider.viewPorts[pageNumber]=pdfPage.getViewport({scale:1,rotation:app.options.pageRotation}));var _app$viewer$getPageBy,renderContext=app.viewer.getRenderContext(pdfPage,param);param.isFreshPage&&(null===(_app$viewer$getPageBy=app.viewer.getPageByNumber(param.pageNumber))||void 0===_app$viewer$getPageBy||_app$viewer$getPageBy.changeTexture(param.pageNumber,renderContext.canvas.height));utils.log("Page "+pageNumber+" rendering - "+renderContext.canvas.width+"x"+renderContext.canvas.height),param.trace=provider.requestIndex++,provider.requestedPages+=","+param.trace+"["+pdfPageNumberToRender+"|"+renderContext.canvas.height+"]",pdfPage.cleanupAfterRender=!1,pdfPage.render(renderContext).promise.then((function(){if(app.applyTexture(renderContext.canvas,param),!0===app.options.cleanupAfterRender){var checkString=","+param.trace+"["+pdfPageNumberToRender+"|"+renderContext.canvas.height+"]";utils.log("CleanUp Requesting for ("+pageNumber+") actual "+pdfPageNumberToRender),provider.requestedPages.indexOf(checkString)>-1&&(provider.requestedPages=provider.requestedPages.replace(checkString,""),-1==provider.requestedPages.indexOf("["+pdfPageNumberToRender+"|")?(utils.log("CleanUp Passed for ("+pageNumber+") actual "+pdfPageNumberToRender),provider.pagesToClean.push(pdfPage),provider.pagesToClean.length>0&&provider.cleanUpPages()):utils.log("CleanUp Cancelled waiting for ("+pageNumber+") actual "+pdfPageNumberToRender+" : "+provider.requestedPages))}renderContext=null,utils.log("Rendered "+pageNumber+" in "+(performance.now()-startTime)+" milliseconds")})).catch((function(error){console.log(error)}))})).catch((function(error){console.log(error)}))}},{key:"cleanUpPages",value:function(){for(;this.pagesToClean.length>0;){var page=this.pagesToClean.splice(-1)[0];utils.log("Cleanup Completed for PDF page: "+(page._pageIndex+1)),page.cleanup()}}}]),PDFDocumentProvider}(function(){function DocumentProvider(props,context){_classCallCheck(this,DocumentProvider),this.props=props,this.app=context,this.textureCache=[],this.pageCount=0,this.outline=[],this.requestedPages="",this.requestIndex=0,this.pagesToClean=[],this.coverPage=void 0,this.pageSize=props.pageSize}return _createClass(DocumentProvider,[{key:"finalize",value:function(){}},{key:"setCache",value:function(index,src,cacheIndexSize){var cacheIndex=cacheIndexSize;cacheIndexSize&&(void 0===this.textureCache[cacheIndex]&&(this.textureCache[cacheIndex]=[]),this.textureCache[cacheIndex][index]=src)}},{key:"getCache",value:function(index,textureIndex){return void 0===this.textureCache[textureIndex]?void 0:this.textureCache[textureIndex][index]}},{key:"_isValidPage",value:function(pageNumber){return pageNumber>0&&pageNumber<=this.pageCount}},{key:"processPage",value:function(param){}},{key:"cleanUpPages",value:function(){}},{key:"checkRequestQueue",value:function(){}},{key:"processAnnotations",value:function(){}},{key:"processTextContent",value:function(){}},{key:"_documentLoaded",value:function(){this.finalizeOutLine(),this.app&&this.app.dimensions&&void 0===this.app.dimensions.pageFit&&utils.log("Provider needs to initialize page properties for the app"),this.app._documentLoaded()}},{key:"finalizeOutLine",value:function(){if(null!==this.app&&null!==this.app.options){var outline=this.app.options.outline;if(outline)for(var count=0;count<outline.length;count++)outline[count].custom=!0,this.outline.push(outline[count])}}}]),DocumentProvider}())},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return utils}));var styles,pre,DP=window.DEARPDF,has3d="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,hasMouse="onmousedown"in window,utils=DP.utils={mouseEvents:hasMouse?{type:"mouse",start:"mousedown",move:"mousemove",end:"mouseup"}:{type:"touch",start:"touchstart",move:"touchmove",end:"touchend"},html:{div:"<div></div>",a:"<a>",input:"<input type='text'/>",select:"<select></select>"},getSharePrefix:function(){return utils.getSharePrefixes()[0]},getSharePrefixes:function(){return(DEARPDF.defaults.sharePrefix+",dearpdf-").split(",").filter((function(e){return e}))},toRad:function(deg){return deg*Math.PI/180},toDeg:function(rad){return 180*rad/Math.PI},ifdef:function(checkVal){var ifEmpty=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null==checkVal?ifEmpty:checkVal},createBtn:function(name,icon,text){var btn=jQuery(utils.html.div,{class:"dp-ui-btn dp-ui-"+name,title:text,html:void 0!==text?"<span>"+text+"</span>":""});return void 0!==icon&&icon.indexOf("<svg")>-1?btn.html(icon.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg" ')):btn.addClass(icon),btn},transition:function(hasTransition,duration){return hasTransition?duration/1e3+"s ease-out":"0s none"},display:function(hasDisplay){return hasDisplay?"block":"none"},resetTranslate:function(){return utils.translateStr(0,0)},bgImage:function(src){return null==src||"blank"===src?"":" url("+src+")"},translateStr:function(x,y){return has3d?" translate3d("+x+"px,"+y+"px, 0px) ":" translate("+x+"px, "+y+"px) "},httpsCorrection:function(url){if(null==url)return null;var location=window.location;return location.href.indexOf("https://")>-1&&url.indexOf(location.hostname)>-1&&(url=url.replace("http://","https://")),location.href.indexOf("http://")>-1&&url.indexOf(location.hostname)>-1&&(url=url.replace("https://","http://")),url},rotateStr:function(deg){return" rotateZ("+deg+"deg) "},lowerPowerOfTwo:function(value){return Math.pow(2,Math.floor(Math.log(value)/Math.LN2))},nearestPowerOfTwo:function(value,max){return Math.min(max||2048,Math.pow(2,Math.ceil(Math.log(value)/Math.LN2)))},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},hasFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},fixMouseEvent:function(event){if(event){var originalEvent=event.originalEvent||event;if(originalEvent.changedTouches&&originalEvent.changedTouches.length>0){var _event=jQuery.event.fix(event),touch=originalEvent.changedTouches[0];return _event.clientX=touch.clientX,_event.clientY=touch.clientY,_event.pageX=touch.pageX,_event.touches=originalEvent.touches,_event.pageY=touch.pageY,_event.movementX=touch.movementX,_event.movementY=touch.movementY,_event}return event}return event},limitAt:function(x,min,max){return x<min?min:x>max?max:x},distOrigin:function(x,y){return utils.distPoints(0,0,x,y)},distPoints:function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},angleByDistance:function(distance,fullWidth){var h=fullWidth/2,d=utils.limitAt(distance,0,fullWidth);return d<h?utils.toDeg(Math.asin(d/h)):90+utils.toDeg(Math.asin((d-h)/h))},calculateScale:function(startTouches,endTouches){var startDistance=utils.distPoints(startTouches[0].x,startTouches[0].y,startTouches[1].x,startTouches[1].y);return utils.distPoints(endTouches[0].x,endTouches[0].y,endTouches[1].x,endTouches[1].y)/startDistance},getVectorAvg:function(vectors){return{x:vectors.map((function(v){return v.x})).reduce(utils.sum)/vectors.length,y:vectors.map((function(v){return v.y})).reduce(utils.sum)/vectors.length}},sum:function(a,b){return a+b},getTouches:function(event,position){return position=position||{left:0,top:0},Array.prototype.slice.call(event.touches).map((function(touch){return{x:touch.pageX-position.left,y:touch.pageY-position.top}}))},getScriptCallbacks:[],getScript:function(source,callback,errorCallback){var script,_callbacks=utils.getScriptCallbacks[source];function clean(){script.removeEventListener("load",load,!1),script.removeEventListener("readystatechange",load,!1),script.removeEventListener("complete",load,!1),script.removeEventListener("error",onError,!1),script.onload=script.onreadystatechange=null,script=null,script=null}function load(_,isAbort){if(null!=script&&(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))){if(!isAbort){for(var i=0;i<_callbacks.length;i++)_callbacks[i]&&_callbacks[i](),_callbacks[i]=null;errorCallback=null}clean()}}function onError(){errorCallback(),clean(),errorCallback=null}if(0===jQuery("script[src='"+source+"']").length){(_callbacks=utils.getScriptCallbacks[source]=[]).push(callback),script=document.createElement("script");var prior=document.body.getElementsByTagName("script")[0];script.async=!0,script.setAttribute("data-cfasync","false"),null!=prior?(prior.parentNode.insertBefore(script,prior),prior=null):document.body.appendChild(script),script.addEventListener("load",load,!1),script.addEventListener("readystatechange",load,!1),script.addEventListener("complete",load,!1),errorCallback&&script.addEventListener("error",onError,!1),script.src=source+("MS"===utils.prefix.dom?"?"+Math.random():"")}else _callbacks.push(callback)},detectScriptLocation:function(){if("undefined"==typeof dearPdfLocation)jQuery("script").each((function(){var src=jQuery(this)[0].src;if((src.indexOf("/dearpdf-pro.js")>-1||src.indexOf("/dearpdf-pro.min.js")>-1||src.indexOf("js/dearpdf-pro.")>-1)&&(src.indexOf("https://")>-1||src.indexOf("http://")>-1)){var splits=src.split("/");window.dearPdfLocation=splits.slice(0,-2).join("/")}}));else if(-1==dearPdfLocation.indexOf(":")){var a=document.createElement("a");a.href=dearPdfLocation,dearPdfLocation=a.href,a=null}"undefined"!=typeof dearPdfLocation&&dearPdfLocation.length>2&&"/"!==dearPdfLocation.slice(-1)&&(window.dearPdfLocation+="/")},disposeObject:function(object){return object&&object.dispose&&object.dispose(),object=null},log:function(){var _console;!0===DP.defaults.enableDebugLog&&window.console&&(_console=console).log.apply(_console,arguments)},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIOS:/(iPad|iPhone|iPod)/g.test(navigator.userAgent),isIPad:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Mac/.test(navigator.platform),isSafari:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),isIEUnsupported:navigator.userAgent.match(/(MSIE|Trident)/),isSafariWindows:function(){return!utils.isIOS&&utils.isSafari},prefix:(styles=window.getComputedStyle(document.documentElement,""),pre=Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)[1],{dom:"WebKit|Moz|MS".match(new RegExp("("+pre+")","i"))[1],lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}),scrollIntoView:function(element,reference,align){(reference=reference||element.parentNode).scrollTop=element.offsetTop-reference.offsetTop+(!1===align?element.offsetHeight-reference.offsetHeight:0),reference.scrollLeft=element.offsetLeft-reference.offsetLeft},getVisibleElements:function(options){var container=options.container,elements=options.elements,visible=options.visible||[],top=container.scrollTop,bottom=top+container.clientHeight;if(0==bottom)return visible;var minIndex=0,maxIndex=elements.length-1,element=elements[minIndex],elementBottom=element.offsetTop+element.clientTop+element.clientHeight;if(elementBottom<top)for(;minIndex<maxIndex;){var currentIndex=minIndex+maxIndex>>1;(elementBottom=(element=elements[currentIndex]).offsetTop+element.clientTop+element.clientHeight)>top?maxIndex=currentIndex:minIndex=currentIndex+1}for(var i=minIndex;i<elements.length;i++){if(!((element=elements[i]).offsetTop+element.clientTop<=bottom))break;visible.push(i+1)}return visible},getMouseDelta:function(event){var delta=0;return null!=event.wheelDelta?delta=event.wheelDelta:null!=event.detail&&(delta=-event.detail),delta},pan:function(viewer,point){var reset=arguments.length>2&&void 0!==arguments[2]&&arguments[2],origin=viewer.startPoint,scale=viewer.app.zoomValue,left=viewer.left+(!0===reset?0:point.raw.x-origin.raw.x),top=viewer.top+(!0===reset?0:point.raw.y-origin.raw.y);viewer.left=Math.ceil(utils.limitAt(left,-viewer.shiftWidth,viewer.shiftWidth)),viewer.top=Math.ceil(utils.limitAt(top,-viewer.shiftHeight,viewer.shiftHeight)),1===scale&&(viewer.left=0,viewer.top=0),!1===reset&&(viewer.startPoint=point)}};utils.isChromeExtension=function(){return 0===window.location.href.indexOf("chrome-extension://")},DEARPDF.hashFocusBookFound=!1,utils.detectHash=function(){DEARPDF.preParseHash=window.location.hash,Array.prototype.forEach.call(utils.getSharePrefixes(),(function(prefix){if(DEARPDF.preParseHash&&DEARPDF.preParseHash.indexOf(prefix)>=0&&!1===DEARPDF.hashFocusBookFound){var book,id=DEARPDF.preParseHash.split(prefix)[1].split("/")[0],page=DEARPDF.preParseHash.split(prefix)[1].split("/")[1];null!=page&&(page=page.split("/")[0]),0===(book=jQuery("[data-slug="+id+"]")).length&&(book=jQuery("#"+id)),0===book.length&&(book=jQuery("[data-_slug="+id+"]")),book.length>0&&(book=jQuery(book[0]),DEARPDF.hashFocusBookFound=!0,null!=(page=parseInt(page,10))&&book.data("page",page),null!=book.data("lightbox")&&book.trigger("click"),book.data("hash_focused",!0))}}))},utils.focusHash=function(element){var _element$0$scrollInto,_element$;!0===element.data("hash_focused")&&(null===(_element$0$scrollInto=(_element$=element[0]).scrollIntoView)||void 0===_element$0$scrollInto||_element$0$scrollInto.call(_element$,{behavior:"smooth",block:"end",inline:"nearest"}))},utils.contain=function(imageWidth,imageHeight,areaWidth,areaHeight){var imageRatio=imageWidth/imageHeight;return imageRatio>=areaWidth/areaHeight?{width:areaWidth,height:areaWidth/imageRatio}:{width:areaHeight*imageRatio,height:areaHeight}},utils.containScale=function(imageWidth,imageHeight,areaWidth,areaHeight){var dimen=utils.contain(imageWidth,imageHeight,areaWidth,areaHeight);return dimen.width/dimen.height},utils.fallbackOptions=function(options){return void 0===options.share.mail&&(options.share.mail="mailto:?subject="+options.text.mailSubject+"&body="+options.text.mailBody),options.openPage&&(options.openPage=parseInt(options.openPage,10)),options};utils.getOptions=function(element){var optionVar=(element=jQuery(element)).data("option"),options=null==optionVar||""===optionVar||null==window[optionVar]?{}:window[optionVar],attrOptions=function(element){var attrOptions={},attrSource=element.data("source");return attrOptions.source=null==attrSource||""===attrSource?void 0:attrSource,attrOptions.id=element.attr("id"),null==attrOptions.openPage&&(attrOptions.openPage=element.data("page")),attrOptions}(element);return options=jQuery.extend(!0,{},options,attrOptions)},utils.sanitizeOptions=function(options){return options.paddingLeft=parseInt(options.paddingLeft,10),options.paddingRight=parseInt(options.paddingRight,10),options.paddingTop=parseInt(options.paddingTop,10),options.paddingBottom=parseInt(options.paddingBottom,10),options.duration=parseInt(options.duration,10),options.rangeChunkSize=parseInt(options.rangeChunkSize,10),options.maxTextureSize=parseInt(options.maxTextureSize,10),options},utils.urlify=function(text){return text.replace(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[.\!\/\\w]*))?)/g,(function(url,b,c,d,e){var url2=url=url.toLowerCase();if(url.indexOf(":")>0&&-1===url.indexOf("http:")&&-1===url.indexOf("https:"))return utils.log("AutoLink Rejected: "+url2+" for "+url),url;if(0===url.indexOf("www."))url2="http://"+url;else if(0===url.indexOf("http://")||0===url.indexOf("https://"));else if(0===url.indexOf("mailto:"));else if(url.indexOf("@")>0){url2="mailto:"+url;if(null===url.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/))return utils.log("AutoLink Rejected: "+url2+" for "+url),url}return utils.log("AutoLink: "+url2+" for "+url),'<a href="'+url2+'" class="dp-autolink" target="_blank">'+url+"</a>"}))},DEARPDF.parseCSSElements=function(){jQuery(".dpcss").each((function(){var data,el=jQuery(this),cssData=function(el){for(var className,classList=el.classList,i=0;i<classList.length;i++)if(0===(className=classList[i]).indexOf("dpcss_e_"))return className;return null}(el[0]);el.removeClass(cssData).removeClass("dpcss"),cssData=cssData.replace("dpcss_e_","");try{data=JSON.parse(atob(cssData))}catch(e){}if(data){var option_id="dp_option_"+data.id;window[option_id]=jQuery.extend(!0,{},window[option_id],data),el.addClass("dp-element"),"none"!==data.lightbox&&(el.attr("data-lightbox",void 0===data.lightbox?"custom":data.lightbox),"thumb"==data.lightbox&&el.attr("data-thumb",data.pdfThumb),data.thumbLayout&&el.attr("data-thumb-layout",data.thumbLayout),data.apfl&&el.attr("apfl",data.apfl)),el.data("option",option_id),el.attr("data-slug",data.slug),el.attr("id","dp_"+data.id)}}))},DEARPDF.parseNormalElements=function(){jQuery(".dp-element").each((function(){var app=jQuery(this);if("true"!==app.data("parsed")){app.data("parsed","true");var lightboxType=app.data("lightbox");if(void 0===lightboxType)app.dearpdf();else if("thumb"===lightboxType){var thumbLayout=app.data("thumb-layout")||DEARPDF.defaults.thumbLayout,thumbURL=utils.httpsCorrection(app.data("thumb"));app.removeAttr("data-thumb").removeAttr("data-thumb-layout");var innerText=app.html().trim();if("custom"!==thumbLayout){app.html("");var title=jQuery("<span class='dp-book-title'>").html(innerText),wrapper=jQuery("<div class='dp-book-wrapper'>").appendTo(app),cover=jQuery("<div class='dp-book-cover'>").append(title).appendTo(wrapper);if(null!=thumbURL&&""!==thumbURL.toString().trim()){var image=jQuery('<img src="'+thumbURL+'" alt="'+innerText+'"/>');cover.append(image)}else cover.addClass("dp-thumb-not-found");"book-title-bottom"===thumbLayout&&title.appendTo(wrapper),"cover-title"===thumbLayout&&title.appendTo(wrapper)}"book-title-hover"!=thumbLayout&&app.addClass("dp-tl-"+thumbLayout)}}}))},DEARPDF.parseElements=utils.parseElements=function(){DEARPDF.parseCSSElements(),DEARPDF.parseNormalElements()},DEARPDF.initUtils=function(){void 0!==window.dearpdfWPGlobal&&jQuery.extend(!0,DEARPDF.defaults,window.dearpdfWPGlobal),utils.detectScriptLocation();var body=jQuery("body");(utils.isSafari||utils.isIOS)&&body.addClass("dp-ios"),body.on("click",(function(){}))}},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FlipBook3D}));var _flipbook_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_page_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var DP=window.DEARPDF,utils=DP.utils,BookSheet3D=function(_BookSheet){_inherits(BookSheet3D,_BookSheet);var _super=_createSuper(BookSheet3D);function BookSheet3D(options){var _this;return _classCallCheck(this,BookSheet3D),(_this=_super.call(this,options)).flexibility=options.flexibility,_this.sheetAngle=180,_this.curveAngle=0,_this.parent3D=options.parent3D,_this.segments=options.segments||50,_this.width=options.width||100,_this.height=options.height||100,_this.depth=options.depth||.5,_this.init(),_this}return _createClass(BookSheet3D,[{key:"init",value:function(){this.element=new MOCKUP.Paper({parent3D:this.parent3D,segments:this.segments,depth:this.depth,height:this.height,width:this.width,flatShading:0===this.flexibility}),this.frontPage=new Page3D({sheet:this,face:5}),this.backPage=new Page3D({sheet:this,face:4}),this.reset(),this.updateAngle()}},{key:"frontImage",value:function(texture,callback){this.element.frontImage(texture,callback)}},{key:"backImage",value:function(texture,callback){this.element.backImage(texture,callback)}},{key:"updateAngle",value:function(){if(void 0!==this.viewer&&null!==this.viewer){var flexibility=!0===this.isHard?0:this.flexibility,width=this.width*(1-Math.sin(flexibility/2*(flexibility/2))/2)-this.width*flexibility/20;this.element.scale.y=this.height/this.element.geometry.parameters.height;var segments=this.segments,foldWidth=width/1,curveHandlePoint=foldWidth*flexibility,curveWidth=foldWidth,curvesFront=[],curvesBack=[],verticesFront=[],verticesBack=[],pointsFront=[],pointsBack=[],sheetDepth=this.depth,sum=0,distances=[];distances.push(sum),pointsFront[0]=[],pointsBack[0]=[];var sheetAngle=this.sheetAngle*Math.PI/180,curveAngle=!0===this.isHard?sheetAngle:this.curveAngle*Math.PI/180,pointAngle=this.sheetAngle*Math.PI/180,pointAngleB=pointAngle-Math.PI/2,zShift=Math.sin(pointAngleB)*sheetDepth/2;pointsFront[0][0]=pointsFront[0][1]=new THREE.Vector3(-curveWidth*Math.cos(sheetAngle),0,Math.sin(sheetAngle)*curveWidth-zShift),pointsBack[0][0]=pointsBack[0][1]=new THREE.Vector3(pointsFront[0][0].x-Math.cos(pointAngleB)*sheetDepth,0,pointsFront[0][0].z+2*zShift),pointsFront[0][1]=new THREE.Vector3(-curveWidth/2*Math.cos(curveAngle),0,curveWidth/2*Math.sin(curveAngle)-zShift),pointsBack[0][1]=new THREE.Vector3(pointsFront[0][1].x-Math.cos(pointAngleB)*sheetDepth,0,pointsFront[0][1].z+2*zShift),pointAngle=(45+this.sheetAngle/2)*Math.PI/180,pointsFront[0][2]=new THREE.Vector3(-Math.cos(pointAngle)*curveHandlePoint/2,0,Math.sin(pointAngle)*curveHandlePoint-zShift),pointsBack[0][2]=new THREE.Vector3(pointsFront[0][2].x+Math.cos(pointAngleB)*sheetDepth,0,pointsFront[0][2].z+2*zShift),Math.abs(pointsBack[0][2].x-0)<5e-4&&(pointsBack[0][2].x=0),pointsFront[0][3]=new THREE.Vector3(0,0,-zShift),pointsBack[0][3]=new THREE.Vector3(pointsFront[0][3].x-Math.cos(pointAngleB)*sheetDepth,0,pointsFront[0][3].z+2*zShift),Math.abs(pointsBack[0][3].x-0)<5e-4&&(pointsBack[0][3].x=0);for(var curveCount=0;curveCount<1;curveCount++){var length=Math.max(this.segments-1,1);curvesFront[curveCount]=new THREE.CubicBezierCurve3(pointsFront[curveCount][0],pointsFront[curveCount][1],pointsFront[curveCount][2],pointsFront[curveCount][3]),verticesFront[curveCount]=curvesFront[curveCount].getPoints(length),length>2&&verticesFront[curveCount].push((new THREE.Vector3).copy(verticesFront[curveCount][length]));for(var current=void 0,last=verticesFront[curveCount][0],vcount=1;vcount<verticesFront[curveCount].length;vcount++)sum+=(current=verticesFront[curveCount][vcount]).distanceTo(last),distances.push(sum),last=current;curvesBack[curveCount]=new THREE.CubicBezierCurve3(pointsBack[curveCount][0],pointsBack[curveCount][1],pointsBack[curveCount][2],pointsBack[curveCount][3]),verticesBack[curveCount]=curvesBack[curveCount].getPoints(length),length>2&&verticesBack[curveCount].push((new THREE.Vector3).copy(verticesBack[curveCount][length]))}var bodyG=this.element.geometry,verts=bodyG.vertices,rowVertices=segments-1,offset=8;verts[0].z=verts[2].z=verticesFront[0][segments].z,verts[0].x=verts[2].x=verticesFront[0][segments].x,verts[1].z=verts[3].z=verticesBack[0][segments].z,verts[1].x=verts[3].x=verticesBack[0][segments].x,verts[5].z=verts[7].z=verticesFront[0][0].z,verts[5].x=verts[7].x=verticesFront[0][0].x,verts[4].z=verts[6].z=verticesBack[0][0].z,verts[4].x=verts[6].x=verticesBack[0][0].x;for(var fold=0;fold<1;fold++)for(var count=1;count<segments;count++)verts[offset].z=verts[offset+3*rowVertices].z=verticesBack[0][count].z,verts[offset].x=verts[offset+3*rowVertices].x=verticesBack[0][count].x,verts[offset+rowVertices].z=verts[offset+2*rowVertices].z=verticesFront[0][count].z,verts[offset+rowVertices].x=verts[offset+2*rowVertices].x=verticesFront[0][count].x,offset++;for(var uvs=bodyG.faceVertexUvs[0],faces=bodyG.faces,uvIndexFront=0,_count=0;_count<uvs.length;_count++)if(faces[_count].materialIndex===MOCKUP.MATERIAL_FACE.BACK){var dist=distances[uvIndexFront]/sum;_count%2==0?(uvs[_count][0].x=uvs[_count][1].x=uvs[_count+1][0].x=dist,uvIndexFront++):uvs[_count-1][2].x=uvs[_count][1].x=uvs[_count][2].x=dist}else if(faces[_count].materialIndex===MOCKUP.MATERIAL_FACE.FRONT){var _dist=1-distances[uvIndexFront]/sum;_count%2==0?(uvs[_count][0].x=uvs[_count][1].x=uvs[_count+1][0].x=_dist,uvIndexFront--):uvs[_count-1][2].x=uvs[_count][1].x=uvs[_count][2].x=_dist}bodyG.computeBoundingBox(),this.element.scale.x=1*curveWidth/sum,bodyG.computeBoundingSphere(),bodyG.verticesNeedUpdate=!0,bodyG.computeFaceNormals(),bodyG.computeVertexNormals(),bodyG.uvsNeedUpdate=!0,bodyG.normalsNeedUpdate=!0,curvesFront.forEach((function(curveF){null})),curvesBack.forEach((function(curveB){null})),verticesBack.forEach((function(vertexB){null})),verticesFront.forEach((function(vertexF){null}))}}},{key:"flip",value:function(oldAngle,newAngle){var sheet=this,isBooklet=sheet.viewer.isBooklet,diff=newAngle-oldAngle,isRight=oldAngle>90,isRTL=sheet.viewer.isRTL,pageNumber=isRight?sheet.backPage.pageNumber:sheet.frontPage.pageNumber,viewport=this.viewer.getViewPort(pageNumber);viewport&&(viewport=utils.contain(viewport.width,viewport.height,sheet.viewer.availablePageWidth(),sheet.viewer.availablePageHeight()));var coverAdjustment=-(sheet.viewer.has3DCover&&sheet.viewer.isClosedPage()?sheet.viewer.coverExtraWidth:0);sheet.init={angle:oldAngle,angle2:isRight?180:0,height:isRight?sheet.viewer.rightSheetHeight:sheet.viewer.leftSheetHeight,width:isRight?sheet.viewer.rightSheetWidth:sheet.viewer.leftSheetWidth,index:isRight&&!isRTL||!isRight&&isRTL?1:0,_index:0},sheet.first={angle:oldAngle+diff/4,angle2:90,index:isRight&&!isRTL||!isRight&&isRTL?1:.25},sheet.mid={angle:oldAngle+2*diff/4,angle2:isRight?45:135,index:.5},sheet.mid2={angle:oldAngle+3*diff/4,angle2:isRight?0:180,index:isRight&&!isRTL||!isRight&&isRTL?.25:1},sheet.end={angle:newAngle,angle2:isRight?0:180,index:isRight&&!isRTL||!isRight&&isRTL?0:1,height:2*coverAdjustment+(viewport?viewport.height:sheet.height),width:coverAdjustment+(viewport?viewport.width:sheet.width)},sheet.isFlipping=!0;isBooklet&&(!isRight&&!isRTL||isRight&&isRTL)&&(sheet.element.material[5].opacity=sheet.element.material[4].opacity=0,sheet.element.castShadow=!1),sheet.tween=new TWEEN.Tween(sheet.init).to({angle:[sheet.first.angle,sheet.mid.angle,sheet.mid2.angle,sheet.end.angle],angle2:[sheet.first.angle2,sheet.mid.angle2,sheet.mid2.angle2,sheet.end.angle2],index:[sheet.first.index,sheet.mid.index,sheet.mid2.index,sheet.end.index],_index:1,height:sheet.end.height,width:sheet.end.width},sheet.viewer.app.options.duration).onUpdate((function(event){var tween;tween=this,sheet.sheetAngle=tween.angle,sheet.curveAngle=sheet.isHard?tween.angle:tween.angle2,!0===sheet.isHard?(sheet.flexibility=0,sheet.isCover&&sheet.viewer.flipCover(sheet)):sheet.flexibility=tween.angle<90?sheet.leftFlexibility:sheet.rightFlexibility,sheet.element.position.z=(tween.angle<90?sheet.leftPos:sheet.rightPos)+sheet.depth,isBooklet&&(sheet.element.material[5].opacity=sheet.element.material[4].opacity=tween.index,sheet.element.castShadow=tween.index>.5),sheet.height=tween.height,sheet.width=tween.width,sheet.updateAngle(!0)})).easing(TWEEN.Easing.Sinusoidal.Out).onStop((function(){sheet.tween=null,sheet.isFlipping=!1,sheet.isCover&&(sheet.viewer.leftCover.isFlipping=!1,sheet.viewer.rightCover.isFlipping=!1),sheet.element.material[5].opacity=sheet.element.material[4].opacity=1})).onComplete((function(){sheet.updateAngle(),sheet.element.material[5].opacity=sheet.element.material[4].opacity=1,sheet.element.castShadow=!0,sheet.isFlipping=!1,sheet.isCover&&(sheet.viewer.leftCover.isFlipping=!1,sheet.viewer.rightCover.isFlipping=!1),sheet.side=sheet.targetSide,sheet.viewer.afterFlip(),sheet.tween=null,sheet.viewer&&sheet.viewer.requestRefresh&&sheet.viewer.requestRefresh()})).start()}}]),BookSheet3D}(_flipbook_js__WEBPACK_IMPORTED_MODULE_0__.b),FlipBook3D=function(_BaseFlipBookViewer){_inherits(FlipBook3D,_BaseFlipBookViewer);var _super2=_createSuper(FlipBook3D);function FlipBook3D(options,appContext){var _options$flexibility,_options$texturePower,_this2;return _classCallCheck(this,FlipBook3D),options.viewerClass="dp-flipbook-3d",(_this2=_super2.call(this,options,appContext)).flexibility=utils.limitAt(null!==(_options$flexibility=options.flexibility)&&void 0!==_options$flexibility?_options$flexibility:.9,0,10),_this2.drag3D=!1,_this2.texturePowerOfTwo=null===(_options$texturePower=options.texturePowerOfTwo)||void 0===_options$texturePower||_options$texturePower,_this2.initMOCKUP((function(){appContext._viewerPrepared()})),_this2}return _createClass(FlipBook3D,[{key:"initMOCKUP",value:function(callback){var app=this.app;"undefined"==typeof THREE?(app.updateInfo(app.options.text.loading+" WEBGL 3D ..."),"function"==typeof define&&__webpack_require__(6)&&window.requirejs?(window.requirejs.config({paths:{three:app.options.threejsSrc.replace(".js","")},shim:{three:{exports:"THREE"}}}),window.require(["three"],(function(THREE){return window.THREE=THREE,MOCKUP.init(),"function"==typeof callback&&callback(),THREE}))):"function"==typeof define&&__webpack_require__(6)?window.require(["three",app.options.threejsSrc.replace(".js","")],(function(ready){ready((function(){MOCKUP.init(),"function"==typeof callback&&callback()}))})):utils.getScript(app.options.threejsSrc+"?ver="+DP.version,(function(){MOCKUP.init(),"function"==typeof callback&&callback()}),(function(){app.updateInfo("Unable to load THREE.js...")}))):(MOCKUP.init(),"function"==typeof callback&&callback())}},{key:"init",value:function(){var app=this.app;_get(_getPrototypeOf(FlipBook3D.prototype),"init",this).call(this);app.provider.coverPage.pageRatio;this.pageScaleX=1,this.initDepth(),this.initStage(),this.initPages(),this.initEvents(),this.render()}},{key:"updatePageMode",value:function(){_get(_getPrototypeOf(FlipBook3D.prototype),"updatePageMode",this).call(this);var app=this.app;this.has3DCover=app.options.has3DCover&&app.pageCount>7&&!this.isBooklet,this.has3DCover&&"none"===app.options.flipbookHardPages&&(app.options.flipbookHardPages="cover")}},{key:"initDepth",value:function(){var _this$app$options$she,_this$app$options$she2;this.sheetDepth=this.pageScaleX*(null!==(_this$app$options$she=this.app.options.sheetDepth)&&void 0!==_this$app$options$she?_this$app$options$she:.5),this.sheetSegments=null!==(_this$app$options$she2=this.app.options.sheetSegments)&&void 0!==_this$app$options$she2?_this$app$options$she2:20,this.coverDepth=2*this.sheetDepth,this.sheetsDepth=Math.min(20,this.app.pageCount/4)*this.sheetDepth}},{key:"initStage",value:function(){var stage=this.stage=new MOCKUP.Stage({pixelRatio:window.devicePixelRatio});(stage.canvas=jQuery(stage.renderer.domElement).addClass("dp-3dcanvas")).appendTo(this.element),stage.camera.position.set(0,20,600),stage.camera.lookAt(new THREE.Vector3(0,0,0)),this.camera=stage.camera,stage.spotLight.position.set(-220,220,550),stage.spotLight.castShadow=!utils.isMobile&&this.app.options.has3DShadow,stage.spotLight.shadow&&(stage.spotLight.shadow.bias=-8e-4),stage.spotLight.intensity=.22,stage.ambientLight.color=new THREE.Color("#fff"),stage.ambientLight.intensity=.8;var material=new THREE.ShadowMaterial;material.opacity=this.app.options.shadowOpacity,stage.ground.oldMaterial=stage.ground.material,stage.ground.material=material,stage.ground.position.z=this.has3DCover?-6:-4,stage.orbitControl.maxAzimuthAngle=0,stage.orbitControl.minAzimuthAngle=0,stage.orbitControl.minPolarAngle=Math.PI/2,stage.orbitControl.maxPolarAngle=2.2,stage.orbitControl.mouseButtons.ORBIT=THREE.MOUSE.RIGHT,stage.orbitControl.mouseButtons.PAN=-1,stage.orbitControl.noPan=!0,stage.orbitControl.maxDistance=7e3,stage.orbitControl.minDistance=50,stage.orbitControl.noZoom=!0,stage.selectiveRendering=!0,stage.orbitControl.zoomSpeed=5,stage.orbitControl.keyPanSpeed=0,stage.orbitControl.center.set(0,0,0),stage.orbitControl.update();var cssRenderer=stage.cssRenderer=new THREE.CSS3DRenderer;jQuery(cssRenderer.domElement).css({position:"absolute",top:0,pointerEvents:"none"}).addClass("dp-3dcanvas dp-csscanvas"),this.element[0].appendChild(cssRenderer.domElement),stage.cssScene=new THREE.Scene,this.wrapper.remove(),this.wrapper=new THREE.Group,this.stage.add(this.wrapper),this.wrapper.add(stage.ground),this.app.renderRequestStatus=DP.REQUEST_STATUS.ON}},{key:"initPages",value:function(){for(var _this$app$options$col,_this$app$options$col2,options={parent3D:this.wrapper,viewer:this,segments:this.sheetSegments,depth:this.sheetDepth,flexibility:this.flexibility},count=0;count<6;count++){var sheet=new BookSheet3D(options);sheet.index=count,sheet.viewer=this,this.sheets.push(sheet),this.pages.push(sheet.frontPage),this.pages.push(sheet.backPage),this.stage.cssScene.add(sheet.frontPage.cssPage),this.stage.cssScene.add(sheet.backPage.cssPage)}options.depth=this.sheetsDepth,options.segments=1,options.flexibility=0,this.leftSheets=new BookSheet3D(options),this.rightSheets=new BookSheet3D(options),this.setMatColor(this.leftSheets,null!==(_this$app$options$col=this.app.options.color3DSheets)&&void 0!==_this$app$options$col?_this$app$options$col:"white"),this.setMatColor(this.rightSheets,null!==(_this$app$options$col2=this.app.options.color3DSheets)&&void 0!==_this$app$options$col2?_this$app$options$col2:"white"),options.depth=this.coverDepth,this.leftCover=new BookSheet3D(options),this.rightCover=new BookSheet3D(options),this.leftCover.isHard=!0,this.rightCover.isHard=!0,this.setcolor3DCover(this.app.options.color3DCover),this.stage.cssScene.add(this.leftCover.frontPage.cssPage),this.stage.cssScene.add(this.rightCover.backPage.cssPage)}},{key:"setcolor3DCover",value:function(val){this.setMatColor(this.leftCover,val),this.setMatColor(this.rightCover,val),this.leftCover.element.material[5].color=new THREE.Color("white"),this.rightCover.element.material[4].color=new THREE.Color("white"),this.app.renderRequestStatus=DEARPDF.REQUEST_STATUS.ON}},{key:"setMatColor",value:function(sheet,val){for(var color=new THREE.Color(val),i=0;i<6;i++)sheet.element.material[i].color=color}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],_get(_getPrototypeOf(FlipBook3D.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){_get(_getPrototypeOf(FlipBook3D.prototype),"dispose",this).call(this);this.stage&&(this.stage.clearChild(),this.stage.cssRenderer.domElement.parentNode.removeChild(this.stage.cssRenderer.domElement),this.stage.cssRenderer=null,this.stage.orbitControl=utils.disposeObject(this.stage.orbitControl),this.stage.renderer=utils.disposeObject(this.stage.renderer),jQuery(this.stage.canvas).remove(),this.stage.canvas=null,this.stage=utils.disposeObject(this.stage)),this.centerTween&&this.centerTween.stop&&this.centerTween.stop()}},{key:"render",value:function(){this.stage.render(),this.stage.cssRenderer.render(this.stage.cssScene,this.stage.camera)}},{key:"resize",value:function(){_get(_getPrototypeOf(FlipBook3D.prototype),"resize",this).call(this);var viewer=this,app=viewer.app,stage=viewer.stage,dimensions=app.dimensions,padding=dimensions.padding;viewer.isSingle,this.availablePageWidth(),this.availablePageHeight();void 0===this.rightSheetHeight&&(this.rightSheetHeight=this._containCover.height,this.leftSheetHeight=this._containCover.height,this.leftSheetWidth=this._containCover.width,this.rightSheetWidth=this._containCover.width),stage.resizeCanvas(dimensions.stage.width,dimensions.stage.height),stage.cssRenderer.setSize(dimensions.stage.width,dimensions.stage.height);var cameraZ=1/(2*Math.tan(Math.PI*stage.camera.fov*.5/180)/(dimensions.stage.height/app.zoomValue))+2.2;this.pageScaleX=Math.max(Math.max(this._containCover.height,this._containCover.width)/400,1),this.initDepth(),this.sheets.forEach((function(sheet){sheet.depth=viewer.sheetDepth})),this.updateShadowSize(),this.stage.spotLight.position.x=220*-this.pageScaleX,this.stage.spotLight.position.y=330*this.pageScaleX,this.stage.spotLight.position.z=660*this.pageScaleX,this.stage.spotLight.shadow.camera.far=1200*this.pageScaleX,this.stage.spotLight.shadow.camera.updateProjectionMatrix(),stage.camera.updateProjectionMatrix();var shiftY=(padding.top-padding.bottom)/app.zoomValue/2,shiftX=-(padding.left-padding.right)/app.zoomValue/2;stage.camera.position.z!==cameraZ&&!0===app.pendingZoom&&(stage.camera.position.z=cameraZ),1===app.zoomValue&&(stage.camera.position.set(shiftX,shiftY,cameraZ),stage.orbitControl.target=new THREE.Vector3(shiftX,shiftY,0)),stage.orbitControl.update(),app.refreshRequestStart();var ref=this.refSize=Math.max(this._containCover.width,this._containCover.height);this.coverExtraWidth=.02*ref,stage.orbitControl.mouseButtons.ORBIT=1!==app.zoomValue?-1:THREE.MOUSE.RIGHT,stage.orbitControl.mouseButtons.PAN=1!==app.zoomValue?THREE.MOUSE.LEFT:-1,viewer.app.renderRequestStatus=DP.REQUEST_STATUS.ON,viewer.zoomViewer.resize(),viewer.centerNeedsUpdate=!0,viewer.checkCenter(!0),viewer.pagesReady()}},{key:"updateShadowSize",value:function(){}},{key:"refresh",value:function(){var app=this.app,basePage=this.getBasePage(),ratio=1/app.pageCount*basePage,leftWeight=this.isRTL?1-ratio:ratio,rightWeight=1-leftWeight,minSheetStack=Math.min(this.stackCount,this.totalSheets),maxSheetStack=utils.limitAt(this.totalSheets,this.stackCount,2*this.stackCount),flexibilityFactor=(Math.max(leftWeight,rightWeight),this.isBooklet?0:this.flexibility/maxSheetStack);this.leftFlexibility=flexibilityFactor*rightWeight,this.rightFlexibility=flexibilityFactor*leftWeight,this.midPosition=.5*minSheetStack*this.sheetDepth,_get(_getPrototypeOf(FlipBook3D.prototype),"refresh",this).call(this);var displayCover=!0===this.has3DCover;if(this.leftCover.element.visible=this.rightCover.element.visible=this.leftSheets.element.visible=this.rightSheets.element.visible=displayCover,this.wrapper.position.z=-this.midPosition,displayCover){var depthLeft=0,depthRight=0,isRTL=this.isRTL,isFrontPage=this.isFirstPage(),isLastPage=this.isLastPage();this.leftSheets.depth=isRTL?this.sheetsDepth*(1-this.getBasePage()/app.pageCount):this.sheetsDepth*basePage/app.pageCount,this.leftSheets.element.visible=isRTL?app.pageCount-this.getBasePage()>2:basePage>2,depthLeft-=this.leftSheets.depth/2,this.leftSheets.element.position.z=depthLeft,depthLeft-=this.coverDepth+(this.leftSheets.element.visible?this.leftSheets.depth/2:0)+3*this.coverDepth,this.leftCover.depth=this.rightCover.depth=this.coverDepth;var isLeftClosed=this.isClosedPage()&&(isRTL&&isLastPage||!isRTL&&isFrontPage),isRightClosed=this.isClosedPage()&&(!isRTL&&isLastPage||isRTL&&isFrontPage);!0!==this.leftCover.isFlipping&&(this.leftCover.element.position.z=isLeftClosed?this.midPosition+this.coverDepth:depthLeft+this.coverDepth/2,this.leftCover.element.position.x=0,this.leftSheets.sheetAngle=this.leftCover.sheetAngle=isLeftClosed?180:0,this.leftSheets.curveAngle=this.leftCover.curveAngle=isLeftClosed?180:0,this.leftSheets.updateAngle(),this.leftCover.updateAngle()),this.rightSheets.depth=this.sheetsDepth-this.leftSheets.depth,this.rightSheets.element.visible=isRTL?basePage>2:app.pageCount-this.getBasePage()>2,depthRight-=this.rightSheets.depth/2,this.rightSheets.element.position.z=depthRight,depthRight-=this.coverDepth+(this.rightSheets.element.visible?this.rightSheets.depth/2:0)+3*this.coverDepth,!0!==this.rightCover.isFlipping&&(this.rightCover.element.position.z=isRightClosed?this.midPosition+this.coverDepth:depthRight+this.coverDepth/2,this.rightCover.element.position.x=0,this.rightSheets.sheetAngle=this.rightCover.sheetAngle=isRightClosed?0:180,this.rightSheets.curveAngle=this.rightCover.curveAngle=isRightClosed?0:180,this.rightSheets.updateAngle(),this.rightCover.updateAngle()),this.stage.ground.position.z=Math.min(depthLeft,depthRight)-5*this.coverDepth}else this.stage.ground.position.z=-this.midPosition-15*this.sheetDepth}},{key:"refreshSheet",value:function(options){var newAngle,_sheet=options.sheet,_sheetStackIndex=options.index,oldAngle=_sheet.sheetAngle,isFlexible=!(_sheet.isHard||0===this.flexibility);_sheet.leftFlexibility=isFlexible?this.leftFlexibility:0,_sheet.rightFlexibility=isFlexible?this.rightFlexibility:0,_sheet.leftPos=this.midPosition+(_sheetStackIndex-options.midPoint+1)*this.sheetDepth-this.sheetDepth/2,_sheet.rightPos=this.midPosition-(_sheetStackIndex-options.midPoint)*this.sheetDepth-this.sheetDepth/2,newAngle=_sheet.targetSide===DEARPDF.TURN_DIRECTION.LEFT?0:180,!1===_sheet.isFlipping&&(options.needsFlip?(_sheet.isFlipping=!0,_sheet.isCover&&0===options.sheetNumber&&(this.isRTL?this.rightCover.isFlipping=!0:this.leftCover.isFlipping=!0),_sheet.isCover&&this.totalSheets-options.sheetNumber==1&&(this.isRTL?this.leftCover.isFlipping=!0:this.rightCover.isFlipping=!0),_sheet.element.position.z=Math.max(oldAngle<90?_sheet.leftPos:_sheet.rightPos,this.midPosition)+this.sheetDepth,this.beforeFlip(),_sheet.flexibility=oldAngle<90?_sheet.leftFlexibility:_sheet.rightFlexibility,_sheet.flip(oldAngle,newAngle)):(_sheet.skipFlip=!1,_sheet.sheetAngle=_sheet.curveAngle=newAngle,_sheet.flexibility=newAngle<90?_sheet.leftFlexibility:_sheet.rightFlexibility,_sheet.element.position.z=newAngle<90?_sheet.leftPos:_sheet.rightPos,_sheet.side=_sheet.targetSide,_sheet.height=newAngle<90?this.leftSheetHeight:this.rightSheetHeight,_sheet.width=newAngle<90?this.leftSheetWidth:this.rightSheetWidth),_sheet.updateAngle(),this.app.renderRequestStatus=DP.REQUEST_STATUS.ON),_sheet.element.visible=options.visible}},{key:"updateCenter",value:function(){var viewer=this,app=this.app,init=viewer.wrapper.position.x,end=viewer.centerShift*(this.isLeftPage()?this.leftSheetWidth:this.rightSheetWidth)/2;viewer.seamPosition=(-app.dimensions.offset.width+app.dimensions.containerWidth)/2+end,end!==viewer.centerEnd&&(viewer.centerTween&&viewer.centerTween.stop&&viewer.centerTween.stop(),viewer.onCenterStartAnimation(this),viewer.centerTween=new TWEEN.Tween({x:init}).delay(0).to({x:end},1===app.zoomValue&&!0!==viewer.skipCenterAnimation?viewer.app.options.duration:1).onStart((function(){})).onUpdate((function(){viewer.onCenterUpdateAnimation(this)})).onComplete((function(){viewer.onCenterCompleteAnimation(this)})).onStop((function(){viewer.onCenterStopAnimation(this)})).easing(TWEEN.Easing.Cubic.InOut).start(),this.updatePendingStatusClass(),viewer.skipCenterAnimation=!1,viewer.centerEnd=end),viewer.renderRequestStatus=DP.REQUEST_STATUS.ON,this.zoomViewer.updateCenter()}},{key:"onCenterUpdateAnimation",value:function(tween){this.wrapper.position.x=tween.x,this.stage&&this.stage.cssScene&&(this.stage.cssScene.position.x=tween.x)}},{key:"onCenterStartAnimation",value:function(tween){}},{key:"onCenterStopAnimation",value:function(tween){}},{key:"onCenterCompleteAnimation",value:function(tween){}},{key:"flipCover",value:function(sheet){var multiplier,diff,cover=null;0===sheet.pageNumber||this.isBooklet&&1===sheet.pageNumber?(cover=this.isRTL?this.rightCover:this.leftCover,multiplier=this.isRTL?1:-1):sheet.pageNumber===this.totalSheets-1&&(cover=this.isRTL?this.leftCover:this.rightCover,multiplier=this.isRTL?-1:1),null!==cover&&(diff=cover.depth+sheet.depth+1,cover.sheetAngle=sheet.sheetAngle,cover.curveAngle=sheet.curveAngle,this.rightCover.height=this.leftCover.height=sheet.height+2*this.coverExtraWidth,this.rightCover.width=this.leftCover.width=sheet.width+this.coverExtraWidth,cover.flexibility=sheet.flexibility,cover.element.position.x=multiplier*Math.sin(sheet.sheetAngle*Math.PI/180)*diff,cover.element.position.z=sheet.element.position.z+multiplier*Math.cos(sheet.sheetAngle*Math.PI/180)*diff,this.rightCover.updateAngle(),this.leftCover.updateAngle())}},{key:"pagesReady",value:function(){if(!this.isAnimating()){if(!1===this.app.options.flipbookFitPages){var basePage=this.app.viewer.getBasePage(),leftViewPort=this.leftViewport=this.getViewPort(basePage+(this.isBooklet?0:this.isRTL?1:0)),rightViewPort=this.rightViewPort=this.getViewPort(basePage+(this.isBooklet||this.isRTL?0:1));if(leftViewPort){var leftDimen=utils.contain(100*leftViewPort.width,100*leftViewPort.height,this.availablePageWidth(),this.availablePageHeight());this.leftSheetWidth=Math.floor(leftDimen.width),this.leftSheetHeight=Math.floor(leftDimen.height)}if(rightViewPort){var rightDimen=utils.contain(100*rightViewPort.width,100*rightViewPort.height,this.availablePageWidth(),this.availablePageHeight());this.rightSheetWidth=Math.floor(rightDimen.width),this.rightSheetHeight=Math.floor(rightDimen.height)}for(var i=0;i<this.sheets.length;i++){var sheet=this.sheets[i];sheet.side===DP.TURN_DIRECTION.LEFT?(sheet.height=this.leftSheetHeight,sheet.width=this.leftSheetWidth,sheet.updateAngle()):(sheet.height=this.rightSheetHeight,sheet.width=this.rightSheetWidth,sheet.updateAngle())}if(this.isClosedPage()){var isClosedOnRight=this.isRTL&&this.isLastPage()||!this.isRTL&&this.isFirstPage();this.leftCover.width=this.rightCover.width=isClosedOnRight?this.rightSheetWidth:this.leftSheetWidth,this.leftCover.height=this.rightCover.height=isClosedOnRight?this.rightSheetHeight:this.leftSheetHeight}else this.leftCover.height=this.rightCover.height=2*this.coverExtraWidth+Math.max(this.leftSheetHeight,this.rightSheetHeight),this.leftCover.width=this.coverExtraWidth+this.leftSheetWidth,this.rightCover.width=this.coverExtraWidth+this.rightSheetWidth;this.leftSheets.width=this.leftSheetWidth,this.leftSheets.height=this.leftSheetHeight,this.rightSheets.height=this.rightSheetHeight,this.rightSheets.width=this.rightSheetWidth,this.leftCover.updateAngle(),this.leftSheets.updateAngle(),this.rightCover.updateAngle(),this.rightSheets.updateAngle()}this.updateCenter(),this.updateCSSLayer(),this.updatePendingStatusClass()}}},{key:"updateCSSLayer",value:function(){var width,baseActive=this.getBasePage(),leftPageNumber=baseActive+(this.isBooklet?0:this.isRTL?1:0),rightPageNumber=baseActive+(this.isBooklet||this.isRTL?0:1),pageLeft=!this.isRTL&&this.isBooklet?void 0:this.getPageByNumber(leftPageNumber),pageRight=this.isRTL&&this.isBooklet?void 0:this.getPageByNumber(rightPageNumber);if(jQuery(this.stage.cssRenderer.domElement).find(".dp-page-content").css({display:"none"}),this.leftViewport&&null!=pageLeft&&pageLeft.sheet.element.visible){var divLeft=pageLeft.cssPage;if(null!=divLeft){var boundLeft=pageLeft.sheet.element.geometry.boundingBox;width=Math.abs(boundLeft.max.x-boundLeft.min.x)*pageLeft.sheet.element.scale.x,divLeft.rotation.y=0,divLeft.position.z=0,divLeft.position.x=0,jQuery(divLeft.element).css({width:width,height:pageLeft.sheet.height,left:-width/2,display:"block"}),this.resizeAnnotations(leftPageNumber)}}if(this.rightViewPort&&null!=pageRight&&pageRight.sheet.element.visible){var divRight=pageRight.cssPage;if(null!=divRight){var boundRight=pageRight.sheet.element.geometry.boundingBox;width=Math.abs(boundRight.max.x-boundRight.min.x)*pageRight.sheet.element.scale.x,divRight.rotation.y=0,divRight.position.z=0,divRight.position.x=0,jQuery(divRight.element).css({width:width,height:pageRight.sheet.height,left:width/2,display:"block"}),this.resizeAnnotations(rightPageNumber)}}}},{key:"mouseMove",value:function(event){if(event=utils.fixMouseEvent(event),this.app.renderRequestStatus=DP.REQUEST_STATUS.ON,null==event.touches||2!=event.touches.length){var point=this.eventToPoint(event);if(null!==this.dragSheet&&!1!==this.drag3D){var angle=180*Math.acos(utils.limitAt(1-(point.x-point.left)/this.leftSheetWidth,-1,1))/Math.PI,sheet=this.dragSheet,isLeftPage=this.drag===DP.TURN_DIRECTION.LEFT;sheet.sheetAngle=angle;var curveAngle=isLeftPage?utils.limitAt(sheet.sheetAngle+45,0,180):utils.limitAt(sheet.sheetAngle,0,180);sheet.curveAngle=sheet.isHard?sheet.sheetAngle:curveAngle*TWEEN.Easing.Sinusoidal.Out(.8*curveAngle/180),console.log("x:"+(1-(point.x-point.left)/this.leftSheetWidth)+"angle: "+angle+" curveAngle:"+curveAngle),sheet.updateAngle()}this.checkSwipe(point,event)}else this.pinchMove(event)}},{key:"mouseUp",value:function(event){if((event=utils.fixMouseEvent(event)).touches||0===event.button)if(null==event.touches||0!=event.touches.length){var point=this.eventToPoint(event);if(1===this.app.zoomValue){null!==this.dragSheet&&(point.x>this.app.dimensions.width/2?this.drag===DP.TURN_DIRECTION.LEFT&&this.app.openLeft():this.drag===DP.TURN_DIRECTION.RIGHT&&this.app.openRight(),this.requestRefresh());var element=event.target||event.originalTarget,isClick=this.startPoint&&point.x===this.startPoint.x&&point.y===this.startPoint.y&&"A"!==element.nodeName;!0===event.ctrlKey&&isClick?this.zoomOnPoint(point):isClick&&!0===point.isInsideSheet&&this.clickAction===DP.MOUSE_CLICK_ACTIONS.NAV&&(point.isLeftSheet?this.app.openLeft():this.app.openRight())}this.dragSheet=null,this.drag=null,this.startPoint=null,this.canSwipe=!1,this.app.renderRequestStatus=DP.REQUEST_STATUS.ON}else this.pinchUp(event)}},{key:"mouseDown",value:function(event){if((event=utils.fixMouseEvent(event)).touches||0===event.button)if(null==event.touches||2!=event.touches.length){event=utils.fixMouseEvent(event);var point=this.eventToPoint(event);this.startPoint=point,this.lastPos=point.x,point.isInsideDragZone&&!1!==this.drag3D?(this.dragSheet=point.sheet,this.drag=point.sheet.sheetAngle<90?DP.TURN_DIRECTION.LEFT:DP.TURN_DIRECTION.RIGHT):this.canSwipe=!0}else this.pinchDown(event)}},{key:"eventToPoint",value:function(event){var dimensions=this.app.dimensions,point={x:(event=utils.fixMouseEvent(event)).clientX,y:event.clientY};point.x=point.x-this.parentElement[0].getBoundingClientRect().left,point.y=point.y-this.parentElement[0].getBoundingClientRect().top;var left=(-dimensions.offset.width+dimensions.containerWidth)/2-dimensions.stage.width/2,right=(-dimensions.offset.width+dimensions.containerWidth)/2+dimensions.stage.width/2,top=dimensions.padding.top,bottom=dimensions.padding.top+this.availablePageHeight(),isLeftSheet=point.x<this.seamPosition,pageNumber=this.getBasePage()+(isLeftSheet?0:1),sheet=this.getPageByNumber(pageNumber);sheet&&(sheet=sheet.sheet);var isInsideSheet=point.x>left&&point.x<right&&point.y>top&&point.y<bottom;return{isInsideSheet:isInsideSheet,isInsideDragZone:isInsideSheet&&point.x-left<this.foldSense||right-point.x<this.foldSense,x:point.x,y:point.y,left:left,top:top,right:right,bottom:bottom,raw:point,isLeftSheet:isLeftSheet,sheet:sheet}}},{key:"checkPageLoading",value:function(){for(var isLoaded=!0,pages=this.getVisiblePages().main,index=0;index<(this.isBooklet?1:2);index++){var page=this.getPageByNumber(pages[index]);page&&(isLoaded=page.textureLoaded&&isLoaded)}this.element.toggleClass("dp-loading",!isLoaded)}},{key:"textureLoadedCallback",value:function(param){this.app.renderRequestStart(),this.pagesReady()}},{key:"getTextureSize",value:function(param){var size=_get(_getPrototypeOf(FlipBook3D.prototype),"getTextureSize",this).call(this,param);if(1!==this.app.zoomValue||!0===param.isAnnotation)return size;var height=utils.nearestPowerOfTwo(size.height),width=size.width*height/size.height;return this.texturePowerOfTwo?{height:height,width:width}:size}},{key:"getPageByNumber",value:function(pageNumber){if(this.has3DCover){var isLastPage=!this.isBooklet&&pageNumber===this.app.pageCount&&pageNumber%2==0,isFirstPage=1===pageNumber;if(!this.isRTL&&isFirstPage||this.isRTL&&isLastPage)return this.leftCover.frontPage;if(!this.isRTL&&isLastPage||this.isRTL&&isFirstPage)return this.rightCover.backPage}return _get(_getPrototypeOf(FlipBook3D.prototype),"getPageByNumber",this).call(this,pageNumber)}},{key:"setPage",value:function(param){return _get(_getPrototypeOf(FlipBook3D.prototype),"setPage",this).call(this,param)}},{key:"beforeFlip",value:function(){_get(_getPrototypeOf(FlipBook3D.prototype),"beforeFlip",this).call(this)}},{key:"resizeAnnotations",value:function(pageNumber){var page=this.getPageByNumber(pageNumber),viewport=_get(_getPrototypeOf(FlipBook3D.prototype),"getViewPort",this).call(this,pageNumber);if(page&&viewport){viewport=viewport.clone({dontFlip:!0});var reqStamp=pageNumber+"|"+this.rightSheetHeight,cssPage=page.cssPage;if(cssPage.lastStamp!=reqStamp){var boundRight=page.sheet.element.geometry.boundingBox,width=Math.abs(boundRight.max.x-boundRight.min.x)*page.sheet.element.scale.x,widthX=this.getDoublePageWidthFix(pageNumber)*width/viewport.width,heightX=page.sheet.height/viewport.height,links=cssPage.element.querySelectorAll("section");links.length>0&&links.forEach((function(link){link.style.transform="matrix("+widthX+", 0, 0, "+heightX+","+viewport.transform[4]*widthX+","+viewport.transform[5]*heightX+")"})),this.app.provider.processTextContent(pageNumber,this.getTextElement(pageNumber,!0))}}}},{key:"finalizeAnnotations",value:function(element,pageNumber){_get(_getPrototypeOf(FlipBook3D.prototype),"finalizeAnnotations",this).call(this,element,pageNumber),this.resizeAnnotations(pageNumber)}}]),FlipBook3D}(_flipbook_js__WEBPACK_IMPORTED_MODULE_0__.a),Page3D=function(_Page2D){_inherits(Page3D,_Page2D);var _super3=_createSuper(Page3D);function Page3D(options){var _this3;_classCallCheck(this,Page3D);var page=_assertThisInitialized(_this3=_super3.call(this,options));return page.element=null,page.face=options.face,page.parent3D=options.sheet,page.sheet=options.sheet,page.cssPage=new THREE.CSS3DObject(page.contentLayer[0]),_this3}return _createClass(Page3D,[{key:"setLoading",value:function(){this.sheet.viewer.checkPageLoading()}},{key:"clearMap",value:function(){this.sheet.element.material[this.face].map=null,this.sheet.element.material[this.face].needsUpdate=!0}},{key:"loadTexture",value:function(param){var page=this,texture=param.texture,callback=param.callback;function completed(object,texture3D){page.updateTextureLoadStatus(!0),"function"==typeof callback&&callback(param)}page.textureSrc=texture,4===this.face?this.sheet.backImage(texture,completed):this.sheet.frontImage(texture,completed)}}]),Page3D}(_page_js__WEBPACK_IMPORTED_MODULE_1__.a),MOCKUP={init:function(){if(!0!==MOCKUP.initialized){var THREE=window.THREE;MOCKUP={init:function(){},initialized:!0,GEOMETRY_TYPE:{PLANE:0,BOX:1,MODEL:2},MATERIAL_FACE:{FRONT:5,BACK:4},defaults:{anisotropy:8,maxTextureSize:2048,groundTexture:"blank",color:16777215,shininess:15,width:210,height:297,depth:.2,segments:150,textureLoadFallback:"blank"},textureLoader:new THREE.TextureLoader,clearChild:function(child){var texture,material=child.material;if(child.parent.remove(child),child.geometry=utils.disposeObject(child.geometry),child=utils.disposeObject(child),null!=material){if(null==material.length)material.map&&(texture=material.map,material.dispose(),texture.dispose()),material.bumpMap&&(texture=material.bumpMap,material.dispose(),texture.dispose());else for(var matCount=0;matCount<material.length;matCount++)material[matCount]&&(material[matCount].map&&(texture=material[matCount].map,material[matCount].dispose(),texture.dispose()),material[matCount].bumpMap&&(texture=material[matCount].bumpMap,material[matCount].dispose(),texture.dispose())),material[matCount]=null;material=null,texture=null}},loadImage:function(object,image,faceNumber,mapType,callback){if(null==image){var value=null==object.material[faceNumber]?null:object.material[faceNumber][mapType]?object.material[faceNumber][mapType].sourceFile:null;return null==value||value.indexOf("data:image")>-1?null:value}var _texture=null;return"CANVAS"===image.nodeName||"IMG"===image.nodeName?((_texture=new THREE.Texture(image)).needsUpdate=!0,MOCKUP.loadTexture(_texture,object,mapType,faceNumber),"function"==typeof callback&&callback(object,_texture)):"blank"!==image?(_texture=null==image?null:MOCKUP.textureLoader.load(image,(function(texture){texture.sourceFile=image,MOCKUP.loadTexture(texture,object,mapType,faceNumber),"function"==typeof callback&&callback(object,texture)}),void 0,(function(){null==_texture.image&&MOCKUP.loadImage(object,MOCKUP.defaults.textureLoadFallback,faceNumber,mapType),MOCKUP.loadTextureFailed()})))&&(_texture.mapping=THREE.UVMapping):(MOCKUP.loadTexture(null,object,mapType,faceNumber),"function"==typeof callback&&callback(object,_texture)),0},loadTexture:function(texture,object,mapType,faceNumber){if(texture){var img=texture.image;texture.naturalWidth=img.naturalWidth,texture.naturalHeight=img.naturalHeight,texture.needsUpdate=!0}null!==texture&&"map"===mapType&&(texture.anisotropy=0,MOCKUP.defaults.anisotropy>0&&(texture.anisotropy=MOCKUP.defaults.anisotropy),!0===THREE.skipPowerOfTwo&&(texture.minFilter=THREE.LinearFilter,texture.magFilter=THREE.LinearFilter),texture.name=(new Date).toTimeString()),MOCKUP.clearTexture(object.material[faceNumber][mapType]),object.material[faceNumber][mapType]=texture,"bumpMap"===mapType&&(object.material[faceNumber].bumpScale=object.bumpScale()),object.material[faceNumber].needsUpdate=!0},loadTextureFailed:function(){return null},clearTexture:function(texture){texture&&(texture.image&&"CANVAS"===texture.image.nodeName&&(texture.image.remove&&texture.image.remove(),delete texture.image),texture=utils.disposeObject(texture))}},THREE.skipPowerOfTwo=!0;var Paper=function(_THREE$Mesh){_inherits(Paper,_THREE$Mesh);var _super4=_createSuper(Paper);function Paper(options){var _this4;_classCallCheck(this,Paper);var width=options.width||MOCKUP.defaults.width,height=options.height||MOCKUP.defaults.height,color=options.color||MOCKUP.defaults.color,segments=options.segments||MOCKUP.defaults.segments,depth=options.depth||MOCKUP.defaults.depth,_matParameters={color:color,flatShading:!1,shininess:options.shininess||MOCKUP.defaults.shininess},_material=new THREE.MeshPhongMaterial(_matParameters),_materials=[_material,_material,_material,_material,new THREE.MeshPhongMaterial(_matParameters),new THREE.MeshPhongMaterial(_matParameters)];return(_this4=_super4.call(this,new THREE.BoxGeometry(width,height,depth,segments,1,1),_materials)).material[5].transparent=!0,_this4.material[4].transparent=!0,_this4.baseType="Paper",_this4.type="Paper",_this4.castShadow=!0,_this4.receiveShadow=!0,options.parent3D.add(_assertThisInitialized(_this4)),_this4}return _createClass(Paper,[{key:"frontImage",value:function(texture,callback){MOCKUP.loadImage(this,texture,MOCKUP.MATERIAL_FACE.FRONT,"map",callback)}},{key:"backImage",value:function(texture,callback){MOCKUP.loadImage(this,texture,MOCKUP.MATERIAL_FACE.BACK,"map",callback)}}]),Paper}(THREE.Mesh),Ground=function(_Paper){_inherits(Ground,_Paper);var _super5=_createSuper(Ground);function Ground(options){var _this5;return _classCallCheck(this,Ground),(_this5=_super5.call(this,options)).receiveShadow=!0,_this5.frontImage(MOCKUP.defaults.groundTexture),_this5.backImage(MOCKUP.defaults.groundTexture),_this5.type="Ground",_this5}return Ground}(Paper),Stage=function(_THREE$Scene){_inherits(Stage,_THREE$Scene);var _super6=_createSuper(Stage);function Stage(parameters){var _this6;_classCallCheck(this,Stage);var stage=_assertThisInitialized(_this6=_super6.call(this));stage.canvas=parameters.canvas||document.createElement("canvas"),stage.canvas=jQuery(_this6.canvas),stage.camera=new THREE.PerspectiveCamera(20,stage.width/stage.height,4,5e4),stage.renderer=new THREE.WebGLRenderer({canvas:stage.canvas[0],antialias:!0,alpha:!0}),stage.renderer.setPixelRatio(parameters.pixelRatio),stage.renderer.setSize(stage.width,stage.height),stage.renderer.setClearColor(16777215,0),(stage.orbitControl=new THREE.OrbitControls(stage.camera,stage.renderer.domElement)).maxPolarAngle=Math.PI,stage.renderer.shadowMap.enabled=!0,stage.renderer.shadowMap.type=1,stage.ground=new Ground({color:16777215,height:stage.camera.far/10,width:stage.camera.far/10,segments:2,parent3D:stage}),stage.ambientLight=new THREE.AmbientLight(4473924),stage.add(stage.ambientLight);var spotLight=stage.spotLight=new THREE.DirectionalLight(16777215,.5);return spotLight.position.set(0,1,0),!1!==parameters.castShadow&&(spotLight.castShadow=!0,spotLight.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(70,1,200,2e3)),spotLight.shadow.radius=2,spotLight.shadow.mapSize.width=1024,spotLight.shadow.mapSize.height=1024),spotLight.intensity=.6,stage.add(spotLight),stage.animateCount=0,stage.renderCount=0,stage.camera.position.set(-300,300,300),stage.camera.lookAt(new THREE.Vector3(0,0,0)),stage.orbitControl.center.set(0,0,0),stage.orbitControl.update(),_this6}return _createClass(Stage,[{key:"resizeCanvas",value:function(width,height){this.renderer.setSize(width,height),this.camera.aspect=width/height,this.camera.updateProjectionMatrix()}},{key:"render",value:function(){this.animateCount++,this.renderer.render(this,this.camera),null!=this.stats&&this.stats.update()}},{key:"clearMaterials",value:function(){for(var count=this.children.length-1;count>=0;count--){var child=this.children[count];if(child.baseType&&"Paper"===child.baseType&&child.material)if(child.material.length)for(var countMat=0;countMat<child.material.length;countMat++)child.material[countMat].needsUpdate=!0;else child.material.needsUpdate=!0}}},{key:"clearChild",value:function(){this.spotLight.shadow.map=utils.disposeObject(this.spotLight.shadow.map),this.spotLight.castShadow=!1,this.clearMaterials();for(var count=this.children.length-1;count>=0;count--){var child=this.children[count];if(child.children&&child.children.length>0)for(var stackCount=child.children.length-1;stackCount>=0;stackCount--)MOCKUP.clearChild(child.children[stackCount]);MOCKUP.clearChild(child),child=null}this.render()}}]),Stage}(THREE.Scene);MOCKUP.Paper=Paper,MOCKUP.Stage=Stage,THREE.OrbitControls=function(object,domElement){this.object=object,this.domElement=null!=domElement?domElement:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var theta,phi,scope=this,EPS=1e-6,rotateStart=new THREE.Vector2,rotateEnd=new THREE.Vector2,rotateDelta=new THREE.Vector2,panStart=new THREE.Vector2,panEnd=new THREE.Vector2,panDelta=new THREE.Vector2,panOffset=new THREE.Vector3,offset=new THREE.Vector3,dollyStart=new THREE.Vector2,dollyEnd=new THREE.Vector2,dollyDelta=new THREE.Vector2,phiDelta=0,thetaDelta=0,scale=1,pan=new THREE.Vector3,lastPosition=new THREE.Vector3,lastQuaternion=new THREE.Quaternion,STATE_NONE=-1,STATE_ROTATE=0,STATE_DOLLY=1,STATE_PAN=2,STATE_TOUCH_ROTATE=3,STATE_TOUCH_DOLLY=4,STATE_TOUCH_PAN=5,state=STATE_NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var quat=(new THREE.Quaternion).setFromUnitVectors(object.up,new THREE.Vector3(0,1,0)),quatInverse=quat.clone().inverse(),changeEvent={type:"change"},startEvent={type:"start"},endEvent={type:"end"};function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,scope.zoomSpeed)}function onMouseDown(event){if(!1!==scope.enabled){if(event.preventDefault(),event.button===scope.mouseButtons.ORBIT){if(!0===scope.noRotate)return;state=STATE_ROTATE,rotateStart.set(event.clientX,event.clientY)}else if(event.button===scope.mouseButtons.ZOOM){if(!0===scope.noZoom)return;state=STATE_DOLLY,dollyStart.set(event.clientX,event.clientY)}else if(event.button===scope.mouseButtons.PAN){if(!0===scope.noPan)return;state=STATE_PAN,panStart.set(event.clientX,event.clientY)}state!==STATE_NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),document.addEventListener("mouseout",onMouseUp,!1),scope.dispatchEvent(startEvent))}}function onMouseMove(event){if(!1!==scope.enabled){event.preventDefault();var element=scope.domElement===document?scope.domElement.body:scope.domElement;if(state===STATE_ROTATE){if(!0===scope.noRotate)return;rotateEnd.set(event.clientX,event.clientY),rotateDelta.subVectors(rotateEnd,rotateStart),scope.rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed),scope.rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed),rotateStart.copy(rotateEnd)}else if(state===STATE_DOLLY){if(!0===scope.noZoom)return;dollyEnd.set(event.clientX,event.clientY),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?scope.dollyIn():dollyDelta.y<0&&scope.dollyOut(),dollyStart.copy(dollyEnd)}else if(state===STATE_PAN){if(!0===scope.noPan)return;panEnd.set(event.clientX,event.clientY),panDelta.subVectors(panEnd,panStart),scope.pan(panDelta.x,panDelta.y),panStart.copy(panEnd)}state!==STATE_NONE&&scope.update()}}function onMouseUp(){!1!==scope.enabled&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),document.removeEventListener("mouseout",onMouseUp,!1),scope.dispatchEvent(endEvent),state=STATE_NONE)}function onMouseWheel(event){if(!1!==scope.enabled&&!0!==scope.noZoom&&state===STATE_NONE){event.preventDefault(),event.stopPropagation();var delta=0;null!=event.wheelDelta?delta=event.wheelDelta:null!=event.detail&&(delta=-event.detail),delta>0?scope.dollyOut():delta<0&&scope.dollyIn(),scope.update(),scope.dispatchEvent(startEvent),scope.dispatchEvent(endEvent),scope.zoomCallback&&scope.zoomCallback()}}function onKeyDown(event){if(!1!==scope.enabled&&!0!==scope.noKeys&&!0!==scope.noPan)switch(event.keyCode){case scope.keys.UP:scope.pan(0,scope.keyPanSpeed),scope.update();break;case scope.keys.BOTTOM:scope.pan(0,-scope.keyPanSpeed),scope.update();break;case scope.keys.LEFT:scope.pan(scope.keyPanSpeed,0),scope.update();break;case scope.keys.RIGHT:scope.pan(-scope.keyPanSpeed,0),scope.update()}}function touchstart(event){if(!1!==scope.enabled){var touchCount=event.touches.length;switch(scope.mouseButtons.PAN===THREE.MOUSE.LEFT&&(touchCount=3),touchCount){case 4:if(!0===scope.noRotate)return;state=STATE_TOUCH_ROTATE,rotateStart.set(event.touches[0].pageX,event.touches[0].pageY);break;case 2:if(!0===scope.noZoom)return;state=STATE_TOUCH_DOLLY;var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance);break;case 3:if(!0===scope.noPan)return;state=STATE_TOUCH_PAN,panStart.set(event.touches[0].pageX,event.touches[0].pageY);break;default:state=STATE_NONE}state!==STATE_NONE&&scope.dispatchEvent(startEvent)}}function touchmove(event){if(!1!==scope.enabled){var element=scope.domElement===document?scope.domElement.body:scope.domElement,touchCount=event.touches.length;switch(scope.mouseButtons.PAN===THREE.MOUSE.LEFT&&(touchCount=3),touchCount){case 4:if(!0===scope.noRotate)return;if(state!==STATE_TOUCH_ROTATE)return;event.preventDefault(),event.stopPropagation(),rotateEnd.set(event.touches[0].pageX,event.touches[0].pageY),rotateDelta.subVectors(rotateEnd,rotateStart),scope.rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed),scope.rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed),rotateStart.copy(rotateEnd),scope.update();break;case 2:if(!0===scope.noZoom)return;if(state!==STATE_TOUCH_DOLLY)return;event.preventDefault(),event.stopPropagation();var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?scope.dollyOut():dollyDelta.y<0&&scope.dollyIn(),dollyStart.copy(dollyEnd),scope.update();break;case 3:if(!0===scope.noPan)return;if(state!==STATE_TOUCH_PAN)return;event.preventDefault(),event.stopPropagation(),panEnd.set(event.touches[0].pageX,event.touches[0].pageY),panDelta.subVectors(panEnd,panStart),scope.pan(panDelta.x,panDelta.y),panStart.copy(panEnd),scope.update();break;default:state=STATE_NONE}}}function touchend(){!1!==scope.enabled&&(scope.dispatchEvent(endEvent),state=STATE_NONE)}function suppressEvent(event){event.preventDefault()}this.rotateLeft=function(angle){null==angle&&(angle=getAutoRotationAngle()),thetaDelta-=angle},this.rotateUp=function(angle){null==angle&&(angle=getAutoRotationAngle()),phiDelta-=angle},this.panLeft=function(distance){var te=this.object.matrix.elements;panOffset.set(te[0],te[1],te[2]),panOffset.multiplyScalar(-distance),pan.add(panOffset)},this.panUp=function(distance){var te=this.object.matrix.elements;panOffset.set(te[4],te[5],te[6]),panOffset.multiplyScalar(distance),pan.add(panOffset)},this.pan=function(deltaX,deltaY){var element=scope.domElement===document?scope.domElement.body:scope.domElement;if(scope.object instanceof THREE.PerspectiveCamera){var targetDistance=scope.object.position.clone().sub(scope.target).length();targetDistance*=Math.tan(scope.object.fov/2*Math.PI/180),scope.panLeft(2*deltaX*targetDistance/element.clientHeight),scope.panUp(2*deltaY*targetDistance/element.clientHeight)}else scope.object instanceof THREE.OrthographicCamera?(scope.panLeft(deltaX*(scope.object.right-scope.object.left)/element.clientWidth),scope.panUp(deltaY*(scope.object.top-scope.object.bottom)/element.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(dollyScale){null==dollyScale&&(dollyScale=getZoomScale()),scope.object instanceof THREE.PerspectiveCamera?scale/=dollyScale:scope.object instanceof THREE.OrthographicCamera?(scope.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*dollyScale)),scope.object.updateProjectionMatrix(),scope.dispatchEvent(changeEvent)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(dollyScale){null==dollyScale&&(dollyScale=getZoomScale()),scope.object instanceof THREE.PerspectiveCamera?scale*=dollyScale:scope.object instanceof THREE.OrthographicCamera?(scope.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/dollyScale)),scope.object.updateProjectionMatrix(),scope.dispatchEvent(changeEvent)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var position=this.object.position;offset.copy(position).sub(this.target),offset.applyQuaternion(quat),theta=Math.atan2(offset.x,offset.z),phi=Math.atan2(Math.sqrt(offset.x*offset.x+offset.z*offset.z),offset.y),this.autoRotate&&state===STATE_NONE&&this.rotateLeft(getAutoRotationAngle()),theta+=thetaDelta,phi+=phiDelta,theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,theta)),phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,phi)),phi=Math.max(EPS,Math.min(Math.PI-EPS,phi));var radius=offset.length()*scale;radius=Math.max(this.minDistance,Math.min(this.maxDistance,radius)),this.target.add(pan),offset.x=radius*Math.sin(phi)*Math.sin(theta),offset.y=radius*Math.cos(phi),offset.z=radius*Math.sin(phi)*Math.cos(theta),offset.applyQuaternion(quatInverse),position.copy(this.target).add(offset),this.object.lookAt(this.target),thetaDelta=0,phiDelta=0,scale=1,pan.set(0,0,0),(lastPosition.distanceToSquared(this.object.position)>EPS||8*(1-lastQuaternion.dot(this.object.quaternion))>EPS)&&(this.dispatchEvent(changeEvent),lastPosition.copy(this.object.position),lastQuaternion.copy(this.object.quaternion))},this.reset=function(){state=STATE_NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(changeEvent),this.update()},this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.dispose=function(){this.domElement.removeEventListener("contextmenu",suppressEvent,!1),this.domElement.removeEventListener("mousedown",onMouseDown,!1),this.domElement.removeEventListener("mousewheel",onMouseWheel,!1),this.domElement.removeEventListener("DOMMouseScroll",onMouseWheel,!1),this.domElement.removeEventListener("touchstart",touchstart,!1),this.domElement.removeEventListener("touchend",touchend,!1),this.domElement.removeEventListener("touchmove",touchmove,!1),window.removeEventListener("keydown",onKeyDown,!1)},this.domElement.addEventListener("contextmenu",suppressEvent,!1),this.domElement.addEventListener("mousedown",onMouseDown,!1),this.domElement.addEventListener("mousewheel",onMouseWheel,!1),this.domElement.addEventListener("DOMMouseScroll",onMouseWheel,!1),this.domElement.addEventListener("touchstart",touchstart,!1),this.domElement.addEventListener("touchend",touchend,!1),this.domElement.addEventListener("touchmove",touchmove,!1),window.addEventListener("keydown",onKeyDown,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,THREE.CSS3DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",(function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)}))},THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(e){THREE.CSS3DObject.call(this,e)},THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype),THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite,THREE.CSS3DRenderer=function(){var e,t,r,i;utils.log("THREE.CSS3DRenderer",THREE.REVISION);var n=new THREE.Matrix4,a={camera:{fov:0,style:""},objects:{}},o=document.createElement("div");o.style.overflow="hidden",o.style.WebkitTransformStyle="preserve-3d",o.style.MozTransformStyle="preserve-3d",o.style.oTransformStyle="preserve-3d",o.style.transformStyle="preserve-3d",this.domElement=o;var s=document.createElement("div");s.style.WebkitTransformStyle="preserve-3d",s.style.MozTransformStyle="preserve-3d",s.style.oTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",o.appendChild(s),this.setClearColor=function(){},this.getSize=function(){return{width:e,height:t}},this.setSize=function(n,a){r=(e=n)/2,i=(t=a)/2,o.style.width=n+"px",o.style.height=a+"px",s.style.width=n+"px",s.style.height=a+"px"};var h=function(e){return Math.abs(e)<Number.EPSILON?0:e},u=function(e){var t=e.elements;return"matrix3d("+h(t[0])+","+h(-t[1])+","+h(t[2])+","+h(t[3])+","+h(t[4])+","+h(-t[5])+","+h(t[6])+","+h(t[7])+","+h(t[8])+","+h(-t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(-t[13])+","+h(t[14])+","+h(t[15])+")"},c=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+h(t[0])+","+h(t[1])+","+h(t[2])+","+h(t[3])+","+h(-t[4])+","+h(-t[5])+","+h(-t[6])+","+h(-t[7])+","+h(t[8])+","+h(t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(t[13])+","+h(t[14])+","+h(t[15])+")"},l=function l(e,t){if(e instanceof THREE.CSS3DObject){var _r;e instanceof THREE.CSS3DSprite?(n.copy(t.matrixWorldInverse),n.transpose(),n.copyPosition(e.matrixWorld),n.scale(e.scale),n.elements[3]=0,n.elements[7]=0,n.elements[11]=0,n.elements[15]=1,_r=c(n)):_r=c(e.matrixWorld);var _i=e.element,_o=a.objects[e.id];void 0!==_o&&_o===_r||(_i.style.WebkitTransform=_r,_i.style.MozTransform=_r,_i.style.oTransform=_r,_i.style.transform=_r,a.objects[e.id]=_r),_i.parentNode!==s&&s.appendChild(_i)}for(var _h=0,_u=e.children.length;_h<_u;_h++)l(e.children[_h],t)};this.render=function(e,n){var h=.5/Math.tan(THREE.Math.degToRad(.5*n.fov))*t;a.camera.fov!==h&&(o.style.WebkitPerspective=h+"px",o.style.MozPerspective=h+"px",o.style.oPerspective=h+"px",o.style.perspective=h+"px",a.camera.fov=h),e.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),n.matrixWorldInverse.getInverse(n.matrixWorld);var c="translate3d(0,0,"+h+"px)"+u(n.matrixWorldInverse)+" translate3d("+r+"px,"+i+"px, 0)";a.camera.style!==c&&(s.style.WebkitTransform=c,s.style.MozTransform=c,s.style.oTransform=c,s.style.transform=c,a.camera.style=c),l(e,n)}}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return app_App}));__webpack_require__(11);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var DEARPDF=window.DEARPDF,utils=DEARPDF.utils,REQUEST_STATUS=DEARPDF.REQUEST_STATUS,UI=function(){function UI(options,appContext){_classCallCheck(this,UI),this.options=options,this.app=appContext,this.parentElement=this.app.container,this.element=jQuery("<div>",{class:"dp-ui"}),this.parentElement.append(this.element),this.events={},this.controls={}}return _createClass(UI,[{key:"init",value:function(){var ui=this,app=this.app,controls=this.controls,text=app.options.text,icons=app.options.icons;ui.createLogo(),controls.openRight=jQuery("<div>",{class:"dp-ui-nav dp-ui-next",title:app.isRTL?text.previousPage:text.nextPage,html:'<div class="dp-ui-btn '+icons.next+'"</div>'}).on("click",(function(){app.openRight()})),controls.openLeft=jQuery("<div>",{class:"dp-ui-nav dp-ui-prev",title:app.isRTL?text.nextPage:text.previousPage,html:'<div class="dp-ui-btn '+icons.prev+'"</div>'}).on("click",(function(){app.openLeft()})),controls.pageNumber=utils.createBtn("page").on("change",(function(){var pageNumber=parseInt(controls.pageInput.val(),10);pageNumber=app.getValidPage(pageNumber),app.gotoPage(pageNumber)})).on("keyup",(function(event){if(13===event.keyCode){var pageNumber=parseInt(controls.pageInput.val(),10);(pageNumber=app.getValidPage(pageNumber))!==app.currentPageNumber&&app.gotoPage(pageNumber)}}));var rnd_id="df_book_page_number_"+Math.ceil(performance.now()/10);controls.pageInput=jQuery('<input id="'+rnd_id+'" type="text"/>').appendTo(controls.pageNumber),controls.pageLabel=jQuery('<label for="'+rnd_id+'"></label>').appendTo(controls.pageNumber),controls.thumbnail=utils.createBtn("thumbnail",icons.thumbnail,text.toggleThumbnails),controls.thumbnail.on("click",(function(){var el=jQuery(this);null==app.thumblist&&app.initThumbs(),app.thumbContainer.toggleClass("dp-sidemenu-visible"),el.toggleClass("dp-active"),el.hasClass("dp-active")&&(el.siblings(".dp-active").trigger("click"),app.thumbRequestStatus=REQUEST_STATUS.ON),ui.update(),!1===app.options.sideMenuOverlay&&app.resizeRequestStart()})).addClass("dp-sidemenu-trigger"),app.hasOutline()&&(controls.outline=utils.createBtn("outline",icons.outline,text.toggleOutline),controls.outline.on("click",(function(){var el=jQuery(this);if(null==app.outlineViewer&&app.initOutline(),app.outlineContainer){var outlineContainer=app.outlineContainer;el.toggleClass("dp-active"),outlineContainer.toggleClass("dp-sidemenu-visible"),el.hasClass("dp-active")&&el.siblings(".dp-active").trigger("click"),ui.update(),!1===app.options.sideMenuOverlay&&app.resizeRequestStart()}})).addClass("dp-sidemenu-trigger"));var controlsContainer=ui.element;if(controls.zoomIn=utils.createBtn("zoomin",icons.zoomin,text.zoomIn).on("click",(function(){app.zoom(1),ui.update()})),controls.zoomOut=utils.createBtn("zoomout",icons.zoomout,text.zoomOut).on("click",(function(){app.zoom(-1),ui.update()})),app.viewer.isFlipBook){var isSingle=app.viewer.pageMode===DEARPDF.FLIPBOOK_PAGE_MODE.SINGLE;controls.pageMode=utils.createBtn("pagemode",icons[isSingle?"doublepage":"singlepage"],isSingle?text.doublePageMode:text.singlePageMode).on("click",(function(){var el=jQuery(this);app.viewer.setPageMode({isSingle:!el.hasClass(icons.doublepage)}),app.viewer.pageMode===DEARPDF.FLIPBOOK_PAGE_MODE.DOUBLE?controls.pageMode.removeClass(icons.doublepage).addClass(icons.singlepage).attr("title",text.singlePageMode).html("<span>"+text.singlePageMode+"</span>"):controls.pageMode.addClass(icons.doublepage).removeClass(icons.singlepage).attr("title",text.doublePageMode).html("<span>"+text.doublePageMode+"</span>")}))}else controls.pageFit=utils.createBtn("pagefit",icons.pagefit,text.pageFit).on("click",(function(){var pageFit=controls.pageFit;!0===!pageFit.hasClass(icons.widthfit)?(pageFit.addClass(icons.widthfit),pageFit.html("<span>"+text.widthFit+"</span>"),pageFit.attr("title",text.widthFit)):(pageFit.removeClass(icons.widthfit),pageFit.html("<span>"+text.pageFit+"</span>"),pageFit.attr("title",text.pageFit))}));if(controls.share=utils.createBtn("share",icons.share,text.share).on("click",(function(){ui.shareBox||(ui.shareBox=new DP_Share(app.container,app.options)),!0===ui.shareBox.isOpen?ui.shareBox.close():(ui.shareBox.update(app.getURLHash()),ui.shareBox.show())})),controls.more=utils.createBtn("more",icons.more).on("click",(function(event){!0!==ui.moreContainerOpen&&(jQuery(this).addClass("dp-active"),ui.moreContainerOpen=!0,event.stopPropagation())})),controls.startPage=utils.createBtn("start",icons.start,text.gotoFirstPage).on("click",(function(){app.start()})),controls.endPage=utils.createBtn("end",icons.end,text.gotoLastPage).on("click",(function(){app.end()})),controls.print=utils.createBtn("print",icons.print,text.print).on("click",(function(){app.print()})),!0===app.options.showDownloadControl){var downloadClass="dp-ui-btn dp-ui-download "+icons.download;controls.download=jQuery('<a download target="_blank" class="'+downloadClass+'"><span>'+text.downloadPDFFile+"</span></a>"),controls.download.attr("href",app.options.source).attr("title",text.downloadPDFFile)}ui.moreContainer=jQuery("<div>",{class:"dp-more-container"}),controls.more.append(ui.moreContainer),controls.fullScreen=utils.createBtn("fullscreen",icons.fullscreen,text.toggleFullscreen).on("click",app.switchFullscreen.bind(app)),app.viewer.initCustomControls();var allControls=app.options.allControls.replace(/ /g,"").split(","),moreControls=","+app.options.moreControls.replace(/ /g,"")+",",hideControls=","+app.options.hideControls.replace(/ /g,"")+",";utils.isIOS&&(hideControls+=",fullScreen,"),hideControls+=",";for(var controlCount=0;controlCount<allControls.length;controlCount++){var controlName=allControls[controlCount];if(hideControls.indexOf(","+controlName+",")<0){var control=controls[controlName];null!=control&&"object"==_typeof(control)&&(moreControls.indexOf(","+controlName+",")>-1&&"more"!==controlName&&"pageNumber"!==controlName?ui.moreContainer.append(control):controlsContainer.append(control))}}app.container.append(controlsContainer),app.container.append(controls.openLeft),app.container.append(this.controls.openRight),window.addEventListener("click",ui.events.closePanels=ui.closePanels.bind(ui),!1),window.addEventListener("keyup",ui.events.keyup=ui.keyUp.bind(ui),!1),document.addEventListener("fullscreenchange",ui.events.keyup=ui.fullscreenChange.bind(ui),!1),!0===app.options.autoOpenThumbnail&&ui.controls.thumbnail.trigger("click"),app.hasOutline()&&!0===app.options.autoOpenOutline&&ui.controls.outline.trigger("click")}},{key:"closePanels",value:function(event){var _this$controls$more;!0===this.moreContainerOpen&&(null===(_this$controls$more=this.controls.more)||void 0===_this$controls$more||_this$controls$more.removeClass("dp-active"),this.moreContainerOpen=!1)}},{key:"fullscreenChange",value:function(event){void 0===utils.getFullscreenElement()&&!0===this.app.isFullscreen&&this.app.switchFullscreen()}},{key:"keyUp",value:function(event){var app=this.app;switch(event.keyCode){case 27:window.dpLightBox&&window.dpLightBox.app&&!utils.isChromeExtension()&&window.dpLightBox.closeButton.trigger("click");break;case 37:!0!==app.isFullscreen&&!0!==app.options.isLightBox||app.options.arrowKeysAction!==DEARPDF.ARROW_KEYS_ACTIONS.NAV||app.openLeft();break;case 39:!0!==app.isFullscreen&&!0!==app.options.isLightBox||app.options.arrowKeysAction!==DEARPDF.ARROW_KEYS_ACTIONS.NAV||app.openRight()}}},{key:"createLogo",value:function(){var app=this.app,logo=null;app.options.logo.indexOf("<")>-1?logo=jQuery(app.options.logo).addClass("dp-logo dp-logo-html"):app.options.logo.trim().length>2&&(logo=jQuery('<a class="dp-logo dp-logo-img" target="_blank" href="'+app.options.logoUrl+'"><img alt="" src="'+app.options.logo+'"/>')),this.element.append(logo)}},{key:"dispose",value:function(){var ui=this;for(var key in this.controls)if(this.controls.hasOwnProperty(key)){var control=this.controls[key];null!==control&&"object"==_typeof(control)&&control.off().remove()}ui.element.remove(),ui.shareBox=utils.disposeObject(ui.shareBox),window.removeEventListener("click",ui.events.closePanels,!1),window.removeEventListener("keyup",ui.events.keyup,!1),document.removeEventListener("fullscreenchange",ui.events.keyup,!1)}},{key:"update",value:function(){var app=this.app,controls=this.controls;controls.pageLabel.html(app.currentPageNumber+"/"+app.pageCount),controls.pageInput.val(app.currentPageNumber),app.container.toggleClass("dp-sidemenu-open",app.container.find(".dp-sidemenu-visible").length>0),controls.zoomIn.toggleClass("disabled",app.zoomValue===app.viewer.maxZoom),controls.zoomOut.toggleClass("disabled",app.zoomValue===app.viewer.minZoom);var isRTL=app.isRTL,isStart=app.currentPageNumber===app.startPage,isEnd=app.currentPageNumber===app.endPage,noPrev=isStart&&!isRTL||isEnd&&isRTL,noNext=isEnd&&!isRTL||isStart&&isRTL;controls.openRight.toggleClass("dp-hidden",noNext),controls.openLeft.toggleClass("dp-hidden",noPrev),app.viewer.afterControlUpdate()}}]),UI}(),DP_Share=function(){function DP_Share(container,options){_classCallCheck(this,DP_Share);this.isOpen=!1,this.shareUrl="",this.init(container,options)}return _createClass(DP_Share,[{key:"init",value:function(container,options){var dfShare=this;for(var shareKey in dfShare.wrapper=jQuery('<div class="dp-share-wrapper" style="display: none;">').on("click",(function(){dfShare.close()})),dfShare.box=jQuery('<div class="dp-share-box">'),dfShare.box.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),dfShare.box.appendTo(dfShare.wrapper).html('<span class="dp-share-title">'+options.text.share+"</span>"),dfShare.urlInput=jQuery('<textarea class="dp-share-url">').on("click",(function(){jQuery(this).select()})),dfShare.box.append(dfShare.urlInput),options.share)options.share.hasOwnProperty(shareKey)&&function(){var shareTemplate=options.share[shareKey];null!==shareTemplate&&(dfShare[shareKey]=jQuery("<div>",{class:"dp-share-button dp-share-"+shareKey+" "+options.icons[shareKey]}).on("click",(function(e){e.preventDefault(),window.open(shareTemplate.replace("{{url}}",encodeURIComponent(dfShare.shareUrl)),"Sharer","width=500,height=400"),e.stopPropagation()})),dfShare.box.append(dfShare[shareKey]))}();jQuery(container).append(dfShare.wrapper)}},{key:"show",value:function(){this.wrapper.fadeIn(300),this.urlInput.val(this.shareUrl),this.urlInput.trigger("click"),this.isOpen=!0}},{key:"dispose",value:function(){for(var key in this)this.hasOwnProperty(key)&&this[key]&&this[key].off&&this[key].off();this.wrapper.remove()}},{key:"close",value:function(){this.wrapper.fadeOut(300),this.isOpen=!1}},{key:"update",value:function(url){this.shareUrl=url}}]),DP_Share}(),DFLightBox=function(){function DFLightBox(closeCallback){_classCallCheck(this,DFLightBox),this.duration=300;var lightbox=this;return lightbox.lightboxWrapper=jQuery("<div>").addClass("dp-lightbox-wrapper"),lightbox.element=jQuery("<div>").addClass("dp-app").appendTo(lightbox.lightboxWrapper),lightbox.controls=jQuery("<div>").addClass("dp-lightbox-controls").appendTo(lightbox.lightboxWrapper),lightbox.closeButton=jQuery("<div>").addClass("dp-lightbox-close dp-ui-btn "+DEARPDF.defaults.icons.close).on("click",(function(){lightbox.close(closeCallback)})).appendTo(lightbox.controls),lightbox.lightboxWrapper.append(lightbox.element),lightbox}return _createClass(DFLightBox,[{key:"show",value:function(callback){return 0===this.lightboxWrapper.parent().length&&jQuery("body").append(this.lightboxWrapper),jQuery("html,body").addClass("dp-lightbox-open"),this.lightboxWrapper.fadeIn(this.duration),"function"==typeof callback&&callback(),this}},{key:"close",value:function(callback){return this.lightboxWrapper.fadeOut(this.duration),Array.prototype.forEach.call(DEARPDF.utils.getSharePrefixes(),(function(prefix){0===window.location.hash.indexOf("#"+prefix)&&(window.location.hash="#_")})),"function"==typeof callback&&setTimeout(callback,this.duration),jQuery("html,body").removeClass("dp-lightbox-open"),this.element.attr("class","dp-app").attr("style",""),this}}]),DFLightBox}(),Sidemenu=function(){function Sidemenu(options,appContext){_classCallCheck(this,Sidemenu),this.options=options,this.app=appContext,this.parentElement=options.parentElement,this.element=jQuery("<div>",{class:"dp-sidemenu-wrapper"}),this.parentElement.append(this.element),this.buttons=jQuery("<div>",{class:"dp-sidemenu-buttons dp-ui-wrapper"}).appendTo(this.element),this.close=utils.createBtn("close",appContext.options.icons.close,appContext.options.text.close),this.buttons.append(this.close)}return _createClass(Sidemenu,[{key:"dispose",value:function(){this.element.remove()}}]),Sidemenu}(),BookMarkViewer=function(){function BookMarkViewer(options){_classCallCheck(this,BookMarkViewer),this.outline=null,this.lastToggleIsShow=!0,this.container=options.container,this.linkService=options.linkService,this.outlineItemClass=options.outlineItemClass||"outlineItem",this.outlineToggleClass=options.outlineToggleClass||"outlineItemToggler",this.outlineToggleHiddenClass=options.outlineToggleHiddenClass||"outlineItemsHidden"}return _createClass(BookMarkViewer,[{key:"dispose",value:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.linkService=null}},{key:"reset",value:function(){this.outline=null,this.lastToggleIsShow=!0;for(var container=this.container;container.firstChild;)container.removeChild(container.firstChild)}},{key:"_dispatchEvent",value:function(outlineCount){var event=document.createEvent("CustomEvent");event.initCustomEvent("outlineloaded",!0,!0,{outlineCount:outlineCount}),this.container.dispatchEvent(event)}},{key:"_bindLink",value:function(element,item){var linkService=this.linkService;if(!0===item.custom)element.href=linkService.getCustomDestinationHash(item.dest),element.onclick=function(){return linkService.customNavigateTo(item.dest),!1};else{if(item.url)return void pdfjsLib.addLinkAttributes(element,{url:item.url});element.href=linkService.getDestinationHash(item.dest),element.onclick=function(){return linkService.navigateTo(item.dest),!1}}}},{key:"_addToggleButton",value:function(div){var _bookMarkViewer=this,toggler=document.createElement("div");toggler.className=this.outlineToggleClass+" "+this.outlineToggleHiddenClass,toggler.onclick=function(event){if(event.stopPropagation(),toggler.classList.toggle(this.outlineToggleHiddenClass),event.shiftKey){var shouldShowAll=!toggler.classList.contains(this.outlineToggleHiddenClass);_bookMarkViewer._toggleOutlineItem(div,shouldShowAll)}}.bind(this),div.insertBefore(toggler,div.firstChild)}},{key:"_toggleOutlineItem",value:function(root,show){this.lastToggleIsShow=show;for(var togglers=root.querySelectorAll("."+this.outlineToggleClass),i=0,ii=togglers.length;i<ii;++i)togglers[i].classList[show?"remove":"add"](this.outlineToggleHiddenClass)}},{key:"render",value:function(params){var outline=params&&params.outline||null,outlineCount=0;if(this.outline&&this.reset(),this.outline=outline,outline){for(var fragment=document.createDocumentFragment(),queue=[{parent:fragment,items:this.outline,custom:!1}],hasAnyNesting=!1;queue.length>0;)for(var levelData=queue.shift(),isCustom=levelData.custom,i=0,len=levelData.items.length;i<len;i++){var item=levelData.items[i],div=document.createElement("div");div.className=this.outlineItemClass;var element=document.createElement("a");if(null==item.custom&&null!=isCustom&&(item.custom=isCustom),this._bindLink(element,item),element.textContent=item.title.replace(/\x00/g,""),div.appendChild(element),item.items&&item.items.length>0){hasAnyNesting=!0,this._addToggleButton(div);var itemsDiv=document.createElement("div");itemsDiv.className=this.outlineItemClass+"s",div.appendChild(itemsDiv),queue.push({parent:itemsDiv,custom:item.custom,items:item.items})}levelData.parent.appendChild(div),outlineCount++}hasAnyNesting&&(null!=this.container.classList?this.container.classList.add(this.outlineItemClass+"s"):null!=this.container.className&&(this.container.className+=" picWindow")),this.container.appendChild(fragment),this._dispatchEvent(outlineCount)}}}]),BookMarkViewer}(),ThumbList=function(){function ThumbList(config){_classCallCheck(this,ThumbList);var itemHeight=this.itemHeight=config.itemHeight,itemWidth=this.itemWidth=config.itemWidth,app=this.app=config.app;this.items=config.items,this.generatorFn=config.generatorFn,this.totalRows=config.totalRows||config.items&&config.items.length,this.addFn=config.addFn,this.scrollFn=config.scrollFn,this.container=document.createElement("div");for(var self=this,count=0;count<this.totalRows;count++){var el=document.createElement("div"),pageNumber=count+1;el.id="dp-thumb"+pageNumber;var image=document.createElement("div"),thumbNumber=document.createElement("div"),wrapper=document.createElement("div");wrapper.className="dp-wrapper",thumbNumber.className="dp-thumb-number",el.className="dp-thumb",image.className="dp-bg-image",wrapper.style.height=itemHeight+"px",wrapper.style.width=itemWidth+"px",thumbNumber.innerText=pageNumber,el.appendChild(wrapper),wrapper.appendChild(thumbNumber),wrapper.appendChild(image),this.container.appendChild(el)}function onScroll(){app.thumbRequestCount=0,app.thumbRequestStatus=REQUEST_STATUS.COUNT}self.dispose=function(){self.container&&self.container.parentNode&&self.container.parentNode.removeChild(self.container),self.container.removeEventListener("scroll",onScroll)},self.container.addEventListener("scroll",onScroll)}return _createClass(ThumbList,[{key:"processThumbRequest",value:function(){utils.log("Thumb Request Initiated");var app=this.app;if((app.thumbRequestStatus=REQUEST_STATUS.OFF,app.activeThumb!==app.currentPageNumber)&&(null!=app.thumbContainer&&app.thumbContainer.hasClass("dp-sidemenu-visible"))){var thumbWrapper=app.thumblist.container,thumbWrapperScrollTop=thumbWrapper.scrollTop,thumbWrapperScrollHeight=thumbWrapper.getBoundingClientRect().height,thumb=app.thumbContainer.find("#dp-thumb"+app.currentPageNumber);thumb.length>0?(app.thumbContainer.find(".dp-selected").removeClass("dp-selected"),thumb.addClass("dp-selected"),thumbWrapperScrollTop+thumbWrapperScrollHeight<(thumb=thumb[0]).offsetTop+thumb.scrollHeight?utils.scrollIntoView(thumb,null,!1):thumbWrapperScrollTop>thumb.offsetTop&&utils.scrollIntoView(thumb),app.activeThumb=app.currentPageNumber):(jQuery(thumbWrapper).scrollTop(124*app.currentPageNumber),app.thumbRequestStatus=REQUEST_STATUS.ON)}if(0===app.thumblist.container.getElementsByClassName("dp-thumb-requested").length){var visible=utils.getVisibleElements({container:app.thumblist.container,elements:app.thumblist.container.children});jQuery.inArray(visible)&&visible.unshift(app.activeThumb);for(var count=0;count<visible.length;count++){var _thumb=app.thumblist.container.children[visible[count]-1];if(void 0!==_thumb&&!1===_thumb.classList.contains("dp-thumb-loaded")&&!1===_thumb.classList.contains("dp-thumb-requested"))return _thumb.classList.add("dp-thumb-requested"),utils.log("Thumb Requested for "+visible[count]),app.provider.processPage({pageNumber:visible[count],textureTarget:DEARPDF.TEXTURE_TARGET.THUMB}),!1}}}},{key:"setPage",value:function(param){var app=this.app,pageNumber=param.pageNumber,texture=param.texture;if(param.textureTarget===DEARPDF.TEXTURE_TARGET.THUMB){var thumb=app.container.find("#dp-thumb"+pageNumber);thumb.find(".dp-wrapper").css({height:param.height,width:param.width}),thumb.find(".dp-bg-image").css({backgroundImage:utils.bgImage(texture)}),thumb.addClass("dp-thumb-loaded").removeClass("dp-thumb-requested")}utils.log("Thumbnail set for "+param.pageNumber),app.thumbRequestStatus=REQUEST_STATUS.ON}}]),ThumbList}();DEARPDF.openLightBox=function(app){window.dpLightBox||(window.dpLightBox=new DFLightBox((function(){window.dpLightBox.app=utils.disposeObject(window.dpLightBox.app)}))),window.dpLightBox.duration=300,window.dpLightBox.app=utils.disposeObject(window.dpLightBox.app),null===window.dpLightBox.app&&window.dpLightBox.show((function(){window.dpLightBox.app=jQuery(window.dpLightBox.element).dearpdf({transparent:!1,isLightBox:!0,height:"100%",dataElement:app})}))},DEARPDF.checkBrowserURLforDefaults=function(){if(!utils.isIEUnsupported){var viewerType=new URL(location.href).searchParams.get("viewer-type")||new URL(location.href).searchParams.get("viewertype"),is3D=new URL(location.href).searchParams.get("is-3d")||new URL(location.href).searchParams.get("is3d");viewerType&&(DEARPDF.defaults.viewerType=viewerType),"true"!==is3D&&"false"!==is3D||(DEARPDF.defaults.is3D="true"===is3D)}},DEARPDF.checkBrowserURLforPDF=function(){var openFlipbook=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!utils.isIEUnsupported){var pdf=new URL(location.href).searchParams.get("pdf-source");return pdf&&(pdf=unescape(pdf),openFlipbook&&DEARPDF.openFile(pdf)),pdf}},window.dearPDFOpenFileOptions={},DEARPDF.openFile=function(src){void 0===DEARPDF.openLocalFileElement&&(DEARPDF.openLocalFileElement=jQuery("<div hidden data-option='dearPDFOpenFileOptions'>").appendTo(jQuery("body"))),src&&(window.dearPDFOpenFileOptions.source=src,window.dearPDFOpenFileOptions.pdfParameters=null),DEARPDF.openLightBox(DEARPDF.openLocalFileElement)},DEARPDF.openBase64=function(data){window.dearPDFOpenFileOptions.source=null,window.dearPDFOpenFileOptions.pdfParameters={data:atob(data)},DEARPDF.openFile()},DEARPDF.openLocalFile=function(){var input;void 0===DEARPDF.openLocalFileInput&&(input=DEARPDF.openLocalFileInput=jQuery('<input type="file" accept=".pdf" style="display:none">').appendTo(jQuery("body"))).change((function(){var file,_DEARPDF$openLocalFil,files=input[0].files;files.length&&(file=files[0],DEARPDF.oldLocalFileObjectURL&&window.URL.revokeObjectURL(DEARPDF.oldLocalFileObjectURL),DEARPDF.oldLocalFileObjectURL=window.URL.createObjectURL(file),input.val(""),null===(_DEARPDF$openLocalFil=DEARPDF.openLocalFileInputChanged)||void 0===_DEARPDF$openLocalFil||_DEARPDF$openLocalFil.call(DEARPDF,DEARPDF.oldLocalFileObjectURL,file),DEARPDF.openFile(DEARPDF.oldLocalFileObjectURL))})),DEARPDF.openLocalFileInput.click()},DEARPDF.initControls=function(){var body=jQuery("body");!1!==DEARPDF.defaults.autoPDFLinktoViewer&&body.on("click",'a[href$=".pdf"]',(function(event){var app=jQuery(this);void 0!==app.attr("download")||"_blank"===app.attr("target")||app.hasClass("dp-ui-btn")||app.parents(".dp-app").length>0||(event.preventDefault(),app.data("source",app.attr("href")),DEARPDF.openLightBox(app))})),body.on("click",".dp-sidemenu-buttons .dp-ui-close",(function(){jQuery(this).closest(".dp-app").find(".dp-ui-outline.dp-active , .dp-ui-thumbnail.dp-active").trigger("click")})),body.on("mouseout",".dp-link-content section.squareAnnotation, .dp-link-content section.textAnnotation",(function(){var el=jQuery(this);DEARPDF.handlePopup(el,!1)})),body.on("mouseover",".dp-link-content section.squareAnnotation, .dp-link-content section.textAnnotation",(function(){var el=jQuery(this);DEARPDF.handlePopup(el,!0)})),DEARPDF.handlePopup=function(el){var show=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],container=el.closest(".dp-container"),commentPopup=container.find(".dp-comment-popup");if(commentPopup.toggleClass("dp-active",show),show){var elBounds=el[0].getBoundingClientRect(),containerBounds=container[0].getBoundingClientRect(),popup=el.find(".popupWrapper").first();commentPopup.html(popup.html());var left=elBounds.left-containerBounds.left;left+360>containerBounds.width?left=containerBounds.width-360-10:left<10&&(left=10);var top=elBounds.top-containerBounds.top+elBounds.height+5;top+commentPopup.height()>containerBounds.height?top=elBounds.top-commentPopup.height()-elBounds.height-10:top<10&&(top=10),commentPopup.css({left:left,top:top})}}};var provider=__webpack_require__(4);function app_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var app_DEARPDF=window.DEARPDF,app_REQUEST_STATUS=app_DEARPDF.REQUEST_STATUS,app_utils=app_DEARPDF.utils,app_App=function(){function App(options){var _this$options$isExter;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,App),this.options=options,this.viewerType=this.options.viewerType,this.startPage=1,this.endPage=1,this.element=jQuery(this.options.element),this.dimensions={padding:{},offset:{},pageFit:{},stage:{},isAutoHeight:"auto"===options.height},this.is3D=options.is3D,this.events={},this.links=options.links,this.thumbSize=128,this.pendingZoom=!0,this.currentPageNumber=this.options.openPage||this.startPage,this.pendingZoom=!0,this.zoomValue=1,this.pageScaling=app_DEARPDF.PAGE_SCALE.MANUAL,this.isRTL=options.readDirection===app_DEARPDF.READ_DIRECTION.RTL,this.jumpStep=1,this.resizeRequestStatus=app_REQUEST_STATUS.OFF,this.refreshRequestStatus=app_REQUEST_STATUS.OFF,this.refreshRequestCount=0,this.resizeRequestCount=0,this.fullscreenSupported=app_utils.hasFullscreenEnabled(),this.thumbRequestCount=0,this.isExternalReady=null===(_this$options$isExter=this.options.isExternalReady)||void 0===_this$options$isExter||_this$options$isExter,this.init(),!0===this.options.autoLightBoxFullscreen&&!0===this.options.isLightBox&&this.switchFullscreen()}var Constructor,protoProps,staticProps;return Constructor=App,(protoProps=[{key:"init",value:function(){var _options$maxTextureSi,options=this.options,app=this;return app.initDOM(),app.initResourcesLocation(),app.initInfo(),null!=options.source&&0!==options.source.length||null!=options.pdfParameters?app_utils.isIEUnsupported?(app.updateInfo("Your browser (Internet Explorer) is out of date to run DearPDF Flipbook Plugin. <br><a href='https://browsehappy.com/'>Upgrade to a new one</a>","dp-old-browser"),void app.container.removeClass("dp-loading").addClass("dp-error")):(app.commentPopup=jQuery('<div class="dp-comment-popup">').appendTo(app.container),app.viewer=new app.viewerType(options,this),app.sideMenu=new Sidemenu({parentElement:this.container},app),void(app.provider=new provider.a({pdfParameters:options.pdfParameters,pdfUrl:options.source,maxTextureSize:null!==(_options$maxTextureSi=options.maxTextureSize)&&void 0!==_options$maxTextureSi?_options$maxTextureSi:4096,rangeChunkSize:options.rangeChunkSize,pageSize:options.pageSize,disableAutoFetch:options.disableAutoFetch,disableStream:options.disableStream},app))):(app.updateInfo("ERROR: Set a Valid Document Source.",app_DEARPDF.INFO_TYPE.ERROR),void app.container.removeClass("dp-loading").addClass("dp-error"))}},{key:"initDOM",value:function(){this.element.addClass("dp-app").removeClass("dp-container dp-loading"),this.container=jQuery("<div>").appendTo(this.element),this.container.addClass("dp-container dp-loading dp-init dp-controls-"+this.options.controlsPosition+(!0===this.options.controlsFloating?" dp-float":" dp-float-off")+("transparent"===this.options.backgroundColor?" dp-transparent":"")+(!0===this.isRTL?" dp-rtl":"")+(!0===app_utils.isIOS||!0===app_utils.isIPad?" dp-ios":"")),this._offsetParent=this.container[0].offsetParent,this.backGround=jQuery("<div class='dp-bg'>").appendTo(this.container).css({backgroundColor:this.options.backgroundColor,backgroundImage:this.options.backgroundImage?"url('"+this.options.backgroundImage+"')":""}),this.viewerContainer=jQuery("<div>").appendTo(this.container),this.viewerContainer.addClass("dp-viewer-container")}},{key:"initResourcesLocation",value:function(){var options=this.options;if(void 0!==window.dearPdfLocation&&(options.pdfjsSrc=dearPdfLocation+"js/libs/pdf.min.js",options.threejsSrc=dearPdfLocation+"js/libs/three.min.js",options.pdfjsWorkerSrc=dearPdfLocation+"js/libs/pdf.worker.min.js",options.soundFile=dearPdfLocation+options.soundFile,options.imagesLocation=dearPdfLocation+options.imagesLocation,options.imageResourcesPath=dearPdfLocation+options.imageResourcesPath,options.cMapUrl=dearPdfLocation+options.cMapUrl,void 0!==options.pdfVersion)){var pdfDir=options.pdfVersion;"latest"==options.pdfVersion?pdfDir="2.13.216-legacy-dist":"beta"==options.pdfVersion&&(pdfDir="2.12.313-legacy-dist"),"default"!==options.pdfVersion&&(options.pdfjsSrc=dearPdfLocation+"js/libs/pdfjs/"+pdfDir+"/pdf.min.js",options.pdfjsWorkerSrc=dearPdfLocation+"js/libs/pdfjs/"+pdfDir+"/pdf.worker.min.js")}this.executeCallback("onInitResourcesLocation")}},{key:"initEvents",value:function(){var app=this,containerDOM=this.container[0];window.addEventListener("resize",app.events.resize=app.resetResizeRequest.bind(app),!1),containerDOM.addEventListener("mousemove",app.events.mousemove=app.mouseMove.bind(app),!1),containerDOM.addEventListener("mousedown",app.events.mousedown=app.mouseDown.bind(app),!1),window.addEventListener("mouseup",app.events.mouseup=app.mouseUp.bind(app),!1),containerDOM.addEventListener("touchmove",app.events.mousemove=app.mouseMove.bind(app),!1),containerDOM.addEventListener("touchstart",app.events.mousedown=app.mouseDown.bind(app),!1),window.addEventListener("touchend",app.events.mouseup=app.mouseUp.bind(app),!1)}},{key:"mouseMove",value:function(event){event.touches&&event.touches.length>1&&event.preventDefault(),!0===this.viewer.acceptAppMouseEvents&&this.viewer.mouseMove(event)}},{key:"mouseDown",value:function(event){this.userHasInteracted=!0,!0===this.viewer.acceptAppMouseEvents&&0===jQuery(event.srcElement).closest(".dp-sidemenu").length&&this.viewer.mouseDown(event)}},{key:"mouseUp",value:function(event){this.viewer&&!0===this.viewer.acceptAppMouseEvents&&this.viewer.mouseUp(event)}},{key:"dispose",value:function(){var _app$info,_app$loadingIcon,_app$backGround,_app$outlineContainer,_app$commentPopup,app=this,containerDOM=this.container[0];app.provider=app_utils.disposeObject(app.provider),app.viewer=app_utils.disposeObject(app.viewer),app.sideMenu=app_utils.disposeObject(app.sideMenu),app.ui=app_utils.disposeObject(app.ui),app.thumblist=app_utils.disposeObject(app.thumblist),app.outlineViewer=app_utils.disposeObject(app.outlineViewer),this.events&&(window.removeEventListener("resize",app.events.resize,!1),containerDOM.removeEventListener("mousemove",app.events.mousemove,!1),containerDOM.removeEventListener("mousedown",app.events.mousedown,!1),window.removeEventListener("mouseup",app.events.mouseup,!1),containerDOM.removeEventListener("touchmove",app.events.mousemove,!1),containerDOM.removeEventListener("touchstart",app.events.mousedown,!1),window.removeEventListener("touchend",app.events.mouseup,!1)),app.events=null,app.options=null,app.element.removeClass("dp-app"),app.viewerType=null,app.checkRequestQueue=null,null===(_app$info=app.info)||void 0===_app$info||_app$info.remove(),app.info=null,null===(_app$loadingIcon=app.loadingIcon)||void 0===_app$loadingIcon||_app$loadingIcon.remove(),app.loadingIcon=null,null===(_app$backGround=app.backGround)||void 0===_app$backGround||_app$backGround.remove(),app.backGround=null,null===(_app$outlineContainer=app.outlineContainer)||void 0===_app$outlineContainer||_app$outlineContainer.remove(),app.outlineContainer=null,null===(_app$commentPopup=app.commentPopup)||void 0===_app$commentPopup||_app$commentPopup.remove(),app.commentPopup=null,app.viewerContainer.off(),app.viewerContainer.remove(),app.viewerContainer=null,app.container.off(),app.container.remove(),app.container=null,app.element.off(),app.element=null,app._offsetParent=null,app.dimensions=null}},{key:"resetResizeRequest",value:function(){this.resizeRequestStatus=app_REQUEST_STATUS.COUNT,this.resizeRequestCount=0,this.container.addClass("dp-pendingresize"),this.pendingResize=!0}},{key:"initInfo",value:function(){this.info=jQuery("<div>",{class:"dp-loading-info"}),this.container.append(this.info),this.info.html(this.options.text.loading+"..."),this.loadingIcon=jQuery("<div>",{class:"dp-loading-icon"}).appendTo(this.container)}},{key:"updateInfo",value:function(message,className){app_utils.log(message),void 0!==this.info&&this.info.html(message)}},{key:"_documentLoaded",value:function(){app_utils.log("Document Loaded"),this.isDocumentReady=!0,this.executeCallback("onDocumentLoad"),this.endPage=this.pageCount=this.provider.pageCount,this.currentPageNumber=this.getValidPage(this.currentPageNumber),this.requestFinalize()}},{key:"_viewerPrepared",value:function(){app_utils.log("Viewer Prepared"),this.isViewerPrepared=!0,this.executeCallback("onViewerLoad"),this.requestFinalize()}},{key:"requestFinalize",value:function(){!0===this.isDocumentReady&&!0===this.isViewerPrepared&&!0===this.isExternalReady&&!0!==this.finalizeRequested&&(this.finalizeRequested=!0,this.finalize())}},{key:"finalize",value:function(){this.viewer.init(),this.ui=new UI({},this),this.ui.init(),this.resize(),this.ui.update(),this.initEvents(),this.container.removeClass("dp-loading dp-init"),this.viewer.onReady(),this.checkRequestQueue(),this.executeCallback("onReady"),app_utils.focusHash(this.options.dataElement),app_utils.log("App Finalized")}},{key:"initOutline",value:function(){var outlineContainer=jQuery("<div>").addClass("dp-outline-container dp-sidemenu"),outlineWrapper=jQuery("<div>").addClass("dp-wrapper");outlineContainer.append(outlineWrapper),this.sideMenu.element.append(outlineContainer),this.outlineContainer=outlineContainer,this.outlineViewer=new BookMarkViewer({container:outlineWrapper[0],linkService:this.provider.linkService,outlineItemClass:"dp-outline-item",outlineToggleClass:"dp-outline-toggle",outlineToggleHiddenClass:"dp-outlines-hidden"}),this.outlineViewer.render({outline:this.provider.outline})}},{key:"initThumbs",value:function(){var app=this;app.thumblist=new ThumbList({app:app,addFn:function(row){},scrollFn:function(){app.thumbRequestStatus=app_REQUEST_STATUS.ON},itemHeight:app.thumbSize,itemWidth:app_utils.limitAt(Math.floor(app.dimensions.coverPage.ratio*app.thumbSize),32,180),totalRows:app.pageCount}),app.thumblist.lastScrolled=Date.now(),app.thumbRequestStatus=app_REQUEST_STATUS.ON;var thumbContainer=jQuery("<div>").addClass("dp-thumb-container dp-sidemenu");thumbContainer.append(jQuery(app.thumblist.container).addClass("dp-wrapper")),app.thumbContainer=thumbContainer,app.sideMenu.element.append(thumbContainer),app.container.on("click",".dp-thumb-container .dp-thumb",(function(e){e.stopPropagation();var id=jQuery(this).attr("id").replace("dp-thumb","");app.gotoPage(parseInt(id,10))}))}},{key:"checkRequestQueue",value:function(){var app=this;app.checkRequestQueue&&requestAnimationFrame((function(){app&&app.checkRequestQueue&&app.checkRequestQueue()})),app.container&&app.container[0]&&app._offsetParent!==app.container[0].offsetParent&&(app._offsetParent=app.container[0].offsetParent,null!==app._offsetParent&&(app.resize(),app.resizeRequestStatus=app_REQUEST_STATUS.OFF),app_utils.log("Visibility Resize Detected")),(null!==app._offsetParent||app.isFullscreen)&&(TWEEN.getAll().length>0&&(TWEEN.update(),app.renderRequestStatus=app_REQUEST_STATUS.ON),app.resizeRequestStatus===app_REQUEST_STATUS.ON?(app.resizeRequestStatus=app_REQUEST_STATUS.OFF,app.resize()):app.resizeRequestStatus===app_REQUEST_STATUS.COUNT&&(app.resizeRequestCount++,app.resizeRequestCount>10&&(app.resizeRequestCount=0,app.resizeRequestStatus=app_REQUEST_STATUS.ON)),app.refreshRequestStatus===app_REQUEST_STATUS.ON?(app.refreshRequestStatus=app_REQUEST_STATUS.OFF,app.pendingResize=!1,app.viewer.refresh(),this.container.removeClass("dp-pendingresize")):app.refreshRequestStatus===app_REQUEST_STATUS.COUNT&&(app.refreshRequestCount++,app.refreshRequestCount>3&&(app.refreshRequestCount=0,app.refreshRequestStatus=app_REQUEST_STATUS.ON)),app.textureRequestStatus===app_REQUEST_STATUS.ON&&app.processTextureRequest(),app.thumbRequestStatus===app_REQUEST_STATUS.ON?app.processThumbRequest():app.thumbRequestStatus===app_REQUEST_STATUS.COUNT&&(app.thumbRequestCount++,app.thumbRequestCount>3&&(app.thumbRequestCount=0,app.thumbRequestStatus=app_REQUEST_STATUS.ON)),app.renderRequestStatus===app_REQUEST_STATUS.ON&&(app.viewer.render(),app.renderRequestStatus=app_REQUEST_STATUS.OFF),app.provider.checkRequestQueue(),app.viewer.checkRequestQueue())}},{key:"processTextureRequest",value:function(){var page,textureSize,viewer=this.viewer,provider=this.provider,visible=viewer.getVisiblePages().main,requestCount=0,zoomView=this.zoomValue>1;if(viewer.isAnimating())this.textureRequestStatus=app_REQUEST_STATUS.ON;else{app_utils.log("Texture Request Working");for(var i=0;i<visible.length;i++){requestCount=0;var pageNumber=visible[i];if(pageNumber>0&&pageNumber<=this.pageCount&&((page=zoomView?viewer.zoomViewer.getPageByNumber(pageNumber):viewer.getPageByNumber(pageNumber))&&(textureSize=viewer.getTextureSize({pageNumber:pageNumber}),textureSize=app_utils.limitAt(textureSize,1,this.dimensions.maxTextureHeight),page.changeTexture(pageNumber,Math.floor(textureSize.height))&&(provider.processPage({pageNumber:pageNumber,textureTarget:zoomView?app_DEARPDF.TEXTURE_TARGET.ZOOM:app_DEARPDF.TEXTURE_TARGET.VIEWER}),requestCount++,this.viewer.getAnnotationElement(pageNumber,!0))),requestCount>0))break}0===requestCount&&(this.textureRequestStatus=app_REQUEST_STATUS.OFF)}}},{key:"applyTexture",value:function(canvas,param){if(param.textureTarget===app_DEARPDF.TEXTURE_TARGET.THUMB){var src=canvas.toDataURL("image/png");this.provider.setCache(param.pageNumber,src,this.thumbSize),param.height=canvas.height,param.width=canvas.width,param.texture=src,this.thumblist.setPage(param)}else param.texture=canvas,!0===this.viewer.setPage(param)&&(this.provider.processAnnotations(param.pageNumber,this.viewer.getAnnotationElement(param.pageNumber,!0)),this.provider.processTextContent(param.pageNumber,this.viewer.getTextElement(param.pageNumber,!0)))}},{key:"processThumbRequest",value:function(){null!==this.thumblist&&void 0!==this.thumblist&&this.thumblist.processThumbRequest()}},{key:"refreshRequestStart",value:function(){this.refreshRequestStatus=app_REQUEST_STATUS.COUNT,this.refreshRequestCount=0}},{key:"renderRequestStart",value:function(){this.renderRequestStatus=app_REQUEST_STATUS.ON}},{key:"resizeRequestStart",value:function(){this.resizeRequestStatus=app_REQUEST_STATUS.ON}},{key:"zoom",value:function(delta){this.pendingZoom=!0,this.zoomDelta=delta,this.resize()}},{key:"resize",value:function(){var _jQuery$height,_app$options$headerEl,textureRefresh=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];app_utils.log("Resize Request Initiated");var app=this,isSideMenuOpen=app.container.hasClass("dp-sidemenu-open"),dimensions=app.dimensions,padding=app.dimensions.padding,windowHeight=jQuery(window).height();dimensions.offset={top:0,left:app.options.sideMenuOverlay||!isSideMenuOpen||app.isRTL?0:220,right:!app.options.sideMenuOverlay&&isSideMenuOpen&&app.isRTL?220:0,bottom:0,width:!app.options.sideMenuOverlay&&isSideMenuOpen?220:0},app.viewerContainer.css({left:dimensions.offset.left,right:dimensions.offset.right});var controlsHeight=dimensions.controlsHeight=app.container.find(".dp-ui").height();if(padding.top=app.options.paddingTop+(app.options.controlsPosition===app_DEARPDF.CONTROLS_POSITION.TOP?controlsHeight:0),padding.left=app.options.paddingLeft,padding.right=app.options.paddingRight,padding.bottom=app.options.paddingBottom+(app.options.controlsPosition===app_DEARPDF.CONTROLS_POSITION.BOTTOM?controlsHeight:0),padding.height=padding.top+padding.bottom,padding.width=padding.left+padding.right,padding.heightDiff=padding.top-padding.bottom,padding.widthDiff=padding.left-padding.right,dimensions.isFullSize=!0===app.isFullscreen,dimensions.isFixedHeight=dimensions.isFullSize||!dimensions.isAutoHeight,dimensions.containerWidth=dimensions.isFullSize?jQuery(window).width():this.element.width(),app.container.toggleClass("dp-xs",dimensions.containerWidth<400).toggleClass("dp-xss",dimensions.containerWidth<320),dimensions.maxHeight=windowHeight-(dimensions.containerWidth>600&&null!==(_jQuery$height=jQuery(null!==(_app$options$headerEl=app.options.headerElementSelector)&&void 0!==_app$options$headerEl?_app$options$headerEl:"#wpadminbar").height())&&void 0!==_jQuery$height?_jQuery$height:0),dimensions.isFixedHeight)if(dimensions.isFullSize)dimensions.maxHeight=windowHeight;else{app.element.height(app.options.height);var _height=app.element.height();dimensions.maxHeight=Math.min(_height,dimensions.maxHeight)}dimensions.width,dimensions.stage.innerWidth=this.viewer._getInnerWidth();var innerHeight=dimensions.stage.innerHeight=this.viewer._getInnerHeight(),outerHeight=this.viewer._getOuterHeight(innerHeight+dimensions.padding.height);dimensions.containerHeight=dimensions.isFullSize?windowHeight:outerHeight,app.element.height(dimensions.containerHeight);var testHeight=app.element.height();dimensions.isFullSize||testHeight==dimensions.containerHeight||(dimensions.containerHeight=testHeight,dimensions.stage.innerHeight=testHeight-dimensions.padding.height,dimensions.stage.height=testHeight),dimensions.origin={x:(padding.widthDiff+dimensions.containerWidth-dimensions.offset.left-dimensions.offset.right)/2,y:(padding.heightDiff+dimensions.containerHeight)/2},app.viewer.handleZoom(),app.viewer.resize(),!1!==textureRefresh&&(app.pendingZoom?(this.viewer.refresh(),this.ui.update(),app_utils.log("Pending Zoom updated")):this.refreshRequestStart(),this.renderRequestStatus=app_REQUEST_STATUS.ON,app.zoomChanged=!1,app.pendingZoom=!1,this.executeCallback("afterResize"))}},{key:"hasOutline",value:function(){if(this.provider.outline.length>0)return!0}},{key:"switchFullscreen",value:function(){var _app$ui,_app$ui$controls,app=this,element=app.container[0];if(app.container.toggleClass("dp-fullscreen",!0!==app.isFullscreen),(null==app||null===(_app$ui=app.ui)||void 0===_app$ui||null===(_app$ui$controls=_app$ui.controls)||void 0===_app$ui$controls?void 0:_app$ui$controls.fullscreen)&&app.ui.controls.fullScreen.toggleClass(app.options.icons["fullscreen-off"],!0!==app.isFullscreen),!0!==app.isFullscreen){var _promise=null;element.requestFullscreen?_promise=element.requestFullscreen():element.msRequestFullscreen?_promise=element.msRequestFullscreen():element.mozRequestFullScreen?_promise=element.mozRequestFullScreen():element.webkitRequestFullscreen&&(_promise=element.webkitRequestFullscreen()),_promise&&_promise.then&&_promise.then((function(){app.refreshRequestStatus,app_REQUEST_STATUS.ON,app.resize()})),app.isFullscreen=!0}else app.isFullscreen=!1,document.exitFullscreen?document.fullscreenElement&&document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();app_utils.hasFullscreenEnabled()||(app.resizeRequestStatus=app_REQUEST_STATUS.ON)}},{key:"next",value:function(){this.jumpBy(this.jumpStep)}},{key:"prev",value:function(){this.jumpBy(-this.jumpStep)}},{key:"jumpBy",value:function(step){var nextPage=this.currentPageNumber+step;nextPage=app_utils.limitAt(nextPage,this.startPage,this.endPage),this.gotoPage(nextPage),this.ui.update()}},{key:"openRight",value:function(){this.isRTL?this.prev():this.next()}},{key:"openLeft",value:function(){this.isRTL?this.next():this.prev()}},{key:"start",value:function(){this.gotoPage(this.startPage)}},{key:"end",value:function(){this.gotoPage(this.endPage)}},{key:"gotoPage",value:function(pageNumber){var app=this;pageNumber=app.getValidPage(parseInt(pageNumber,10)),null!==app.viewer&&!1!==app.viewer.validatePageChange(pageNumber)&&(app.oldPageNumber=app.currentPageNumber,app.currentPageNumber=pageNumber,app.thumbRequestStatus=app_REQUEST_STATUS.ON,app.viewer.gotoPageCallBack&&app.viewer.gotoPageCallBack(),app.ui.update(),this.executeCallback("onPageChanged"))}},{key:"getValidPage",value:function(pageNumber){return isNaN(pageNumber)?pageNumber=this.currentPageNumber:pageNumber<1?pageNumber=1:pageNumber>this.pageCount&&(pageNumber=this.pageCount),pageNumber}},{key:"getURLHash",value:function(){if(null!=this.options.id){var hash=app_utils.getSharePrefix(this.options.sharePrefix)+(null!=this.options.slug?this.options.slug:this.options.id)+"/";null!=this.currentPageNumber&&(hash+=this.currentPageNumber+"/"),window.location.hash=hash}return window.location.href}},{key:"executeCallback",value:function(callbackName){}}])&&app_defineProperties(Constructor.prototype,protoProps),staticProps&&app_defineProperties(Constructor,staticProps),App}();app_DEARPDF.Application=function(options){options.element instanceof jQuery||(options.element=jQuery(options.element));var element=options.element;null==options.dataElement&&(options.dataElement=element);var dataElement=options.dataElement,elementOptions=app_DEARPDF.utils.getOptions(dataElement),customOptions=jQuery.extend(!0,{},app_DEARPDF.defaults,options,elementOptions);customOptions=app_utils.fallbackOptions(customOptions),app_utils.log(customOptions);var opts=jQuery.extend(!0,{},app_DEARPDF._defaults,customOptions);app_utils.isMobile&&"function"==typeof app_DEARPDF.viewers[opts.mobileViewerType]&&(opts.viewerType=opts.mobileViewerType),"function"!=typeof app_DEARPDF.viewers[opts.viewerType]?(console.warn("Invalid Viewer Type! "+opts.viewerType+" | Using default Viewer!"),opts.viewerType=app_DEARPDF.viewers.default):opts.viewerType=app_DEARPDF.viewers[opts.viewerType];var app=new app_App(app_utils.sanitizeOptions(opts));return null!=opts.id&&!0!==opts.isLightBox&&(window[opts.id.toString()]=app),app},jQuery.fn.extend({dearpdf:function(options){return null==options&&(options={}),options.element=jQuery(this),new app_DEARPDF.Application(options)}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Reader}));var _base_viewer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_page_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var DEARPDF=window.DEARPDF,utils=DEARPDF.utils,Reader=function(_BaseViewer){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Reader,_BaseViewer);var Constructor,protoProps,staticProps,_super=_createSuper(Reader);function Reader(options,appContext){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Reader),options.viewerClass="dp-reader",appContext.options.mouseScrollAction=DEARPDF.MOUSE_SCROLL_ACTIONS.NONE,(_this=_super.call(this,options,appContext)).app.jumpStep=1,_this.minZoom=.25,_this.stackCount=_this.app.pageCount,_this.app.options.paddingLeft=0,_this.app.options.paddingRight=0,_this.app.options.paddingTop=10,_this.app.options.paddingBottom=!0===_this.app.options.controlsFloating?20:10,_this.app.pageScaling=_this.app.options.pageScale,_this.acceptAppMouseEvents=!0,_this.scrollStatus=DEARPDF.REQUEST_STATUS.OFF,_this.deltaPanX=0,_this.deltaPanY=0,appContext._viewerPrepared(),_this.zoomViewer=_assertThisInitialized(_this),_this}return Constructor=Reader,(protoProps=[{key:"init",value:function(){_get(_getPrototypeOf(Reader.prototype),"init",this).call(this),this.initEvents(),this.initPages(),this.initScrollBar()}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],_get(_getPrototypeOf(Reader.prototype),"initEvents",this).call(this)}},{key:"initPages",value:function(){this.stackCount=this.app.pageCount;for(var count=0;count<this.stackCount;count++){var page=new _page_js__WEBPACK_IMPORTED_MODULE_1__.a({parentElement:this.wrapper});page.index=count,page.viewer=this,this.pages.push(page)}}},{key:"initScrollBar",value:function(){this.scrollBar=jQuery("<div class='dp-reader-scrollbar'>"),this.scrollBar.appendTo(this.app.container),this.scrollPageNumber=jQuery("<div class='dp-reader-scroll-page-number'>").appendTo(this.app.container)}},{key:"afterControlUpdate",value:function(){this.scrollBar[0].innerHTML=this.app.currentPageNumber,this.scrollPageNumber[0].innerHTML=this.app.currentPageNumber+"<div>of "+this.app.pageCount+"</div>"}},{key:"updateBuffer",value:function(page){if("-1"!==page.textureStamp&&void 0!==page.pageNumber){for(var index=page.pageNumber,farthest=page.pageNumber,farthestIndex=0,count=0;count<this.pageBuffer.length;count++){var _pageNumber=this.pageBuffer[count].pageNumber;if(index===_pageNumber)return void utils.log("Page "+index+" already in buffer, skipping");Math.abs(this.app.currentPageNumber-_pageNumber)>Math.abs(this.app.currentPageNumber-farthest)&&(farthest=_pageNumber,farthestIndex=count)}this.pageBuffer.push(page),this.pageBuffer.length>this.pageBufferSize&&(utils.log("Farthest buffer: "+farthest),this.pageBuffer[farthestIndex].reset(),this.pageBuffer.splice(farthestIndex,1))}}},{key:"initCustomControls",value:function(){var controls=this.app.ui.controls;controls.openRight.hide(),controls.openLeft.hide()}},{key:"dispose",value:function(){_get(_getPrototypeOf(Reader.prototype),"dispose",this).call(this),this.scrollBar&&this.scrollBar.remove(),this.scrollPageNumber&&this.scrollPageNumber.remove(),this.element.remove()}},{key:"_getInnerHeight",value:function(){_get(_getPrototypeOf(Reader.prototype),"_getInnerHeight",this).call(this);var appHeight=this.app.dimensions.maxHeight-this.app.dimensions.padding.height,viewPort=this.app.dimensions.coverPage.viewPort,maxWidth=this.app.dimensions.containerWidth-20;this.app.pageScaling===DEARPDF.PAGE_SCALE.ACTUAL&&(maxWidth=1*this.app.provider.coverPage.viewPort.width);var maxHeight=appHeight;return this.app.pageScaling===DEARPDF.PAGE_SCALE.PAGE_WIDTH?maxHeight=100*viewPort.height:this.app.pageScaling===DEARPDF.PAGE_SCALE.AUTO?maxHeight=1.5*viewPort.height:this.app.pageScaling===DEARPDF.PAGE_SCALE.ACTUAL&&(maxHeight=1*viewPort.height),maxHeight-=2,this._containCover=utils.contain(100*viewPort.width,100*viewPort.height,maxWidth,maxHeight),maxHeight=Math.min(appHeight,this._containCover.height+2),this.app.pageScaleValue=this._containCover.height/viewPort.height,this.app.dimensions.isFixedHeight?appHeight:maxHeight}},{key:"handleZoom",value:function(){var app=this.app,maxZoom=this.maxZoom=4,zoomValue=app.zoomValue;!0===app.pendingZoom&&null!=app.zoomDelta?zoomValue=app.zoomDelta>0?zoomValue*app.options.zoomRatio:zoomValue/app.options.zoomRatio:null!=this.lastScale&&(zoomValue*=this.lastScale,this.lastScale=null),zoomValue=utils.limitAt(zoomValue,this.minZoom,maxZoom),app.zoomValueChange=zoomValue/app.zoomValue,app.zoomChanged=app.zoomValue!==zoomValue,app.zoomValue=zoomValue}},{key:"resize",value:function(){var app=this.app,padding=(app.dimensions,app.dimensions.padding),shiftHeight=this.shiftHeight=0;this.element.css({top:-shiftHeight,bottom:-shiftHeight,right:-0,left:-0,paddingTop:padding.top,paddingRight:padding.right,paddingBottom:padding.bottom,paddingLeft:padding.left});for(var topVisiblePage=this.pages[this.getVisiblePages().main[0]-1].element[0],rect=topVisiblePage.getBoundingClientRect(),rectParent=this.parentElement[0].getBoundingClientRect(),count=0;count<this.pages.length;count++){var page=this.pages[count],viewPort=this.getViewPort(count+1,!0),els=page.element[0].style;els.height=Math.floor(viewPort.height*app.pageScaleValue*app.zoomValue)+"px",els.width=Math.floor(viewPort.width*app.pageScaleValue*app.zoomValue)+"px"}if(this.oldScrollHeight!=this.element[0].scrollHeight&&void 0!==this.oldScrollHeight){var _this$zoomCenter,delta=this.element[0].scrollHeight/this.oldScrollHeight;this.skipScrollCheck=!0;var top=topVisiblePage.offsetTop+topVisiblePage.clientTop-(rect.top-rectParent.top+topVisiblePage.clientTop)*delta,left=topVisiblePage.offsetLeft+topVisiblePage.clientLeft-(rect.left-rectParent.left+topVisiblePage.clientLeft)*delta;top+=10*(delta-1)/2,left+=10*(delta-1)/2,this.zoomCenter=null!==(_this$zoomCenter=this.zoomCenter)&&void 0!==_this$zoomCenter?_this$zoomCenter:{x:0,y:0},top+=(delta-1)*this.zoomCenter.y,left+=(delta-1)*this.zoomCenter.x,this.zoomCenter=null,this.element[0].scrollTop=top,this.element[0].scrollLeft=left,this.skipScrollCheck=!1}this.oldScrollHeight=this.element[0].scrollHeight,this.scrollBar[0].style.transform="none",this.updateScrollBar()}},{key:"onReady",value:function(){this.gotoPageCallBack(),this.oldScrollHeight=this.element[0].scrollHeight}},{key:"refresh",value:function(){for(var app=this.app,visible=this.getVisiblePages().main,_pageCount=0;_pageCount<visible.length;_pageCount++){var page=void 0,_pageNumber=visible[_pageCount];_pageNumber!==(page=this.pages[_pageNumber-1]).pageNumber&&(page.resetTexture(),this.app.textureRequestStatus=DEARPDF.REQUEST_STATUS.ON),page.element.attr("number",_pageNumber),page.pageNumber=_pageNumber}this.requestRefresh(!1),app.textureRequestStatus=DEARPDF.REQUEST_STATUS.ON}},{key:"isAnimating",value:function(){return this.scrollStatus===DEARPDF.REQUEST_STATUS.ON||this.scrollStatus===DEARPDF.REQUEST_STATUS.COUNT}},{key:"checkRequestQueue",value:function(){_get(_getPrototypeOf(Reader.prototype),"checkRequestQueue",this).call(this),this.scrollStatus===DEARPDF.REQUEST_STATUS.ON&&(this.scrollStatus=DEARPDF.REQUEST_STATUS.OFF),this.scrollStatus===DEARPDF.REQUEST_STATUS.COUNT&&(this.scrollStatus=DEARPDF.REQUEST_STATUS.ON)}},{key:"getVisiblePages",value:function(){var visiblePages=utils.getVisibleElements({container:this.element[0],elements:this.wrapper[0].children});return 0===visiblePages.length&&(visiblePages=[this.app.currentPageNumber]),{main:visiblePages,buffer:[]}}},{key:"getPageByNumber",value:function(pageNumber){var page=this.pages[pageNumber-1];return void 0===page&&utils.log("Page Not found for: "+pageNumber),page}},{key:"onScroll",value:function(event){for(var center=this.element[0].scrollTop+this.app.dimensions.containerHeight/2,visible=this.getVisiblePages().main,pageIndex=visible[0],i=0;i<visible.length;i++){pageIndex=visible[i];var element=this.pages[pageIndex-1].element[0],top=element.offsetTop+element.clientTop;if(top<=center&&element.clientHeight+top>=center)break;if(i>0&&top>center&&element.clientHeight+top>=center){pageIndex=visible[i-1];break}}this.skipScrollIntoView=!0,this.app.gotoPage(pageIndex),this.skipScrollIntoView=!1,this.updateScrollBar(),event.preventDefault&&event.preventDefault(),event.stopPropagation(),this.requestRefresh(),this.scrollStatus=DEARPDF.REQUEST_STATUS.COUNT,DEARPDF.handlePopup(this.element,!1)}},{key:"updateScrollBar",value:function(){var el=this.element[0],y=(this.app.container[0],el.scrollLeft,60+(el.offsetHeight-40-60-60)*el.scrollTop/(el.scrollHeight-el.offsetHeight));isNaN(y)&&(y=60),this.scrollBar.lastY=y,this.scrollBar[0].style.transform="translateY("+y+"px)"}},{key:"validatePageChange",value:function(pageNumber){}},{key:"gotoPageCallBack",value:function(){if(!0!==this.skipScrollIntoView){var page=this.getPageByNumber(this.app.currentPageNumber);null!=page&&utils.scrollIntoView(page.element[0],this.element[0])}this.skipScrollIntoView=!1,this.requestRefresh()}},{key:"getTextureSize",value:function(param){var viewPort=this.app.provider.viewPorts[1];return this.app.provider.viewPorts[param.pageNumber]&&(viewPort=this.app.provider.viewPorts[param.pageNumber]),{height:viewPort.height*this.app.zoomValue*this.app.pageScaleValue*window.devicePixelRatio,width:viewPort.width*this.app.zoomValue*this.app.pageScaleValue*window.devicePixelRatio}}},{key:"textureLoadedCallback",value:function(param){var page=this.getPageByNumber(param.pageNumber),app=this.app,viewPort=this.getViewPort(param.pageNumber,!0);page.element.height(Math.floor(viewPort.height*app.pageScaleValue*app.zoomValue)).width(Math.floor(viewPort.width*app.pageScaleValue*app.zoomValue))}},{key:"pan",value:function(point){var reset=arguments.length>1&&void 0!==arguments[1]&&arguments[1],viewer=this,origin=viewer.startPoint,deltay=point.raw.y-origin.raw.y,deltax=point.raw.x-origin.raw.x;viewer.deltaPanY+=deltay,viewer.deltaPanX+=deltax,viewer.panRequestStatus=DEARPDF.REQUEST_STATUS.ON,!1===reset&&(viewer.startPoint=point)}},{key:"updatePan",value:function(){this.element[0].scrollTop=this.element[0].scrollTop-this.deltaPanY,this.element[0].scrollLeft=this.element[0].scrollLeft-this.deltaPanX,this.deltaPanY=0,this.deltaPanX=0}},{key:"mouseMove",value:function(event){if(this.startPoint&&this.isScrollBarPressed){var _event=utils.fixMouseEvent(event),point=this.eventToPoint(_event),el=this.element[0],estY=this.scrollBar.lastY-(this.startPoint.raw.y-point.raw.y);return this.scrollBar.lastY=estY,el.scrollTop=(estY-60)*(el.scrollHeight-el.offsetHeight)/(el.offsetHeight-40-60-60),this.startPoint=point,void event.preventDefault()}event.touches&&event.touches.length<2||_get(_getPrototypeOf(Reader.prototype),"mouseMove",this).call(this,event)}},{key:"mouseDown",value:function(event){_get(_getPrototypeOf(Reader.prototype),"mouseDown",this).call(this,event),event.srcElement===this.scrollBar[0]&&(this.isScrollBarPressed=!0,this.scrollBar.addClass("dp-active"),this.scrollPageNumber.addClass("dp-active"))}},{key:"mouseUp",value:function(event){_get(_getPrototypeOf(Reader.prototype),"mouseUp",this).call(this,event),(this.isScrollBarPressed=this.scrollBar)&&(this.isScrollBarPressed=!1,this.scrollBar.removeClass("dp-active"),this.scrollPageNumber.removeClass("dp-active"))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Reader}(_base_viewer_js__WEBPACK_IMPORTED_MODULE_0__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FlipBook2D}));var _flipbook_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_page_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var DP=window.DEARPDF,utils=DP.utils,BookSheet2D=function(_BookSheet){_inherits(BookSheet2D,_BookSheet);var _super=_createSuper(BookSheet2D);function BookSheet2D(options){var _this;return _classCallCheck(this,BookSheet2D),(_this=_super.call(this,options)).init(),_this}return _createClass(BookSheet2D,[{key:"init",value:function(){var div="<div>",element=this.element=jQuery(div,{class:"dp-sheet"}),frontPage=this.frontPage=new _page_js__WEBPACK_IMPORTED_MODULE_1__.a;frontPage.element.addClass("dp-page-front");var backPage=this.backPage=new _page_js__WEBPACK_IMPORTED_MODULE_1__.a;backPage.element.addClass("dp-page-back");var wrapper=this.wrapper=jQuery(div,{class:"dp-sheet-wrapper"}),foldInnerShadow=this.foldInnerShadow=jQuery(div,{class:"dp-sheet-fold-inner-shadow"}),foldOuterShadow=this.foldOuterShadow=jQuery(div,{class:"dp-sheet-fold-outer-shadow"});this.parentElement.append(element),element.append(wrapper),element.append(foldOuterShadow),wrapper.append(frontPage.element),wrapper.append(backPage.element),wrapper.append(foldInnerShadow)}},{key:"updateCSS",value:function(css){this.element.css(css)}},{key:"resetCSS",value:function(){this.wrapper.css({transform:""}),this.frontPage.resetCSS(),this.backPage.resetCSS()}},{key:"updateSize",value:function(width,height,top){width=Math.floor(width),height=Math.floor(height),top=Math.floor(top),this.wrapper[0].style.height=this.wrapper[0].style.width=Math.ceil(utils.distOrigin(width,height)*this.viewer.app.zoomValue)+"px",this.element[0].style.height=this.frontPage.element[0].style.height=this.backPage.element[0].style.height=this.foldInnerShadow[0].style.height=height+"px",this.element[0].style.width=this.frontPage.element[0].style.width=this.backPage.element[0].style.width=this.foldInnerShadow[0].style.width=width+"px",this.element[0].style.transform="translateY("+top+"px)"}},{key:"flip",value:function(point){var sheet=this;if(point=point||sheet.pendingPoint,null!=sheet&&null!=sheet.viewer){sheet.isFlipping=!0,sheet.viewer.flipPage=sheet;var init,end,isBooklet=sheet.viewer.isBooklet,isRight=sheet.side===DEARPDF.TURN_DIRECTION.RIGHT,isRTL=sheet.viewer.isRTL,travelY=sheet.viewer.corner===DEARPDF.TURN_CORNER.BL||sheet.viewer.corner===DEARPDF.TURN_CORNER.BR?sheet.element.height():0,fullWidth=2*sheet.element.width(),angle=0;end=sheet.end=sheet&&!0===sheet.animateToReset?{x:isRight?fullWidth:0,y:travelY}:{x:isRight?0:fullWidth,y:travelY},sheet.flipEasing=sheet.isHard?TWEEN.Easing.Quadratic.InOut:TWEEN.Easing.Linear.None;var flipDuration=sheet.viewer.app.options.duration;!0===sheet.isHard?(null!=point&&(angle=utils.angleByDistance(point.distance,point.fullWidth)),init=sheet.init={angle:angle*(isRight?-1:1)},end=sheet.end=sheet&&!0===sheet.animateToReset?{angle:isRight?0:-0}:{angle:isRight?-180:180}):null==point?init=sheet.init=sheet&&!0===sheet.animateToReset?{x:isRight?0:fullWidth,y:0}:{x:isRight?fullWidth:0,y:0}:(init=sheet.init={x:point.x,y:point.y,opacity:1},flipDuration=sheet.viewer.app.options.duration*utils.distPoints(init.x,init.y,end.x,end.y)/sheet.viewer.fullWidth,flipDuration=utils.limitAt(flipDuration,sheet.viewer.app.options.duration/3,sheet.viewer.duration)),init.index=0,end.index=1,sheet.isFlipping=!0,isBooklet&&(!isRight&&!isRTL||isRight&&isRTL)&&(sheet.element[0].style.opacity=0),!0===sheet.isHard?sheet.currentTween=new TWEEN.Tween(init).delay(0).to(end,sheet.viewer.app.options.duration).onUpdate((function(){sheet.updateTween(this)})).easing(sheet.flipEasing).onComplete(sheet.completeTween.bind(sheet)).start():sheet.currentTween=null==point?new TWEEN.Tween(init).delay(0).to(end,sheet.viewer.app.options.duration).onUpdate((function(){sheet.updateTween(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(sheet.completeTween.bind(sheet)).start():new TWEEN.Tween(init).delay(0).to(end,flipDuration).onUpdate((function(){sheet.updateTween(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(sheet.completeTween.bind(sheet)).start()}}},{key:"updatePoint",value:function(point){if(null!=point){var pageWidth=this.element.width(),pageHeight=this.element.height(),corner=this.viewer.corner!==DEARPDF.TURN_CORNER.NONE?this.viewer.corner:point.corner,corners=DEARPDF.TURN_CORNER,isRight=this.side===DEARPDF.TURN_DIRECTION.RIGHT,isBottom=corner===corners.BL||corner===corners.BR;point.rx=!0===isRight?2*pageWidth-point.x:point.x,point.ry=!0===isBottom?pageHeight-point.y:point.y;var radAngle=Math.atan2(point.ry,point.rx);radAngle=Math.PI/2-utils.limitAt(radAngle,0,utils.toRad(90));var correctionX=isRight?point.x/2:pageWidth-point.x/2,correctionY=point.ry/2,refLength=Math.max(0,Math.sin(radAngle-Math.atan2(correctionY,correctionX))*utils.distOrigin(correctionX,correctionY)),foldLength=.5*utils.distOrigin(point.rx,point.ry),x=Math.ceil(pageWidth-refLength*Math.sin(radAngle)),y=Math.ceil(refLength*Math.cos(radAngle)),angle=utils.toDeg(radAngle),angle1=isBottom?isRight?90-angle+180:180+angle:isRight?angle:90-angle,angle2=isBottom?isRight?90-angle+180:angle:isRight?angle+180:angle1,angleS=isBottom?isRight?90-angle:angle+90:isRight?angle1-90:angle1+180,x1=isRight?pageWidth-x:x,y1=isBottom?pageHeight+y:-y,x2=isRight?-x:x-pageWidth,y2=isBottom?-pageHeight-y:y,opacity=utils.limitAt(.5*point.distance/pageWidth,0,.5),foldOpacity=utils.limitAt(.5*(2*pageWidth-point.rx)/pageWidth,.05,.3);this.element.addClass("dp-folding");var front=isRight?this.backPage.element:this.frontPage.element,back=isRight?this.frontPage.element:this.backPage.element,outerShadow=this.foldOuterShadow,innerShadow=this.foldInnerShadow;this.wrapper.css({transform:utils.translateStr(x1,y1)+utils.rotateStr(angle1)}),back.css({transform:utils.rotateStr(-angle1)+utils.translateStr(-x1,-y1)}),front.css({transform:utils.rotateStr(angle2)+utils.translateStr(x2,y2),boxShadow:"rgba(0, 0, 0, "+opacity+") 0px 0px 20px"}),innerShadow.css({transform:utils.rotateStr(angle2)+utils.translateStr(x2,y2),opacity:foldOpacity/2,backgroundImage:utils.prefix.css+"linear-gradient( "+angleS+"deg, rgba(0, 0, 0, 0.25) , rgb(0, 0, 0) "+.7*foldLength+"px, rgb(255, 255, 255) "+foldLength+"px)"}),outerShadow.css({opacity:foldOpacity/2,left:isRight?"auto":0,right:isRight?0:"auto",backgroundImage:utils.prefix.css+"linear-gradient( "+(180-angleS)+"deg, rgba(0, 0, 0,0) "+foldLength/3+"px, rgb(0, 0, 0) "+foldLength+"px)"})}}},{key:"updateAngle",value:function(angle,isRight){var width=5*this.element.width();this.wrapper.css({perspective:width,perspectiveOrigin:!0===isRight?"0% 50%":"100% 50%"}),this.element.addClass("dp-folding"),this.backPage.updateCSS({display:!0===isRight?angle<=-90?"block":"none":angle<90?"block":"none",transform:("MfS"!==utils.prefix.dom?"":"perspective("+width+"px) ")+(!0===isRight?"translateX(-100%) ":"")+"rotateY("+((!0===isRight?180:0)+angle)+"deg)"}),this.frontPage.updateCSS({display:!0===isRight?angle>-90?"block":"none":angle>=90?"block":"none",transform:("MSd"!==utils.prefix.dom?"":"perspective("+width+"px) ")+(!1===isRight?"translateX(100%) ":"")+"rotateY("+((!1===isRight?-180:0)+angle)+"deg)"})}},{key:"updateTween",value:function(tween){var isBooklet=this.viewer.isBooklet,isRight=this.side===DEARPDF.TURN_DIRECTION.RIGHT,isRTL=this.viewer.isRTL,isReset=!0===this.animateToReset;!0===this.isHard?(this.updateAngle(tween.angle,isRight),this.angle=tween.angle):(this.updatePoint({x:tween.x,y:tween.y}),this.x=tween.x,this.y=tween.y),isBooklet&&!isReset&&(this.element[0].style.opacity=isRight&&!isRTL||!isRight&&isRTL?tween.index>.5?2*(1-tween.index):1:tween.index<.5?2*tween.index:1)}},{key:"completeTween",value:function(){!0===this.isHard?(this.updateAngle(this.end.angle),this.backPage.element.css({display:"block"}),this.frontPage.element.css({display:"block"})):this.updatePoint({x:this.end.x,y:this.end.y}),this.element[0].style.opacity=1,!0!==this.animateToReset&&(this.side=this.targetSide),this.reset(),this.viewer.afterFlip(),this.viewer.requestRefresh()}}]),BookSheet2D}(_flipbook_js__WEBPACK_IMPORTED_MODULE_0__.b),FlipBook2D=function(_BaseFlipBookViewer){_inherits(FlipBook2D,_BaseFlipBookViewer);var _super2=_createSuper(FlipBook2D);function FlipBook2D(options,appContext){var _this2;return _classCallCheck(this,FlipBook2D),options.viewerClass="dp-flipbook-2d",options.skipViewerLoaded=!0,(_this2=_super2.call(this,options,appContext)).bookShadow=jQuery("<div>",{class:"dp-book-shadow"}),_this2.wrapper.append(_this2.bookShadow),appContext._viewerPrepared(),_this2}return _createClass(FlipBook2D,[{key:"init",value:function(){_get(_getPrototypeOf(FlipBook2D.prototype),"init",this).call(this),this.initEvents(),this.initPages()}},{key:"initEvents",value:function(){this.stageDOM=this.element[0],_get(_getPrototypeOf(FlipBook2D.prototype),"initEvents",this).call(this)}},{key:"dispose",value:function(){_get(_getPrototypeOf(FlipBook2D.prototype),"dispose",this).call(this),this.element.remove()}},{key:"initPages",value:function(){for(var count=0;count<6;count++){var sheet=new BookSheet2D({parentElement:this.wrapper});sheet.index=count,sheet.viewer=this,this.sheets.push(sheet),this.pages.push(sheet.frontPage),this.pages.push(sheet.backPage)}}},{key:"resize",value:function(){_get(_getPrototypeOf(FlipBook2D.prototype),"resize",this).call(this);var dimensions=this.app.dimensions,padding=dimensions.padding,zoomHeight=this.availablePageHeight(),zoomWidth=this.availablePageWidth(),zoomFullWidth=this.fullWidth=2*zoomWidth,stageWidth=dimensions.width,stageHeight=dimensions.height,shiftHeight=this.shiftHeight=Math.ceil(utils.limitAt((zoomHeight-stageHeight+padding.height)/2,0,zoomHeight)),shiftWidth=this.shiftWidth=Math.ceil(utils.limitAt((zoomFullWidth-stageWidth+padding.width)/2,0,zoomFullWidth));1===this.app.zoomValue&&(this.left=0,this.top=0),void 0===this.rightSheetHeight&&(this.rightSheetHeight=this._containCover.height,this.leftSheetHeight=this._containCover.height,this.leftSheetWidth=this._containCover.width,this.rightSheetWidth=this._containCover.width,this.leftSheetTop=this.rightSheetTop=(zoomHeight-this._containCover.height)/2),this.element.css({top:-shiftHeight,bottom:-shiftHeight,right:-shiftWidth,left:-shiftWidth,paddingTop:padding.top,paddingRight:padding.right,paddingBottom:padding.bottom,paddingLeft:padding.left,transform:"translate3d("+this.left+"px,"+this.top+"px,0)"}),this.wrapper.css({marginTop:Math.max(dimensions.height-zoomHeight-padding.height)/2,height:zoomHeight,width:zoomFullWidth-zoomFullWidth%2}),this.zoomViewer.resize(),this.centerNeedsUpdate=!0,this.checkCenter(!0),this.pagesReady()}},{key:"updateCenter",value:function(){var skipTransition=arguments.length>0&&void 0!==arguments[0]&&arguments[0],viewer=this,centerShift=viewer.centerShift,width=(viewer.isRTL,this.isLeftPage()?this.leftSheetWidth:this.rightSheetWidth),end=centerShift*width/2;viewer.seamPosition=(-viewer.app.dimensions.offset.width+viewer.app.dimensions.containerWidth)/2+end,viewer.wrapperShift=(viewer.isSingle?-viewer.app.dimensions.stage.innerWidth/2:0)+end,viewer.wrapper[0].style.left=viewer.wrapperShift+"px",viewer.wrapper[0].style.transition=skipTransition?"none":"",this.zoomViewer.updateCenter()}},{key:"refreshSheet",value:function(options){var _sheet=options.sheet,sheetPageNumber=options.sheetNumber;!1===_sheet.isFlipping&&(options.needsFlip?(this.beforeFlip(),_sheet.element.addClass("dp-flipping"),_sheet.flip()):(_sheet.skipFlip=!1,_sheet.element.removeClass("dp-flipping dp-quick-turn dp-folding dp-left-side dp-right-side"),_sheet.element.addClass(_sheet.targetSide===DP.TURN_DIRECTION.LEFT?"dp-left-side":"dp-right-side"),_sheet.side=_sheet.targetSide,_sheet.targetSide===DP.TURN_DIRECTION.LEFT?_sheet.updateSize(this.leftSheetWidth,this.leftSheetHeight,this.leftSheetTop):_sheet.updateSize(this.rightSheetWidth,this.rightSheetHeight,this.rightSheetTop))),_sheet.visible=options.visible,_sheet.isHard?_sheet.element.addClass("dp-hard-sheet"):(_sheet.element.removeClass("dp-hard-sheet"),_sheet.frontPage.updateCSS({display:"block"}),_sheet.backPage.updateCSS({display:"block"})),_sheet.updateCSS({display:!0===_sheet.visible?"block":"none",zIndex:options.zIndex}),null==_sheet.pendingPoint&&!1===_sheet.isFlipping&&_sheet.resetCSS(),sheetPageNumber!==_sheet.pageNumber&&(_sheet.element.attr("number",sheetPageNumber),_sheet.backPage.element.attr("pagenumber",_sheet.backPage.pageNumber),_sheet.frontPage.element.attr("pagenumber",_sheet.frontPage.pageNumber))}},{key:"eventToPoint",value:function(event){event=utils.fixMouseEvent(event);var pageWidth,fullWidth,pageHeight,left,top,distance,sheet,sheetDrag,isRight,bRect=this.wrapper[0].getBoundingClientRect(),webgl=this.is3D,sheets=this.sheets,point=(this.app.dimensions,{x:event.clientX,y:event.clientY}),pRect=this.parentElement[0].getBoundingClientRect();point.x=point.x-pRect.left,point.y=point.y-pRect.top,pageWidth=(isRight=this.dragSheet?this.dragSheet.side===DP.TURN_DIRECTION.RIGHT:point.x>this.seamPosition)?this.rightSheetWidth:this.leftSheetWidth,pageHeight=isRight?this.rightSheetHeight:this.leftSheetHeight,fullWidth=this.rightSheetWidth+this.leftSheetWidth,top=isRight?this.rightSheetTop:this.leftSheetTop,left=point.x-(this.seamPosition-this.leftSheetWidth),top=point.y-(bRect.top-pRect.top)-top,distance=this.drag===DP.TURN_DIRECTION.NONE?left<pageWidth?left:fullWidth-left:this.drag===DP.TURN_DIRECTION.LEFT?left:fullWidth-left,sheet=isRight?sheets[this.stackCount/2]:sheets[this.stackCount/2-1],sheetDrag=left<this.foldSense?DP.TURN_DIRECTION.LEFT:left>fullWidth-this.foldSense?DP.TURN_DIRECTION.RIGHT:DP.TURN_DIRECTION.NONE;var corner,x=left,y=top,h=pageHeight,w=fullWidth,delta=this.foldSense;return{isInsideSheet:x>=0&&x<=w&&y>=0&&y<=h,isInsideCorner:(corner=x>=0&&x<delta?y>=0&&y<=delta?DP.TURN_CORNER.TL:y>=h-delta&&y<=h?DP.TURN_CORNER.BL:y>delta&&y<h-delta?DP.TURN_CORNER.L:DP.TURN_CORNER.NONE:x>=w-delta&&x<=w?y>=0&&y<=delta?DP.TURN_CORNER.TR:y>=h-delta&&y<=h?DP.TURN_CORNER.BR:y>delta&&y<h-delta?DP.TURN_CORNER.R:DP.TURN_CORNER.NONE:DP.TURN_CORNER.NONE)!==DP.TURN_CORNER.NONE&&corner!==DP.TURN_CORNER.L&&corner!==DP.TURN_CORNER.R,x:webgl?point.x:left,y:webgl?point.y:top,fullWidth:fullWidth,sheetWidth:pageWidth,sheetHeight:pageHeight,rawDistance:fullWidth-left,distance:distance,sheet:sheet,drag:sheetDrag,foldSense:this.foldSense,event:event,raw:point,corner:corner}}},{key:"pan",value:function(point){var reset=arguments.length>1&&void 0!==arguments[1]&&arguments[1];utils.pan(this,point,reset)}},{key:"mouseMove",value:function(event){var point=this.eventToPoint(event);if(null==event.touches||2!=event.touches.length){1!==this.app.zoomValue&&null!=this.startPoint&&!0===this.canSwipe&&(this.pan(point),event.preventDefault());var targetSheet=this.dragSheet||point.sheet;if(null==this.flipPage&&(null!=this.dragSheet||!0===point.isInsideCorner)){null!=this.dragSheet||(point.y=utils.limitAt(point.y,1,this.availablePageHeight()-1),point.x=utils.limitAt(point.x,1,point.fullWidth-1));var corner=null!=this.dragSheet?this.corner:point.corner;if(targetSheet.isHard){var isRight=corner===DP.TURN_CORNER.BR||corner===DP.TURN_CORNER.TR,angle=utils.angleByDistance(point.distance,point.fullWidth);targetSheet.updateAngle(angle*(isRight?-1:1),isRight)}else targetSheet.updatePoint(point);targetSheet.magnetic=!0,targetSheet.magneticCorner=point.corner,event.preventDefault()}null==this.dragSheet&&null!=targetSheet&&!1===point.isInsideCorner&&!0===targetSheet.magnetic&&(targetSheet.pendingPoint=point,targetSheet.animateToReset=!0,targetSheet.magnetic=!1,this.corner=targetSheet.magneticCorner,targetSheet.flip(targetSheet.pendingPoint),targetSheet.pendingPoint=null),this.checkSwipe(point,event)}else this.pinchMove(event)}},{key:"mouseUp",value:function(event){if(event.touches||0===event.button)if(null==event.touches||0!=event.touches.length){var point=this.eventToPoint(event),element=event.target||event.originalTarget,isClick=1===this.app.zoomValue&&point.x===this.startPoint.x&&point.y===this.startPoint.y&&"A"!==element.nodeName;if(!0===event.ctrlKey&&isClick)this.zoomOnPoint(point);else if(this.dragSheet){event.preventDefault();var sheet=this.dragSheet;if(sheet.pendingPoint=point,this.drag=point.drag,isClick&&(!0===point.isInsideCorner||point.isInsideSheet&&this.clickAction===DP.MOUSE_CLICK_ACTIONS.NAV))point.corner.indexOf("l")>-1?this.app.openLeft():this.app.openRight();else{var _currentPage=this.getBasePage();point.distance>point.fullWidth/2&&(point.x>point.fullWidth/2?this.app.openLeft():this.app.openRight()),_currentPage===this.getBasePage()&&(sheet.animateToReset=!0,sheet.flip(point))}this.dragSheet=null,sheet.magnetic=!1}else isClick&&!point.sheet.isFlipping&&point.isInsideSheet&&this.clickAction===DP.MOUSE_CLICK_ACTIONS.NAV&&("left"===point.sheet.side?this.app.openLeft():this.app.openRight());this.startPoint=null,this.canSwipe=!1,this.drag=DP.TURN_DIRECTION.NONE}else this.pinchUp(event)}},{key:"mouseDown",value:function(event){if(event.touches||0===event.button)if(null==event.touches||2!=event.touches.length){var point=this.eventToPoint(event);this.startPoint=point,this.lastPos=point.x,point.isInsideCorner&&null==this.flipPage?(this.dragSheet=point.sheet,this.drag=point.drag,this.corner=point.corner,0===point.sheet.pageNumber?this.bookShadow.css({width:"50%",left:this.app.isRTL?0:"50%",transitionDelay:""}):point.sheet.pageNumber===Math.ceil(this.app.pageCount/2)-1&&this.bookShadow.css({width:"50%",left:this.app.isRTL?"50%":0,transitionDelay:""})):this.canSwipe=!0}else this.pinchDown(event)}},{key:"onScroll",value:function(event){}},{key:"gotoPageCallBack",value:function(){for(var _pageCount=0;_pageCount<this.stackCount;_pageCount++){var sheets=this.sheets[_pageCount];sheets.currentTween&&sheets.currentTween.complete(!0)}this.requestRefresh()}},{key:"pagesReady",value:function(){if(!this.isFlipping()){if(!1===this.app.options.flipbookFitPages){var basePage=this.app.viewer.getBasePage(),leftViewPort=this.leftViewport=this.getViewPort(basePage+(this.isBooklet?0:this.isRTL?1:0)),rightViewPort=this.rightViewPort=this.getViewPort(basePage+(this.isBooklet||this.isRTL?0:1));if(leftViewPort){var leftDimen=utils.contain(leftViewPort.width,leftViewPort.height,this.availablePageWidth(),this.availablePageHeight());this.leftSheetWidth=Math.floor(leftDimen.width),this.leftSheetHeight=Math.floor(leftDimen.height),this.leftSheetTop=(this.availablePageHeight()-this.leftSheetHeight)/2}if(rightViewPort){var rightDimen=utils.contain(rightViewPort.width,rightViewPort.height,this.availablePageWidth(),this.availablePageHeight());this.rightSheetWidth=Math.floor(rightDimen.width),this.rightSheetHeight=Math.floor(rightDimen.height),this.rightSheetTop=(this.availablePageHeight()-this.rightSheetHeight)/2}this.totalSheetsWidth=this.leftSheetWidth+this.rightSheetWidth;for(var i=0;i<this.sheets.length;i++){var sheet=this.sheets[i];sheet.side===DP.TURN_DIRECTION.LEFT?sheet.updateSize(this.leftSheetWidth,this.leftSheetHeight,this.leftSheetTop):sheet.updateSize(this.rightSheetWidth,this.rightSheetHeight,this.rightSheetTop)}}this.updateCenter(),this.updatePendingStatusClass()}}},{key:"textureLoadedCallback",value:function(param){this.getPageByNumber(param.pageNumber);this.pagesReady()}}]),FlipBook2D}(_flipbook_js__WEBPACK_IMPORTED_MODULE_0__.a)},function(module,exports){!function(){var _tweens,a,TWEEN=TWEEN||(_tweens=[],{getAll:function(){return _tweens},removeAll:function(){_tweens=[]},add:function(tween){_tweens.push(tween)},remove:function(tween){var i=_tweens.indexOf(tween);-1!==i&&_tweens.splice(i,1)},update:function(time){if(0===_tweens.length)return!1;var i=0;for(time=null!=time?time:window.performance.now();i<_tweens.length;)_tweens[i].update(time)?i++:_tweens.splice(i,1);return!0}});TWEEN.Tween=function(object){var _object=object,_valuesStart={},_valuesEnd={},_valuesStartRepeat={},_duration=1e3,_repeat=0,_yoyo=!1,_isPlaying=!1,_reversed=!1,_delayTime=0,_startTime=null,_easingFunction=TWEEN.Easing.Linear.None,_interpolationFunction=TWEEN.Interpolation.Linear,_chainedTweens=[],_onStartCallback=null,_onStartCallbackFired=!1,_onUpdateCallback=null,_onCompleteCallback=null,_onStopCallback=null;for(var field in object)_valuesStart[field]=parseFloat(object[field],10);this.to=function(properties,duration){return null!=duration&&(_duration=duration),_valuesEnd=properties,this},this.start=function(time){for(var property in TWEEN.add(this),_isPlaying=!0,_onStartCallbackFired=!1,_startTime=null!=time?time:window.performance.now(),_startTime+=_delayTime,_valuesEnd){if(_valuesEnd[property]instanceof Array){if(0===_valuesEnd[property].length)continue;_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property])}null!=_valuesStart[property]&&(_valuesStart[property]=_object[property],_valuesStart[property]instanceof Array==!1&&(_valuesStart[property]*=1),_valuesStartRepeat[property]=_valuesStart[property]||0)}return this},this.stop=function(){return _isPlaying?(TWEEN.remove(this),_isPlaying=!1,null!=_onStopCallback&&_onStopCallback.call(_object),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++)_chainedTweens[i].stop()},this.complete=function(){return _isPlaying?(TWEEN.remove(this),_isPlaying=!1,null!=_onCompleteCallback&&_onCompleteCallback.call(_object),this.completeChainedTweens(),this):this},this.completeChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++)_chainedTweens[i].complete()},this.delay=function(amount){return _delayTime=amount,this},this.repeat=function(times){return _repeat=times,this},this.yoyo=function(yoyo){return _yoyo=yoyo,this},this.easing=function(easing){return _easingFunction=null==easing?_easingFunction:easing,this},this.interpolation=function(interpolation){return _interpolationFunction=interpolation,this},this.chain=function(){return _chainedTweens=arguments,this},this.onStart=function(callback){return _onStartCallback=callback,this},this.onUpdate=function(callback){return _onUpdateCallback=callback,this},this.onComplete=function(callback){return _onCompleteCallback=callback,this},this.onStop=function(callback){return _onStopCallback=callback,this},this.update=function(time){var property,elapsed,value;if(time<_startTime)return!0;for(property in!1===_onStartCallbackFired&&(null!=_onStartCallback&&_onStartCallback.call(_object),_onStartCallbackFired=!0),value=_easingFunction(elapsed=(elapsed=(time-_startTime)/_duration)>1?1:elapsed),_valuesEnd)if(null!=_valuesStart[property]){var start=_valuesStart[property]||0,end=_valuesEnd[property];end instanceof Array?_object[property]=_interpolationFunction(end,value):("string"==typeof end&&(end=end.startsWith("+")||end.startsWith("-")?start+parseFloat(end,10):parseFloat(end,10)),"number"==typeof end&&(_object[property]=start+(end-start)*value))}if(null!=_onUpdateCallback&&_onUpdateCallback.call(_object,value),1===elapsed){if(_repeat>0){for(property in isFinite(_repeat)&&_repeat--,_valuesStartRepeat){if("string"==typeof _valuesEnd[property]&&(_valuesStartRepeat[property]=_valuesStartRepeat[property]+parseFloat(_valuesEnd[property],10)),_yoyo){var tmp=_valuesStartRepeat[property];_valuesStartRepeat[property]=_valuesEnd[property],_valuesEnd[property]=tmp}_valuesStart[property]=_valuesStartRepeat[property]}return _yoyo&&(_reversed=!_reversed),_startTime=time+_delayTime,!0}null!=_onCompleteCallback&&_onCompleteCallback.call(_object);for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++)_chainedTweens[i].start(_startTime+_duration);return!1}return!0}},TWEEN.Easing={Linear:{None:function(k){return k}},Quadratic:{In:function(k){return k*k},Out:function(k){return k*(2-k)},InOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)}},Quartic:{In:function(k){return k*k*k*k},Out:function(k){return 1- --k*k*k*k},InOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2)},Out:function(k){return Math.sin(k*Math.PI/2)},InOut:function(k){return.5*(1-Math.cos(Math.PI*k))}},Cubic:{In:function(k){return k*k*k},Out:function(k){return--k*k*k+1},InOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)}}},TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.Linear;return k<0?fn(v[0],v[1],f):k>1?fn(v[m],v[m-1],m-f):fn(v[i],v[i+1>m?m:i+1],f-i)},Bezier:function(v,k){for(var b=0,n=v.length-1,pw=Math.pow,bn=TWEEN.Interpolation.Utils.Bernstein,i=0;i<=n;i++)b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);return b},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:(a=[1],function(n){var s=1;if(a[n])return a[n];for(var i=n;i>1;i--)s*=i;return a[n]=s,s}),CatmullRom:function(p0,p1,p2,p3,t){var v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}},window.TWEEN=TWEEN}()},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var defaults=__webpack_require__(0),utils=__webpack_require__(5),reader=__webpack_require__(9),flipbook_2d=__webpack_require__(10),flipbook_3d=__webpack_require__(7);var DEARPDF=window.DEARPDF;DEARPDF.defaults.maxTextureSize=2048;DEARPDF.viewers={},DEARPDF.viewers.flipbook=function FlipBook(options,appContext){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FlipBook),(navigator.userAgent.indexOf("Trident/")>0||DEARPDF.utils.isSafariWindows())&&(options.is3D=!1),!0===options.is3D?new flipbook_3d.a(options,appContext):new flipbook_2d.a(options,appContext)},DEARPDF.viewers.default=DEARPDF.viewers.reader=reader.a;__webpack_require__(8);defaults.a.defaults.text.loading="DEARPDF - Loading",defaults.a.defaults.has3DCover=!1,jQuery(document).ready((function(){var body=jQuery("body");defaults.a.initUtils(),defaults.a.initControls(),body.on("click",'.dp-element[data-lightbox="button"]',(function(event){event.preventDefault(),defaults.a.openLightBox(jQuery(this))})),defaults.a.parseCSSElements(),utils.a.detectHash(),defaults.a.parseNormalElements()}));__webpack_exports__.default=defaults.a}])}));